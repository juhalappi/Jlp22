\section{Preface} 
\label{preface0} 
\addcontentsline{toc}{section}{Preface} 
The \textbf{Jlp22} software is the newest version of \textbf{J} software. Don Shepard told via Fortran Discourse that 
that there is already \textbf{J} programming language. In order to avoid confusion, 
the name of \textbf{J} is now changed 
into \textbf{Jlp22}, the name which shows the inheritance from JLP. The name \textbf{J} was used in everything which  happened 
to the software before this point. 
In the current version \textbf{Jlp22}, the beef if still the linear programming in forest management planning. 
But \textbf{Jlp22} has so many tools for 
data management and numeric computations,	that also vegetarians can use it. 
Perhaps these tools will be first used for preprocessing  data and postprocessing 
the results in conjuction of linear programming. The random number generators 
provide possibilities to do risk computations related to linear programming within \textbf{Jlp22}. 
 
\subsection*{History of \textbf{J} before Luke} 
\addcontentsline{toc}{subsection}{History of \textbf{J} before Luke} 
 
JLP is the linear programming (LP) software I made for the forest planning system Mela 
which was created by Markku Siitonen in Finnish Forest Researc Institute 
(Metla). Section 'JLP linear programming algorithm' describes the development and key points in the algorithm. 
Here only the development is described from the organizational point of view. 
JLP was published 1992 (see \href{run:./jlp92.pdf}{jlp92.pdf}) and 
Finnish Forest Research Institute (Metla) started to distribute it. 
I wrote most part of it when payed by Academy of Finland. 
NMBU started to use JLP from the beginning in its GAYA software which was then called GAYA-JLP. 
 
 
 
I wrote \textbf{J} as a successor for JLP. First version of \textbf{J}, 
version 0.9.3 was published in 2004. The beef in \textbf{J} was the same linear programming 
algorithm as in JLP. \textbf{J} provided many new possibilities 
for preprocessing of data and postprocessing of results, and these computations 
can be used  also without LP problems. 
Even Bergseng from NMBU 
started to use \textbf{J} in a premature face and thus he had to tolerate quite much mix-up. The GAYA 
started to use \textbf{J} in the planning system called thereafter GAYA-\textbf{J}. Mela has not 
included \textbf{J} as 
as the optimizer, but it is possible to pull out simulated schedules from Mela and then 
define and solve linear programming problems using \textbf{J}. 
 
Simosol started to use \textbf{J} as an 
optimizer from the beginning. Simosol has privately admitted 
that they are using much \textbf{J}. 
For some reason Simosol 
wants to keep this hidden from the users of their sofware and from the public. 
It would be important for an open source software that 
the users would rise a flag when they use the sofware. 
This would give feedback to the developers 
and would allow communication between users. 
 
\textbf{J} version 2.0 published in 2013 made it possible optimize simultatenously 
forestry and transportations to factories 
and factory production. 
Reetta Lempinen started to work with me in the factory optimization. 
Reetta has professional 
training in programming, while I'm a self-learning amateur. 
Reetta had a clear head to keep complicated data structures I had created in order. 
She also maintained the spirit during the black moments. The theory for \textbf{J} with factories was published 
\href{run:./lappilempinen.pdf}{Lappi and Lempinen 2014}. 
 
 
\subsection*{J in Luke} 
\addcontentsline{toc}{subsection}{J in Luke} 
When working with Reetta, I noticed how terribly dirty the code was. I started to clean the 
code. 
In 2015 Metla and 
two other institutes were merged into Institute of Natural Resources Finland (Luke). 
When my retirement was approaching, I suggested Luke that \textbf{J} would be published as 
an open source software so that I could continue its development after my retirement. 
The leaders of Luke told that it is a good idea to open the software, and this is so important that 
Luke cannot let me take care of the publication but the leaders wanted to publish \textbf{J} 
themselves. This started a frustrating and humillating process which lasted six 
and half years. Eleven 
leaders of Luke were involved in the process, 
and none of them was eventually interested to get the software publisehd. 
 
I retired in February 2017.  Research director Johanna Buchert signed the opening decision 30. 8. 2017. 
I was not informed of the decision. Later Luke turned down explicitly any cooperation 
in the publication or in the development of 
the software. 
 
When Lauri Meht√§talo became a professor in Luke, he was able to mediate negotiations between me and Luke. 
The co-operation agreement was signed 7.10. 2021, in the 100 years celebration of NFI in  Kings Hall 
in the medieval Olavinlinna castle in Savonlinna. 
 
I got a 
permission to publish the software, and Luke agreed to 
provide  treatment schedules simulated with Mela using NFI data from whole Finland and data 
from pulp mills and saw mills. 
Luke should provide me access to CSC supercomputers.  Luke should distribute \textbf{Jlp22} via Github.  This point 
was not necessary as Reetta adviced me how to use Github. 
 
I was told in Olavinlinna that there has actually been no disagreement 
between me and Luke in this process. 
As I could not accept the interpretation that I had fighted six and half years against wind mills, 
I described in previous versions some details of the process. This kept my bitterness 
alive which was unfortunate for my peace of mind and also because 
I knew well how pathetic old bitter men are. After some recent rounds of argumentation, the research director 
called me in January 12 2023 and admitted that Luke did not handle the opening and publication properly 
and that Luke will improve its procedures. I want now look forward, and I make 
only two comments. 
 
First, I think that if a government research institute decides that a sowtware can be 
opened and published, the principal author should have the right to participate in the 
preparation of the formal opening decision and to take care of the publication. 
 
Second. 
The software contained so much dirty code that it could not be developed without my involvement, 
and barely even maintained. The leaders of Luke did not know this because they were not 
interested to discuss with me anything related to the state, publication or 
development of the software. I think that an expert organization should 
always consult best experts and not only those who can express them most persuasively. 
 
 
\subsection*{Rewriting the software} 
\addcontentsline{toc}{subsection}{Rewriting the software} 
 
Open \textbf{Jlp22} was published 22.4.2022 in a web-seminar, and it has been distributed in Github since then. 
It contained many errors, but I wanted to get the open \textbf{J} started. 
After my retirement I have rewritten completely the software, 
the most part after the agreement in 7.10.2021. 
Only the sceleton and innermost loops in the optimization come from the time I worked 
for Metla and Luke. One important change was to put the software into 64-bit which 
allows the analysis of big data sets. The following manual tells what \textbf{Jlp22} can do now. 
The factory optimization is under development, and I will be published it later. 
Reetta has participated 
in testing, in addition to teaching the use of Github and giving encouragement all the time. 
 
 
\subsection*{Book: Linear and nonlinear programming methods} 
\addcontentsline{toc}{subsection}{Book: Linear and nonlinear programming methods} 
I signed in Dec 15 2022 with Chapman \& Hall the author agreement that I will write 
a book with title: 'Linear and nonlinear programming methods for joint analysis of forestry 
and factories: \textbf{Jlp22} approach'. 
 
The book will be published with Open Access if I pay 16500 Euro when the book is ready. 
I want it be OA as it is based on an open software. Alongside with the book, there will be a script file so that the readers 
can repeat computations just writing the name of the example, similarly as the users 
of \textbf{Jlp22} can compute the examples in this manual. So I need data which I can utilize for such OA 
computations. My current agreement with Luke does not allow such utilizitation of Luke's data. 
 
 
 
 
\subsection*{Acknowledgements} 
\addcontentsline{toc}{subsection}{Acknowledgements} 
 
 
 
I acknowledge the contribution of 
Even Bergseng and Victor Strimbu from NMBU for co-operation in the development of \textbf{J}, Kyle Eyvindson from NMBU/Luke for 
providing me access to CSC supercomputer, Hannu Salminen for co-operation. 
Hannu Hirvel\"a  provided me Mela data, and Pekka Hyv\"onen factory data. 
Lauri Meht\"atalo was building with me the links between \textbf{J} and R. 
Ron Shepard adviced in Fortran Discourse to make expansion of allocated 
vectors faster, in addition to advicing to chance the name of \textbf{J} software. 
I thank Reetta Lempinen for being a loyal colleague for a long time. 
 
 
I thank my grand daughter Ella 
for the permission to use the portrait she drawed for my 70 yr birthday in 2021. 
 
\vspace{0.5cm} 
Suonenjoki 25.1.2023 
\vspace{0.5cm} 
Juha Lappi 
 
\section{Recent changes} 
\label{changes} 
 
After renaming the software to \textbf{Jlp22}, this chapter starts to describe changes in new versions. 
The corrections of errors are not described in detail. The first version of \textbf{Jlp22} contains so many new properties that also old users 
should look at the manual. All the examples of the manual should now go through using ALL in running 
jexamples.inc. 
 
Version 14.3. 2023 Function \textcolor{VioletRed}{exceldata}() corrected. A bug corrected in \textcolor{VioletRed}{jlpz}(). 
More user errors noticed before a memory overflow. A bug corrected when space 
for numeric constants had to be increased. 
 
Version 8.3.2023 Some bugs corrected, e.g. in \textcolor{VioletRed}{data}() function and one bug in the precompiler. 
Some user errors are reported better. The manual is updated. There is 
now function stemcurve() which defines a stem curve used with linear interpolation. 
This is reported if anyone is interested. 
 
Version 27.2. 2023 Some bugs corrected, i.e. in \textcolor{VioletRed}{jlpz}(), and some user errors are detected 
to avoid memory overflow. If values of matrix elements were 
given 
in the input paragraph after \textcolor{VioletRed}{matrix}(), it was not possible to separate numbers with spaces (even if this was not 
told in the manual). Now spaces are allowed as separators but input programming is not. If 
input programming tools are needed, it is easly to add option which makes it possible. \textcolor{Red}{;if}();then 
structures in the input programming were not described in the manual, now they are. 
 
Version 23.2.2023. The most important change is that the \textcolor{VioletRed}{data}() function is rewritten. 
Now it is simpler and more easy to maintain. It is not possible to make two \textcolor{teal}{DATA} objects with 
a single call to \textcolor{VioletRed}{data}(), but it is not really reasonable to put unit data and schedules data 
into the same file. There are some other changes which are note yet fully reported. Examples go through 
but there are some not properly tested features. 
 
Version 25.1.2023. Factory optimization started. It does not work yet 
but the example shows how it can be used in the future. 
 
Version 31.12.2022. \textcolor{VioletRed}{jlp}() solves (again) problems without any constraints. 
The \textcolor{blue}{showdomain->} works also for problems without contraints. The new subroutines needed for this 
will smooth the road to factory optimization. 
 
Version 30.12.2022 \textcolor{VioletRed}{jlp}() has now \textcolor{blue}{showdomain->} option which defines additional domains for which the sums 
of \textcolor{teal}{x}-variables are also computed. This option was already in JLP. 
All sums of \textcolor{teal}{x}-variables are now stored into variables with names starting with Output\%. Sums 
in domains are stored in variables with postfix [domaindefinition], e.g. [site.lt.3]. 
 
In version 28.12. 2022 \textcolor{VioletRed}{joindata}() which builds schedules data from tree format data has two new options 
which allow combining several data sets faster and it is possible to save memory so that larger 
schedules data fits the memory. Some fine tuning of the preface of the manual. 
 
In version 27.12. 2022 the main change is the possiblity to handle so large matrices that their 
elements cannot be referred with 4-byte integers. Such matrices are needed for schedules from the whole 
country. This change did cause a large amount of boring editing. 
There are places which are not put into 8-byte integer mode, and I will update 
these places whenever needed. 
In the data structures, I have the hidden property to work with single precision matrices and with tree-structure 
data which is not made into the tabular form using \textcolor{VioletRed}{joindata}() function. I will start to 
utilize these implicit properties when there is lack of memory even in the 64-bit environment. 
In this Github publication, 
the release exe-file is not updated. 
 
Version Dec 20 2022 provides simple data formats for storing schedules so that in the simulation tree only thos 
nodes after branching are stored. See \textcolor{blue}{keepopen->} and \textcolor{blue}{continue->} options in \textcolor{VioletRed}{data}(). Function \textcolor{VioletRed}{joindata}() is 
used to build the schedules from their components. Function \textcolor{VioletRed}{splitdata}() can be used to split data caontaining whole 
schedules into these new compponent datas. \textcolor{VioletRed}{splitdata}() can be used to convert data generated with previous simulators 
into this new format. It is recommeneded that a simulator generating data for \textbf{Jlp22} 
starts to write directly into this new format. 
 
A bug in Fletchers code was found. When after some pivot steps only residual variables 
are in the basis, the code computed wrong shadow prices, and the objective was getting worse. 
This situation will not happen in ordinary linear programming problems. When hunting the bug, I developed new 
debugging tools, so I hope that all users would now send problematic 
runs to me. 
 
Now the variable telling the number of observations in \textcolor{teal}{DATA} \textcolor{teal}{datab} is always \textcolor{teal}{datab}\%obs. 
Similarly the variable 
telling how many children that observation has in the lower level 
is now always \textcolor{teal}{datab}\%nobsw and it must be the 
first varaible in the list of variables. If the first variable is \%nobsw, then its name is automatically 
changed into the proper form. This new legislation was necessary to keep the new multilevel 
datas in order. 
 
Version Dec 20 2022 gives possibility to change fonts in figures. 
 
\section{Introduction} 
\label{intro} 
\textbf{Jlp22} can be used as is, i.e. using exe files. The User's guide concentrates 
on using binary files, but some reference is also made to additional possibilities offered 
by the open \textbf{Jlp22} code. 
\subsection{Using \textbf{Jlp22} exe files} 
\label{intro1} 
\textbf{Jlp22} is a general program for many different tasks. In one end, \textbf{Jlp22} is a programming language which 
can be used to program several kind of applications and tasks, starting from computing 1+1, either 
at \textcolor{Red}{sit>} promt or inside a trasformation object. 
In the other end, it contains many functions which 
can do several tasks in statistics, plotting figures, 
deterministic and stochastic simulation and linear optimization. Forest planning with factories 
using \textcolor{VioletRed}{jlp}() function can take several hours. 
The general \textbf{Jlp22} functions and \textbf{Jlp22} trasformations can be combined in many ways. 
 
There are several alternatives for doing general mathematical and statistical 
computations available in \textbf{Jlp22}, most prominent being R. For  users of R, the most interesting 
functions in \textbf{Jlp22} are evidently the linear programming functions which utilize the the structure 
of typical forest managment planning problems. The forest management planning can now 
in principle be combined with factories. Just now a completely new version of factory optimization 
is under development, and thus it is not usable. R users can do general data management in R and use 
\textbf{Jlp22} only for linear programming. But after learning basics of \textbf{Jlp22}, it may be more 
straightforward to do also data management in \textbf{Jlp22}. 
 
\textbf{Jlp22} can now be used for general matrix computations. I have included in \textbf{Jlp22} all matrix functions of 
Matlab which I found useful in a consulting project. \textbf{Jlp22} uses Gnuplot for making figures. 
It is straigtforward to extend these graphics functions. \textbf{Jlp22} can be used an 
interface to Gnuplot graphics.  \textbf{Jlp22} contains many tools to deal with classified data. 
 
The current binary versions of \textbf{Jlp22} are developed using Gfortran Fortran 90 compiler in MSYS2 MINGW 64-bit environment 
under Windows 10. 
Binary versions are ordinary console applications. It is recommended that \textbf{Jlp22} is used in command 
prompt window, so that 
if execution of \textbf{Jlp22} terminates unexpectedly, the error debugging information remains visible. 
With the debug version the problematic line is indicated. 
See chapter \ref{error} for more information of error handling. 
 
 
\subsection{System requirement} 
\label{system} 
! 
 
 
Figures are made with Gnoplot. 
Gnuplot is freely available at 
 
 
https://sourceforge.net/projects/gnuplot/files/gnuplot/5.4.2/ 
 
Download  download gp542-win64-mingw.exe. This will install gnuplot on your windows 
system under C::\textbackslash Program Files\gnuplot\. \textbf{Jlp22} will strat Gnuplot automatically when 
plotting figures if Gnuplot is on the PATH (see section Installing Gnuplot and \textbf{Jlp22}). 
Dcomentation is found also in \ref{gnu} 
 
\subsection{Developing own \textbf{Jlp22} functions in Fortran} 
\label{intro2} 
The user's of \textbf{Jlp22} can utilize the open source of \textbf{Jlp22} in principally two different ways. 
Either the user can develop new versions of existing \textbf{Jlp22} functions or the user can can make new functions. 
It both cases the user should make new developments using so called own functions, which can 
be independently of the main \textbf{Jlp22} functions. When modifying an existing \textbf{Jlp22} function, the user should make a copy of the 
function under a different name. Then the old and new versions 
can exist simultaneously in the function 
space of \textbf{Jlp22}. It is very easy to add new functions in \textbf{Jlp22} and even more easy to add new options. 
 
When deloping a new methods in \textbf{Jlp22}, it is possible to first use the \textbf{Jlp22} 
script language to make developments. 
Then the user can make an own function where the method is written in Fortran to make the method faster. 
When writing new methods in Fortran, the user can concentrate on essential parts of the method, and utilize 
the standard data management services provided by \textbf{Jlp22}. 
 
 
See \textbf{Jlp22}Development.docx to start develop the software or to add 
own functions. This guide is not up to data, so all who are willing to start development shoud 
caotact first juha.lappi.sjk@gmail.com. The development package contains, in addition to source code for 
the standard \textbf{Jlp22} software, program Jmanual 
which can be used to generate Latex code for the manual and the include file for 
examples.   The precompiler Jpre  writes necessary Fortran statements to access all global 
\textbf{Jlp22} data structures, makes indentations and checks if-then and do strutures and gives 
better error messages for them than Gfortran. 
\section{ Loading \textbf{Jlp22} from Github} 
\label{git} 
The Github ditribution was made under the guidance of Reetta Lempinen. This section describes the 
folders of the Github distribution. 
\subsection{Git package} 
\label{gitpack} 
The \textbf{Jlp22}  package can be loaded by pressing load zip button under the green 
code button in the right side of the page github.com/juhalappi/\textbf{Jlp22}.  The package 
contains the following files. 
 
\begin{itemize} 
\item LICENSE the license file 
\item README.m readme file 
\end{itemize} 
 
The package contains following folders: 
 
\begin{itemize} 
 
 
\item \textbf{JR}  \hspace{0.2cm} using \textbf{Jlp22} from R, courtesy of Lauri Meht\"atalo. 
 
\begin{itemize} 
\item j.par \hspace{0.2cm}default include file for starting \textbf{Jlp22}. It contains also a LP 
problem and its solution. 
\item JR\_0.0.tar.gz \hspace{0.2cm} File needed to use Fortran subroutines in R 
\item cdat.txt 
\item xdat.txt 
\end{itemize} 
 
\item \textbf{Jbin}\hspace{0.2cm} binary .exe files and dll files 
\begin{itemize} 
\item jlp22.exe \hspace{0.2cm} \textcolor{teal}{Debug} version of \textbf{Jlp22}. 
\item jlp22r.exe \hspace{0.2cm} Release version of \textbf{Jlp22}. If the release version crashes, 
use the debug version to get more information of the cause. 
\item jmanual.exe \hspace{0.2cm} makes the latex code file  \href{run:./jmanual.tex}{jmanual.tex} and 
the example file \href{run:./jexamples.inc}{jexamples.inc}. 
\item jpre.exe \hspace{0.2cm} the precompiler which generates the code 
for accessing variables in modules, makes indentations and gives better error messages 
for mixed do-loops and if-then structures than Gfortran. 
\item dll:\hspace{0.2cm} libgcc\_s\_seh-1.dll, libgfortran-5.dll, libquadmath-0.dll and 
libwinpthread-1.dll which must be available in the path. e.g., in the same folder as the exe 
\end{itemize} 
 
\item \textbf{Jdocdemo} \hspace{0.2cm}documents and include file for running examples from User's guide 
\begin{itemize} 
\item \textbf{Jlp22}.pdf \hspace{0.2cm} This user's guide made with Latex using Overleaf \url{http://www.overleaf.com}. 
 
\item \href{run:./jexamples.inc }{jexamples.inc} \hspace{0.2cm}include file which can be used to run all examples in the manual 
and which is generated with jmanual.exe 
\item \href{run:./cdat.txt}{cdat.txt} \hspace{0.2cm}example unit data file for small \textcolor{VioletRed}{jlp}() example in jexample.inc. 
\item xdat.txt\hspace{0.2cm}example schedule file for small \textcolor{VioletRed}{jlp}() example 
\item \href{run:./jlp92.pdf}{jlp92.pdf} \hspace{0.2cm}Manual of old JLP which explains the theory behind the jlp algorithm 
\item \href{run:./lappilempinen.pdf}{lappilempinen.pdf} \hspace{0.2cm} Paper explaining the theory behing factory optimization. 
\item \href{run:./hyvonenetal2019.pdf}{hyvonenetal2019.pdf} \hspace{0.2cm} A paper utilizing the factory optimization. 
\item \href{run:./JLp22development.docx} {Jlp22development.docx} \hspace{0.2cm} not up-to-date manual for developers 
\item \href{run:./fletcher.pdf}{fletcher.pdf} The theory behind the subroutines of Fletcher 
\end{itemize} 
 
\item \textbf{Jmanual} \hspace{0.2cm} Source files for making Latex code for 
the manual and the include file for running examples 
\begin{itemize} 
\item jmanual.f90 \hspace{0.2cm}source for making the Latex code and jexamples.inc 
\item jmanual.tex \hspace{0.2cm}Latex code generated with jmanual.exe 
\item jsections.txt \hspace{0.2cm}describes manual sections not in source files 
\item jsections2.txt \hspace{0.2cm}tells in what order sections found in jsections.txt 
and source files are put into the manual and what is the level of the sections 
\item main.tex  \hspace{0.2cm}Preample code containing Latex definitions 
\item Makefile\_debug \hspace{0.2cm}Makefile for making jmanual.exe 
\end{itemize} 
 
\item \textbf{Source} \hspace{0.2cm} source code before precompilation 
\begin{itemize} 
\item fletcherd.for \hspace{0.2cm}Fletchers subroutines turned into double precision 
\item j.f90 \hspace{0.2cm}code for \textbf{Jlp22} functions 
\item jlp.f90 \hspace{0.2cm}code for linear programming 
\item j.main \hspace{0.2cm}main prorgam for calling \textbf{Jlp22} when used as is, if \textbf{Jlp22} is used as 
a subroutine then this must be made a subroutine 
\item jmodules.f90 \hspace{0.2cm}data structure definitions 
\item jutilities.f90 \hspace{0.2cm}subroutines for handling objects etc. 
\item jsysdep\_gfortran.f90 \hspace{0.2cm}system dependent routines 
\item matsub.f \hspace{0.2cm}subroutines obtained from other sources, e.g. from Netlib 
\item other subroutines for setting up users own  functions 
\end{itemize} 
 
\item\textbf{Source2} \hspace{0.2cm} source code files after precompilation 
in addition to files in Source (such files which are not precompiled are put in both folders) 
\begin{itemize} 
\item makefile\_debug \hspace{0.2cm}makefile for making debug version \textbf{Jlp22}.exe 
\item makefile\_release\hspace{0.2cm} makefile for making release version \textbf{Jlp22}r.exe 
\end{itemize} 
 
 
\end{itemize} 
 
\subsection{Loading the package} 
\label{gitload} 
 
The installation is here described from the viewpoint of an user 
who just want to use \textbf{Jlp22}, not develop it (yet). 
 
The load zip button loads file \textbf{Jlp22}-master.zip. Copy this file into a proper folder. 
Let it be Jgit. Clicking the \textbf{Jlp22}-master.zip icon shows folder \textbf{Jlp22}-master in 
7Zip (if this is installed). Clicking unpack 7zip unpacks it to the folder Jgit. 
Too many folder levels are avoided, if everyhing in folder \textbf{Jlp22}-master 
is copied directly in 
folder Jgit. 
 
The jlp22.exe is the debug version of \textbf{Jlp22} and \textbf{Jlp22}r is the release version. 
The debug version should be 
used still used to set up a project. When everythings seems to work, the user 
can try the release version in production runs where the time is of some concern. 
Let us assume that the working folder is jtest. 
\section{Install} 
\label{install} 
\subsection{Install \textbf{Jlp22}} 
\label{installjlp22} 
After loading \textbf{Jlp22} from the Github.com/juhalappi/\textbf{Jlp22}, the folders of the exe files must be 
put into the environmental variable PATH. In my computer the PATH contains line C:\textbackslash jlp22 
An ordinary user may use \textbf{Jlp22} and \textbf{Jlp22}r from the folder 
Jgit\textbackslash \textbf{Jlp22}bin. 
\subsection{Install Gnuplot} 
\label{installgnuplot} 
Let us then install Gnuplot. Go to page \url{http://gnuplot.info}, and select there download, 
and in the download page select green 'download latest version', which loads 
'gp543-min64-mingw.exe' (or similar), and if you let it install with usual yes-next procedures 
gnuplot is installed  in folder c:\textbackslash program files\textbackslash gnuplot 
which should be placed into the environmental variable Path. 
\subsection{Install Rscript} 
\label{installrscript} 
 
If you plan to run R scripts from \textbf{Jlp22}, Rscript program mus be installed 
and the folder must be put into the PATH. In my computer the folder is 
C:\textbackslash Program Files\textbackslash R\textbackslash R-4.1.2\textbackslash bin 
\subsection{After install restart} 
\label{afterinstall} 
After editing the environmental varaible Path, the computer mus be restarted. 
\section{Typographical conventions} 
\label{typo} 
\subsection{\textcolor{VioletRed}{sin}() is a function}\index{sin()} 
\label{wrfunc} 
\subsection{\textcolor{blue}{xrange->} is an option} 
\label{wropt} 
\subsection{\textcolor{Red}{;incl} is and input programming function}\index{;incl} 
\label{wrinpu} 
\subsection{\textcolor{teal}{matrixa} is an object} 
\label{wrobj} 
\textcolor{teal}{Names} \textcolor{teal}{matrixa}, \textcolor{teal}{matrixb}, \textcolor{teal}{proba},\textcolor{teal}{probb}, \textcolor{teal}{jlpa},\textcolor{teal}{jlpb} etc 
are common names used for matrices etc. Coloring of object names is not yet complete. 
\subsection{\textcolor{teal}{MATRIX} is shorthand notaion for a matrix object} 
\label{wrtype} 
\textcolor{VioletRed}{if}(\textcolor{VioletRed}{type}(\textcolor{teal}{matrixa}).eq.\textcolor{teal}{MATRIX})\textcolor{VioletRed}{then} .. 
\section{Subroutines from other sources} 
\label{license} 
The following subroutines are obtained from other sources. 
\begin{itemize} 
 
\item  subroutine tautsp used in j\_function tautspline 
from Carl de Boor (1978) A practical guide to splines. Springer, New York, p.310-314 
No licence restrictions known. 
Distribution: \\ 
\url{https://www.researchgate.net/publication/200744645_A_Practical_Guide_to_Spline}, 
see also \url{ http://pages.cs.wisc.edu/~deboor} 
 
 
 
\item Several subroutines from \url{www.netlib.org/lapack} 
with licence :\\ 
\url{http://www.netlib.org/lapack/LICENSE.txt} 
\end{itemize} 
\section{Running examples} 
\label{runex} 
 
If you plan to edit the example file, copy jexamples.inc and jlp22.pdf  from jdocdemo folder into the Jtest folder. 
It is not wise to start 
working in the Jdocdemo folder, because if you load a new version of \textbf{Jlp22} in a similar way into Jgit folder 
and allow the computer replace existing folders with the same name, 
you would loose the work done in Jgit folder. 
 
Open the command prompt and move to the directory 'jtest' by 'cd' commands. 
It is possible to use \textbf{Jlp22} also directly, but its necessary to use \textbf{Jlp22} through the command prompt 
at this testing phase, because then, if \textbf{Jlp22} crashes, the error messages do not disappear. 
In first time, you may want to change 
the colors etc of the commant prompt (color may take effect only after 
closing command prompt and reopening it). It may be reasonable to tick all editing 
properties under the properties button of the command prompt. 
 
If you would like that when starting \textbf{Jlp22} in this folder, \textbf{Jlp22} immediately starts with examples, 
make file j.par to folder jtest and write 
to it 
 
\textcolor{Red}{;incl}(jexamples.inc) 
 
It is possible to write to the first line of j.par 
 
*3000 
 
which would mean that \textbf{Jlp22} would generate intially 3000 named objects. 
 
 
Then start \textbf{Jlp22} by giving command \textbf{Jlp22} at the command prompt. 
If you have not done j.par file, write at the \textcolor{Red}{sit>} prompt:  \textcolor{Red}{;incl}(jexamples.inc). 
Alternatively you can diretly start in the jexamples.inc by launching \textbf{Jlp22} by\\ 
\textbf{Jlp22} jexamples.inc 
 
\textbf{Jlp22} will then print all shortcuts available. You can run examples one by one by giving example shortcuts 
individually, or you can run all examples by shortcut ALL. If you give shortcut ALL, \textbf{Jlp22} asks whether 
a \textcolor{Red}{;pause} is generated after each example ('pause after each example(1/0)>'). 
Even if \textcolor{VioletRed}{pause}() is not generated after each example, it is generated after each plot. 
This can be prevented by pressing <return> when \textbf{Jlp22} asks value for fpause. Examples in the ALL section can anyhow be started 
at any point by putting label ';current:' to any point after label ;ALL: and giving shortcut 
'current'. This is also handy when examples have errors which break the execution. If the errors are made 
intentionally to demonstrate error situations, the interruption of excution after these intentional errors are 
prevented so that the jexamples.inc have command \textcolor{teal}{Continue}=1 before the intentional error. Theafter the normal 
error handling is put on by command \textcolor{teal}{Continue}=0. 
 
It is useful to keep the manual open and follow simultaneously the manual and the execution of examples. 
 
 
 
\section{Command input and output} 
\label{cominout} 
\textbf{Jlp22} has two programming levels. First level, called input programming, generates text lines which are then 
transmitted to the parser which generates code which is the put into transformations sets or 
excuted directly. Input programming loops make it possible to generate large number of command lines 
in a compact and short form. This chapter describes input programming concepts and commands. 
\subsection{Input record and input line} 
\label{inpuline} 
\textbf{Jlp22} reads input records from the current input channel which may be the console, file or a text object. 
When \textbf{Jlp22} interprets input lines, spaces between limiters and function or object names are not 
significant. In input programming, functions start with ';' which is part of the function name (and 
there can thus be no space immediately after ';'). If a line (record) ends with ',' ,'+', '*¬¥, '-', 
'(', '=' or with '>', then the next record is interpreted as a continuation record and 
the continuation character is kept as a part of the input 
line. Tf a record ends with ',' and the next record starts also with ',', only one ',' is obtained. If a line ends with '>{}>', then 
the nex line is also continuation line, and  '>{}>' is ignored. All continuation 
records together form one input line. In previous version input programming functions operated on input lines 
but now they operate on recors. One input record can contain 4096 characters, and an input line can contain also 4096 characters 
(this can be increased if needed). 
There can be comment lines within a command line. 
 
When entering input lines from the keyboard, the previous lines given from the keyboard can no more be 
accessed and edited using the arrow keys owing to MSYS2 MSYS environment used to build the exe-file. 
To copy text from the \textbf{Jlp22} window into the clipboard right-click the upper left icon, select Edit, 
and then select Mark. Next click and drag the cursor to select the text you want to copy and 
finally press Enter (or right-click the title bar, select Edit, and in the context menu click Copy). 
To paste text from the clipboard into the \textbf{Jlp22} command line right-click the title bar, select Edit, 
and in the context menu click Paste. Console applications of Intel Fortran do not provide copy 
and paste using <cntrl>c and <cntrl>v. An annoying feature of the current command window is that it is possible 
All input lines starting with '*' will be comments, and in each line text starting with '!' will also 
be interpreted as comment (!debug will put a debugging mode on for interpretation of the 
line, but this debug information can be understood only by the author). If a comment line starts 
with '*!', it will be printed. 
\subsection{Input Paragraph} 
\label{inpupara} 
Many \textbf{Jlp22} functions parsed and executed (interpreted) at the command level need or can use a group of 
text lines as input. In these cases the additional input lines are immediately after the function. 
This group of lines is called input paragraph. The input paragraph ends with '/', except the 
input paragraph of text function \textcolor{VioletRed}{text}() and \textcolor{VioletRed}{txt}() end with '//' as a text object can contain ordinary input 
paragraphs. It may be default for the function that there is input paragraph following. When 
it is not a default, then the existence of the input paragraph is indicated with option \textcolor{blue}{in->} 
without any value. For many functions, the input paragraph can contain input programming commands. 
The resulting text lines are transmitted to the function which interprets the input paragraph either using 
the parser (e.g. \textcolor{VioletRed}{trans}() function) or by other means (e.g \textcolor{VioletRed}{problem}()). 
\singlespacing 
\begin{example}[inpuparag]Example of inputparagraph\\ 
\label{inpuparag} 
\noindent \textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
a=\textcolor{VioletRed}{log}(\textcolor{teal}{b})\\ 
\textcolor{VioletRed}{write}(\$,'($\sim$sinlog\,is=$\sim$,f4.0)',\textcolor{VioletRed}{sin}(a))\\ 
/                                                                                   \\ 
\textcolor{teal}{b}=\textcolor{VioletRed}{matrix}(2,3,\textcolor{blue}{in->})\\ 
1,2,3\\ 
5,6,7\\ 
/    \\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{Shortcuts} 
\label{short} 
Command shortcuts are defined by defining character variables. When entering the 
name of a character variable at \textcolor{Red}{sit>} prompt or from an include file, \textbf{Jlp22} excutes the command. 
The command can be either input programming command or one-line command. The file jexamples.inc 
shows an useful way to organize shortcuts and include files. 
\singlespacing 
\begin{example}[shortex]Example of using shortcuts and include files\\ 
\label{shortex} 
\noindent short1='\textcolor{VioletRed}{sin}(\textcolor{teal}{Pi})+\textcolor{VioletRed}{cos}(\textcolor{teal}{Pi});'\\ 
short1\\ 
te=\textcolor{VioletRed}{text}()\\ 
this=\textcolor{VioletRed}{thisfile}()\\ 
ju1='\textcolor{Red}{;incl}(this,\textcolor{blue}{from->}a1)'\\ 
ju2='\textcolor{Red}{;incl}(this,\textcolor{blue}{from->}a2)'\\ 
\textcolor{Red}{;return}\\ 
;a1:\\ 
{\color{ForestGreen}!! greetings from a1}\\ 
\textcolor{Red}{;return}\\ 
;a2:\\ 
{\color{ForestGreen}** here, jump to a1}\\ 
ju1\\ 
{\color{ForestGreen}*! back here, return to sit> or next example in ALL}\\ 
\textcolor{Red}{;return}\\ 
//                      \\ 
\textcolor{VioletRed}{write}('shortex.txt',\$,te)\\ 
\textcolor{VioletRed}{close}('shortex.txt')\\ 
\textcolor{Red}{;incl}(shortex.txt)\\ 
ju1\\ 
ju2\\ 
\textcolor{VioletRed}{delete\_f}('shortex.txt')\\ 
te=0\,{\color{ForestGreen}!delete also text object te}\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{system() executes Windows commands} 
\label{systemcom} 
Windows system commands can be given by\\ 
system('command')\\ 
For instance \\ 
system('cls') clears screen 
system('dir') prints the directory 
\subsection{cls clears screen} 
\label{cls} 
command cls clears screen, thus cls is equivalent to system('cls') 
\subsection{Input programming} 
\label{inpuprog} 
The purpose of the input programming is to read or generate \textbf{Jlp22} commands or input lines 
needed by \textbf{Jlp22} functions. The names of input programming commands start with semicolon ';'. 
There can be no space between ';' and the following input programming function. The syntax 
of input programming commands is the same as in \textbf{Jlp22} functions, but the input programming 
functions cannot have an output. There are also control structures in the input programming. 
An input paragraph can also contain input programming structures. 
\subsection{ Labels in input programming} 
\label{inpuad} 
 
The included text files can contain labels. Labels define possible starting points for the 
inclusion or jump labels within an include file. A label starts with semicolon (;) and 
ends with colon (:). There can be text after the label and the text is printed but 
otherwise ignored.\\ 
 
 
;ad1:  At this point we are doing thit and that 
 
 
\begin{note} 
The definition of a transformations object can also contain labels. These labels start 
with a letter and end also with colon (:). When defining a transformation object with \textcolor{VioletRed}{trans}() function, 
the input paragraph can contain input programming labels and code labels. It is up to 
input programming what code alabels become part of the transformation object. 
\end{note} 
 
 
\subsection{Changing "i" sequences} 
\label{inpureplace} 
If an original input line contains text within quotation marks, then the sequence will be replaced 
as follows. If a character variable is enclosed, then the value of the character variable is 
substituted: E.g. 
directory='D:/\j/\' 
name='area1' 
extension='svs' 
then 
\textcolor{blue}{in->}'"directory""name"."extension"' 
is equivalent to 
\textcolor{blue}{in->}'D:/\j/\area1.svs' 
If the "-expression is not a character variable then \textbf{Jlp22} interprets the sequence as an arithmetic 
expression and computes its value. Then the value is converted to character string and 
substituted into the place. E.g. if nper is variable having value 10, then lines 
\color{Green} 
\begin{verbatim} 
x#"nper+1"#"nper" = 56 
chv = 'code"nper"' 
\end{verbatim} 
\color{Black} 
are translated into 
\color{Green} 
\begin{verbatim} 
x#11#10 = 56 
chv = 'code10' 
\end{verbatim} 
\color{Black} 
 
With " " substitution one can define general macros which will get specific interpretation by 
giving values for character and numeric parameters, and numeric parameters can be utilized in 
variable names or other character strings. In transformation sets one can shorten computation 
time by calculating values of expressions in the interpretation time instead of doing 
computations repeatedly. E.g. if there is in a data set transformation 
\textcolor{teal}{x3} = "\textcolor{VioletRed}{sin}(\textcolor{teal}{Pi}/4)"*x5 
Then evaluation of \textcolor{VioletRed}{sin}(\textcolor{teal}{Pi}/4) is done immediately, and the value is transmitted to the 
transformation set as a real constant. 
If value of the expression within a ‚Äú‚Äù sequence is an integer then the value is dropped in the 
place without the decimal point and without any spaces, otherwise its value is presented in 
form which is dependent on magnitude of the value. After J3.0 the format can be explicitly 
specified within [] before the numeric value. Eg. text can be put into a figure as 
\textcolor{teal}{fig} = 
\textcolor{VioletRed}{drawline}(5,5,\textcolor{blue}{mark->}‚Äôy=‚Äù[f5.2]coef(reg,\textcolor{teal}{x1})‚Äú*\textcolor{teal}{x1}+‚Äù[f5.2]coef(reg,1)‚Äú‚Äò) 
See file jex.txt and Chapter 8 for an ex 
\subsection{\textcolor{Red}{;incl}() lines from a file}\index{;incl} 
\label{incl} 
Includes lines from a file or from a text object. Using the \textcolor{blue}{from->} 
option the include file can contain sections which start with adresses like 
;ad: \\ 
and end with \\ 
\textcolor{Red}{;return} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args  \tabto{3cm}  0|1  \tabto{5cm}   Ch|Tx  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent   file name. Default: the same file is used as in the previous \textcolor{Red}{;incl}(). 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{from}  \tabto{3cm}  N|1  \tabto{5cm}   Ch  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent gives the starting label for the inclusion, label is given without starting ';' 
and ending ':'. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{wait} \tabto{3cm}  N|0  \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textbf{Jlp22} waits until the include file can be opened. Useful in client server applications. 
See chapter \textbf{Jlp22} as a server. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
Include files can be nested up to 4 levels. 
\end{note} 
\begin{note} 
In the current version of \textbf{Jlp22}, the file name and the adress can be without apostrophes ' ', 
but the previous names with apostrophes are allowed. 
\end{note} 
\begin{note} 
It is possible to start reading the script from the same file. In that case \textcolor{Red}{;return} returns the reading of 
the script after the \textcolor{Red}{;incl}- line. 
\end{note} 
\begin{note} 
\textcolor{Red}{;goto}(adr) and \textcolor{Red}{;incl}(\textcolor{blue}{from->}adr) go to the same line in the include file but after \textcolor{Red}{;goto} the \textcolor{Red}{;return}-command 
closes the include file but after \textcolor{Red}{;incl}() the \textcolor{Red}{;return}-command returns the control to the calling point. 
\end{note} 
\begin{note} 
See Chapter Defining a text object with text function and using it in \textcolor{Red}{;incl} how to include 
commands from a text object. 
\end{note} 
\begin{note} 
When editing the include file with Notepad ++, it is reasonable to set the language as Fortran (free form). 
\end{note} 
\singlespacing 
\begin{example}[inpuincl]Example of \textcolor{Red}{;incl}()\\ 
\label{inpuincl} 
\noindent file=\textcolor{VioletRed}{text}()\\ 
{\color{ForestGreen}** File start}\\ 
i=1;\\ 
\textcolor{Red}{;goto}(ad1)\\ 
{\color{ForestGreen}** Never here}\\ 
i=2;\\ 
;ad1:i=66;\\ 
{\color{ForestGreen}**After ad1}\\ 
\textcolor{Red}{;goto}(ad2,ad3,2)\,\,{\color{ForestGreen}!select label from a label list}\\ 
;ad2:\\ 
{\color{ForestGreen}** After ad2}\\ 
i=3;\\ 
;ad3:\\ 
{\color{ForestGreen}** After ad3}\\ 
i=4;\\ 
;ad4:\\ 
{\color{ForestGreen}** After ad4}\\ 
i=5;\\ 
;ad5:\\ 
{\color{ForestGreen}** After ad5}\\ 
i=6;\\ 
//  \\ 
file;\\ 
\textcolor{Red}{;if}(\textcolor{VioletRed}{exist\_f}('file.txt'))\textcolor{VioletRed}{delete\_f}('file.txt')\\ 
\textcolor{VioletRed}{write}('file.txt',\$,file)\\ 
\textcolor{VioletRed}{close}('file.txt')\\ 
\textcolor{Red}{;incl}(file.txt)\\ 
\textcolor{Red}{;incl}(file.txt,\textcolor{blue}{from->}ad2)\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\begin{note} 
The adress line can contain comment starting with '!'. 
\end{note} 
\subsection{\textcolor{Red}{;goto}()}\index{;goto} 
\label{inpugoto} 
Go to different adress in \textcolor{Red}{;incl}() file. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{CHAR} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The label from which the reading continues. With \textcolor{Red}{;goto}(adr1) 
the adress line starts ;adr1: 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\singlespacing 
\begin{example}[inpugotoex]Example of \textcolor{Red}{;goto}() and \textcolor{Red}{;incl}()\\ 
\label{inpugotoex} 
\noindent gototxt=\textcolor{VioletRed}{text}()\\ 
{\color{ForestGreen}!! Start jumping}\\ 
\textcolor{Red}{;goto}(ad2)\\ 
;ad1:\\ 
{\color{ForestGreen}!!Greetings from ad1}\\ 
\textcolor{Red}{;return}\\ 
;ad2:\\ 
{\color{ForestGreen}!!Greetings from ad2}\\ 
\textcolor{Red}{;goto}(ad1)\\ 
//                         \\ 
\textcolor{VioletRed}{print}(gototxt)\\ 
\textcolor{VioletRed}{if}(\textcolor{VioletRed}{exist\_f}('goto.txt'))\textcolor{VioletRed}{delete\_f}('goto.txt')\\ 
\textcolor{VioletRed}{write}('goto.txt',gototxt)\\ 
\textcolor{VioletRed}{close}('goto.txt')\\ 
\textcolor{VioletRed}{print}('goto.txt')\\ 
\textcolor{Red}{;incl}(goto.txt)\\ 
\textcolor{Red}{;incl}(goto.txt,\textcolor{blue}{from->}ad1)\\ 
\textcolor{VioletRed}{delete\_f}('goto.txt')\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\begin{note} 
In the previous versions the adress had to be withing apostrophes ' ', but now tis is not necessatry 
even if it is possible. 
\end{note} 
\subsection{\textcolor{Red}{;do}() input records in a loop.}\index{;do} 
\label{inpudo} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 3|4 \tabto{5cm}  Var,Num.. \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent Arguments are: iteration index, starting limit, 
final limit and step. First argument must be a variable name and others 
can be \textcolor{teal}{REAL} variables or numeric constants. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\singlespacing 
\begin{example}[inpudoex]Examples of \textcolor{Red}{;do}()\\ 
\label{inpudoex} 
\noindent \textcolor{Red}{;do}(i,1,2)\\ 
\textcolor{teal}{x}"i"="i"*10\\ 
\textcolor{VioletRed}{print}('Greetings\,from\,iteration\,"i"')\\ 
\textcolor{Red}{;enddo}\\ 
\textcolor{VioletRed}{print}(\textcolor{teal}{x1},\textcolor{teal}{x2})\\ 
varlist=\textcolor{VioletRed}{list}(x0,y0,\\ 
\textcolor{Red}{;do}(i,1,3)\\ 
\textcolor{teal}{x}"i",\textcolor{teal}{y}"i",\\ 
\textcolor{Red}{;enddo}\\ 
x4,y4);\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
 
\color{Green} 
\begin{verbatim} 
<print('Greetings from iteration 1') 
'Greetings from iteration 1' 
<print('Greetings from iteration 2') 
'Greetings from iteration 2' 
sit< print(x1,x2) 
<print(x1,x2) 
x1=   10.000000000000000 
x2=   20.000000000000000 
\end{verbatim} 
\color{Black} 
\subsection{\textcolor{Red}{;if}()...}\index{;if} 
\label{inpuif} 
If the condition within the parenthesis if TRUE (i.e. has a nonzero value)the following text if the next input line 
generated. 
\begin{note} 
In the previous \textbf{J} version it was possible to write these one line ifs outsoed a \textcolor{teal}{TRANS} object 
the semicolon, i.e. in form  \textcolor{VioletRed}{if}().... Now this is not allowed, even if it would be simple to implement 
in order to  make a clear distinction between input programming and transformations 
\end{note} 
\subsection{\textcolor{Red}{;if}();then}\index{;if} 
\label{inpuifthen} 
If the conditon within the parenthesis is tRUE (i.e. ahas a nonzero value, the text up to 
;elsif());then or ;else  becosme part of the input. Thus the whole thing can look like 
\textcolor{Red}{;if}(...);then\\ 
...\\ 
\textcolor{Red}{;elseif}(...);then\\ 
...\\ 
\textcolor{Red}{;elseif}(...);then\\ 
...\\ 
;else\\ 
...\\ 
;endif\\ 
\subsection{\textcolor{Red}{;sum}() sums into input}\index{;sum} 
\label{inpusum} 
\textbf{Jlp22} an generate text of form part1+part2+...partn into input line using 
input programming function ;isum(). The syntax of the function is as follows:\\ 
\textcolor{Red}{;sum}(i,low,up,step)(text)\\ 
or \\ 
\textcolor{Red}{;sum}(i,low,up)\\ 
Arguments low, up and step must be integers (actually from nonintger values, the 
integer part is used) or \textcolor{teal}{REAL} variables. Thus te valuse cannot be obtained 
from arithmetic operations. Sum is useful at least in \textcolor{VioletRed}{problem}() function. 
\singlespacing 
\begin{example}[inpusumex]Example of \textcolor{Red}{;sum}()\\ 
\label{inpusumex} 
\noindent prob=\textcolor{VioletRed}{problem}()\\ 
\textcolor{Red}{;sum}(i,1,5)(a"i"*\textcolor{teal}{x}"i")==max\\ 
\textcolor{Red}{;sum}(i,1,3)(a"i"*\textcolor{teal}{x}"i")<8\\ 
/                                                          \\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\begin{note} 
\textcolor{Red}{;dif}() works similarly for minus 
\end{note} 
\subsection{\textcolor{Red}{;dif}() differences into input}\index{;dif} 
\label{inpudif} 
\textbf{Jlp22} can generate text of form part1-part2-...partn into input line using 
input programming function \textcolor{Red}{;dif}(). The syntax of the function is as follows:\\ 
\textcolor{Red}{;dif}(i,low,up,step)(text)\\ 
or \\ 
\textcolor{Red}{;dif}(i,low,up)\\ 
Arguments low, up and step must be integers (actually from nonintger values, the 
integer part is used) or \textcolor{teal}{REAL} variables. Thus te valuse cannot be obtained 
from arithmetic operations. \textcolor{Red}{;dif}() is useful at least in \textcolor{VioletRed}{problem}() function. 
 
\begin{note} 
\textcolor{Red}{;sum}()() works similarly for plus. See \textcolor{Red}{;sum}() for examples. 
\end{note} 
\subsection{\textcolor{Red}{;pause} in script processing}\index{;pause} 
\label{inpupause} 
Including input from an include file can be interrupted using an input programming 
command \textcolor{Red}{;pause} promt or the \textbf{Jlp22} function \textcolor{VioletRed}{pause}('<prompt>'). In both cases 
the user can give \textbf{Jlp22} commands, e.g., print objects, change the value of Printdebug etc. 
The difference is that  \textcolor{VioletRed}{pause}('<prompt>') goes first through the interpreted and the interptreted 
code is transmitted to the \textbf{Jlp22} function driver. In the \textcolor{Red}{;pause}- pause it is possible to 
use input programming commands while in \textcolor{VioletRed}{pause}()- pause it is not possible. In both cases, when 
an error occurs, the control remains at the pause prompt. If the user is pressing 
<return> \textbf{Jlp22} continues in the include file. If \textcolor{VioletRed}{pause}() is part of a transformation object, 
pressing <return>, the function driver continues in the transformation object. 
If the user gives command 'e' or 'end', then \textbf{Jlp22} procees similarly as if an error had occured, 
i.e. print error messages and returns control to \textcolor{Red}{sit>} -promt. 
\subsection{\textcolor{Red}{;return} from \textcolor{Red}{;incl}}\index{;return;incl} 
\label{inpureturn} 
\textcolor{Red}{;return} in an input file means that the control returns to the point where a 
jumpt to an label was found. Two different cases need to be separated: 
\begin{itemize} 
\item The conrol came to the starting label or to the beginning of the include file 
from outside the current include file using a \textcolor{Red}{;incl} command. Then \textcolor{Red}{;return} returns the control to upper level include 
file or to the \textcolor{Red}{sit>} prompt. 
\item The control came to the starting label from within the same include file using 
an explicit \textcolor{Red}{;incl} or \textcolor{Red}{;incl} is generated 
with command shortcut. 
\end{itemize} 
\subsection{\textcolor{Red}{;where} the current line in \textcolor{Red}{;incl} -files}\index{;where;incl} 
\label{inpuwhere} 
\subsection{Objects with common part of name} 
\label{inpusubobj} 
There are two ways to acces objects having common part in name. These methods are especially useful 
when seeing sub objects or side object produced with funtion whose names start with output\%. 
\subsubsection{Printing names of subobjects} 
\label{inpusub1} 
The names of subobjects generated with a function can be seen according 
to the following example. 
\singlespacing 
\begin{example}[subobjex]Seeing subobjects\\ 
\label{subobjex} 
\noindent \textcolor{teal}{dataa}=\textcolor{VioletRed}{data}(\textcolor{blue}{in->},\textcolor{blue}{read->}(\textcolor{teal}{x},\textcolor{teal}{y}))\\ 
1,2\\ 
3,4\\ 
/  \\ 
\textcolor{teal}{dataa}\%?;\,{\color{ForestGreen}!prints subobjects}\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsubsection{;list(part\%?) \textcolor{teal}{LIST} of objects having common part in name} 
\label{inpusub2} 
;list() Makes a list of objects. The example shows how the list can be printed and how 
to print all objects in the list. 
 
\singlespacing 
\begin{example}[subobjex2]ex2\\ 
\label{subobjex2} 
\noindent \textcolor{teal}{dataa}=\textcolor{VioletRed}{data}(\textcolor{blue}{in->},\textcolor{blue}{read->}(\textcolor{teal}{x},\textcolor{teal}{y}))\\ 
1,2\\ 
3,4\\ 
/  \\ 
\textcolor{teal}{lista}=;list(\textcolor{teal}{dataa}\%?);\\ 
{\color{ForestGreen}**Then all objects in the list are printed.}\\ 
@lista;\\ 
{\color{ForestGreen}**Seeing and printing relatives}\\ 
x1a...x3a=3...5\\ 
x?a;\\ 
rel=;list(x?a);\\ 
@rel;\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{@List(index) Gets a name from a \textcolor{teal}{LIST}} 
\label{inpulistelem} 
The name of an object in a \textcolor{teal}{LIST} can be obtained into the input using the following example. 
\singlespacing 
\begin{example}[inpulistelem]Getting name from list\\ 
\label{inpulistelem} 
\noindent lis=\textcolor{VioletRed}{list}(c2...c5);\\ 
@lis=2...5;\\ 
@lis(2)=6;\\ 
@lis(4)=@lis(1);\\ 
@lis(2)\%@lis(4)=66;\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{@List expands a \textcolor{teal}{LIST}} 
\label{expand} 
If a \textcolor{teal}{LIST} is generated explicitly with \textcolor{VioletRed}{list}() function or as a byproduct of an other function, 
then all elements of the list can put into the code using @-sign in the front of the name of the list. 
The code then works similarly as if all the object names had been written consecutively and separated 
with commas. 
\begin{note} 
A function or an option can have several parts in the arguments generated with @ 
\end{note} 
\begin{note} 
In the earlier versions of the software,expanding lists with @ was implemented during the generation of 
the input line similarly as in the input programming proper. This was stupid. It is more simple and more efficient to 
to implement the expanding of lists during the code parsing stage. This is presented here because, @-sign works 
as if it were part of input programming. 
\end{note} 
\singlespacing 
\begin{example}[expandex]Example of expanding lists with @\\ 
\label{expandex} 
\noindent list0=\textcolor{VioletRed}{list}(site,altitude)\\ 
list1=\textcolor{VioletRed}{list}(\\ 
\textcolor{Red}{;do}(i,1,3)\\ 
vol"i",ba"i",\\ 
\textcolor{Red}{;enddo}\\ 
vol4,ba4);\\ 
dat=\textcolor{VioletRed}{data}(\textcolor{blue}{in->},\textcolor{blue}{read->}(@list0,@list1))\\ 
1,2,3,4,5,6,7,8,9,10\\ 
2,3,4,5,6,7,8,9,10,11\\ 
/                    \\ 
\textcolor{VioletRed}{stat}()\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
 
\subsection{...  sequences} 
\label{dots} 
It is often natural to index object names, and often we need to refer object 
names having consecutive index numbers or index letters. In \textbf{Jlp22} versions before version 3.0 it 
was possible to generate object lists using ... -construct which replaced part of 
the input line with the names of objects being between the object 
name before ... and after ... . Now the dots construct is no more done as 
part of the input programming but in the interpret subroutine which interprets the 
input line and generates the integer vector for function and argument indices. 
But as dots work as if it would be part of the input programming, it is presented in this 
section. Currently also sequences of integer constants can be generated with dots and 
sequences can be from larger to smaller. 
\singlespacing 
\begin{example}[dotsex]Example of dots construct\\ 
\label{dotsex} 
\noindent dat=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(x4...x7),\textcolor{blue}{in->})\\ 
1,2,3,4\\ 
11,12,13,14\\ 
/          \\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{min->},\textcolor{blue}{max->},\textcolor{blue}{mean->})\\ 
\textcolor{teal}{x3}\%mean...x7\%mean;\\ 
A...D=4...1;\\ 
\textcolor{teal}{Continue}=1\,\,{\color{ForestGreen}!demo of error in data()}\\ 
dat=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{x3}...x7),\textcolor{blue}{in->})\\ 
1,2,3,4\\ 
11,12,13,14\\ 
/          \\ 
\textcolor{teal}{Continue}=0\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\section{\textbf{Jlp22} objects} 
\label{objintro} 
\textbf{Jlp22} objects have a simple yet efficient structure. Each object is associatd with two integer vectors, one single precision vector, one double precision vector, 
one vector of characters and one vector of text lines. All vectors are allocated dynamically. 
There are several object types which store data differently in these vectors. 
Object can be either simple or compound objects. Compound objects are linked to other 
objects which can be used also directly utilizing the standard naming conventions. All objects are 
global, i.e. also users can acces all objects. Some predefined objects are locked so that 
users cannot change them. 
 
There are three types of objects 
\begin{itemize} 
\item Named objects. The number of named objects is specified at the initilaization, 
and it cannot be changed later. Deleting an object means deallocating all the allocated 
vectors associated with the objects. 
\item Temporary objects used to store intermediate results. 
\item Temporary objects used to store the partial derivatives when computing the derivatives using 
the derivations rules. 
\end{itemize} 
 
Alongside the objects there is a vector of double precision values, call j\_v-vector. When an object is called a \textcolor{teal}{REAL} 
object or variable, this vector is referenced. After the parts corresponding to named objects and 
those two sets of temporary objects, there is an area used to store numeric constants. If a \textcolor{teal}{REAL} 
variable a has object number of 100 and constan 7 is in the  position 7000 in the v-vector, 
then a+7 can be presented as j\_v(100)+j\_v(7000). Thus after parsing, all arithmetic computations can be done wihtou reference to whether 
a variable is in the named part or constant part of the j\_v-vector. 
Because the numeric contants are at the end section of the j\_v-vector, 
new space can be added for the numeric 
constants without mixing up parsed transformations. 
\subsection{Object names} 
\label{onames} 
Object names start with letter or with {\$\#}. Object names can contain any of 
symbols {\#\%¬ß/\_} \textbf{Jlp22} is using '\%' to name objects related to some other objects. 
E.g. function \textcolor{VioletRed}{stat}(\textcolor{teal}{x1},\textcolor{teal}{x2},\textcolor{blue}{mean->}) will store means of variables \textcolor{teal}{x1} and \textcolor{teal}{x2} into 
variables \textcolor{teal}{x1}\%mean and \textcolor{teal}{x2}\%mean. Objects with name starting with '\$' are not 
stored in the automatically created lists of input and output variables when 
defining transformation objects. The variable \textcolor{teal}{Result} which 
is the output variable, if no output is given, is not put into these lists. 
Object names can contain special characters (e.g. +-*=()) if these are closed 
within ‚Äò[‚Äò and ‚Äò]‚Äô, e.g. a[2+3]. This possibility to include additional information 
is borrowed from Markku Siitonen, the developer of Mela software. 
If an transformation object is created with \textcolor{VioletRed}{trans}() function, and the 
intended global arguments are given in the list of arguments, 
then a  local object {ob} created e.g. with transformation object {tr} have prefix 
{tr/\} yelding {tr/\ob}. Actually also these objects are global, but their prefix 
protects them so that they do not intervene with objects having the same name in the 
calling transformation object. 
There are many objects intialized automatically. 
Some of these are locked so that the users cannot change them. In transformation objects 
there can be objects which are intended to be used only locally. These are protected 
by putting an unvisible prefix to the object names, but these can be anyhow accessed 
by writing the prefix. 
\textcolor{teal}{Names} of objects having a predefined interpretation start with capital letter. 
The user can freely use lower or upper case letters. \textbf{Jlp22} is case sensitive. 
All objects known at a given point of a \textbf{Jlp22} session can be listed by command: 
\textcolor{VioletRed}{print}(\textcolor{teal}{Names}) 
\subsection{Object types} 
\label{otypes} 
The following description describes shortly different object types available in 
\textbf{J}. More detailed descriptions are given in connection of \textbf{Jlp22} functions which 
create the objects and in Developers' guide. 
\subsubsection{Real variables and constants} 
\label{realo} 
A \textcolor{teal}{REAL} variable is a named object associated with a single 
double precision value. Before version J3.0 the values were in single 
precision, and thus this objecttype is still called \textcolor{teal}{REAL}. 
The 
value can be directly defined at the command level, or the variable can get 
the value from data structures.  E.g. 
\textcolor{VioletRed}{stat}(D,H,\textcolor{blue}{min->},\textcolor{blue}{max->}) ! Here arguments must be variable names 
a = \textcolor{VioletRed}{sin}(2.4) ! argument is in radians \textcolor{VioletRed}{sind}() is for degrees 
h = \textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{x1}...x4))   ! \textcolor{teal}{x1}, \textcolor{teal}{x2} ,\textcolor{teal}{x3}, x4 are variables in the data set, and 
get their values when doing operations for the data. 
 
 
\begin{note} 
All objects have also an associated \textcolor{teal}{REAL} value. In order to make 
arithmetic operations fast, the argument types in simple arithmetic functions 
are not checked. If a general object is used as an argument in an arithmetic 
operation, then the \textcolor{teal}{REAL} value associated with the object is used. This will 
usually prevent the program to stop due to Fortran errors, but will produce 
unintended results. 
\end{note} 
 
\begin{note} 
In this manual 'variable' refers to a \textbf{Jlp22} object whose type is \textcolor{teal}{REAL}. 
\end{note} 
\subsubsection{Character constants and variables} 
\label{charo} 
Character constants are generated by closing text within apostrophe signs ( ' 
). Apostrophe character ( ' ) within a character constant is indicated with ($\sim$) 
(if the character $\sim$ is not present in the keyboard, it can be produced by <Alt 
>126, where numbers are entered from the numeric keyboard) Character constants are used e.g.  in I/O functions for file names, formats 
and to define text to be written.  , e.g 
a = \textcolor{VioletRed}{data}(\textcolor{blue}{in->}'file1.dat', \textcolor{blue}{read->}(\textcolor{teal}{x1},\textcolor{teal}{x2})) & 
 
\textcolor{VioletRed}{write}('output.txt', '($\sim$kukkuu=$\sim$,4f7.0)', \textcolor{VioletRed}{sqrt}(a)) & 
Character variables are pointers to character constants. An example of a 
character variable definition: 
 
 
cvar='file1.dat' & 
After defining a character variable, it can be used exactly as the character 
constants. 
\begin{note} 
The quotation mark (") has special meaning in the input programming. See 
Input programming how to use character constants within character constants. 
\end{note} 
\subsubsection{Logical values} 
\label{logical0} 
There is no special object type for logical variables. Results of logical 
operations are stored into temporary or named real variables so that 0 means 
False and 1 means True. In logical tests all non-zero values will mean True. 
Thus e.g. \textcolor{VioletRed}{if}(6)\textcolor{teal}{b}=7 is legal statement, and variable \textcolor{teal}{b} will get value 7. E.g. 
\textcolor{Red}{sit>}h=a.lt.\textcolor{teal}{b}.and.\textcolor{teal}{b}.le.8 & 
\textcolor{Red}{sit>}\textcolor{VioletRed}{print}(h) & 
h=   1.00000 & 
\subsection{Predefined objects} 
\label{pref} 
The following objects are generated during the initilaization. 
 
\noindent \textcolor{teal}{Names} \tabto{25mm }   Text \tabto{45mm }   Text object containg the names of named objects 
 
 
 
 
\noindent \textcolor{teal}{Pi} \tabto{25mm }  \textcolor{teal}{REAL} \tabto{45mm }  The value of \textcolor{teal}{Pi} (=3.1415926535897931) 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
\noindent \$Cursor\$ \tabto{25mm }   \textcolor{teal}{TRANS}  \tabto{45mm }   The transformation object used to run \textcolor{Red}{sit>} prompt 
 
 
\noindent \$Cursor2\$ \tabto{25mm }   \textcolor{teal}{TRANS}  \tabto{45mm }   Another transformation object used to run \\ 
\tabto{45mm } \textcolor{Red}{sit>} prompt 
 
\noindent Val \tabto{25mm }  \textcolor{teal}{TRANS} \tabto{45mm }   Transformation object used to extract values of mathematical statements, used, 
 
 
\noindent \textcolor{teal}{Round}  \tabto{25mm }  \textcolor{teal}{REAL} \tabto{45mm }   \textcolor{VioletRed}{jlp}(): The current round through treatment units in \textcolor{VioletRed}{jlp}() function. 
 
 
\noindent Change \tabto{25mm }  \textcolor{teal}{REAL} \tabto{45mm }   \textcolor{VioletRed}{jlp}(): The change of objective in \textcolor{VioletRed}{jlp}()  in one round before finding feasible and thereafter 
 
 
\noindent \textcolor{teal}{Imp} \tabto{25mm }  \textcolor{teal}{REAL} \tabto{45mm }   \textcolor{VioletRed}{jlp}(): The number of improvements obtained from schedules outside the current active 
 
 
\noindent \$\textcolor{teal}{Data}\$  \tabto{25mm }   List \tabto{45mm }   Default data set name for a new data set created by \textcolor{VioletRed}{data}()-function. 
 
 
 
 
 
\noindent \textcolor{teal}{Obs} \tabto{25mm }   \textcolor{teal}{REAL}  \tabto{45mm }   The default name of variable obtaining the the number of 
 
\noindent \textcolor{teal}{Maxnamed}  \tabto{25mm }  \textcolor{teal}{REAL} \tabto{45mm }   The maximum number of named objects. Determined via j.par in 
 
 
\noindent \textcolor{teal}{Record} \tabto{25mm }   \textcolor{teal}{REAL}  \tabto{45mm }   The name of variable obtaining the the number of 
 
 
\noindent Subecord \tabto{25mm }   \textcolor{teal}{REAL}  \tabto{45mm }   The name of variable obtaining the the number of 
 
 
\noindent \textcolor{teal}{Duplicate} \tabto{25mm }   \textcolor{teal}{REAL} \tabto{45mm }   A special variable used in \textcolor{VioletRed}{data}() function when duplicating observations 
 
 
\noindent LastaData  \tabto{25mm }  List \tabto{45mm }  	A list object referring to the last data set made, used as default data set. 
 
 
\noindent \$Buffer \tabto{25mm }  Char \tabto{45mm }   A special character object used by the \textcolor{VioletRed}{write}() function. 
 
 
\noindent \$Input\$ \tabto{25mm }   Text  \tabto{45mm }   Text object used for original input line. 
 
\noindent 1\$Input1\$  \tabto{25mm }  Text \tabto{45mm }   Text object for input line after removing blanks and comments. 
 
 
\noindent \textcolor{teal}{Data}  \tabto{25mm }  List \tabto{45mm }    List object used to indicate current data setsDat 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
\noindent \$ \tabto{25mm }  \textcolor{teal}{REAL} \tabto{45mm }   Object name used to indicate console and '*' format in reading and writing 
 
 
\noindent \textcolor{teal}{x}\# \tabto{25mm }  \textcolor{teal}{REAL} \tabto{45mm }   Variable used when drawing functions. 
 
\noindent \textcolor{teal}{Selected} \tabto{25mm }   \textcolor{teal}{REAL}  \tabto{45mm }  Variable used to indicate the simulator selected in simulations 
 
\noindent \textcolor{teal}{Printinput} \tabto{25mm }   \textcolor{teal}{REAL} \tabto{45mm }   Variable used to specify how input lines are printed. Not properly used. 
 
\noindent Prinoutpu \tabto{25mm }   \textcolor{teal}{REAL} \tabto{45mm }   Variable used to indicate how much output is printed. Not properly used. 
 
 
 
 
 
 
\noindent \$\textcolor{teal}{Debug} \tabto{25mm }  \textcolor{teal}{REAL} \tabto{45mm }   Variable used to put debugging mode on. 
 
 
 
 
 
 
 
 
\noindent \textcolor{teal}{Accepted}  \tabto{25mm }  \textcolor{teal}{REAL} \tabto{45mm }   The number of accepted observations in functions using data sets. 
 
 
\noindent \textcolor{teal}{Arg} \tabto{25mm }   \textcolor{teal}{REAL}  \tabto{45mm }   The default argument name when using transformation object as a function. 
 
 
 
\noindent \textcolor{teal}{Continue}  \tabto{25mm }  \textcolor{teal}{REAL} \tabto{45mm }   If \textcolor{teal}{Continue} has nonzero value then the control does not return to the 
 
 
 
\noindent \textcolor{teal}{Err} \tabto{25mm }  \textcolor{teal}{REAL} \tabto{45mm }   If \textcolor{teal}{Continue} prevents the control from returning to \textcolor{Red}{sit>} prompt 
 
 
 
 
 
 
 
\noindent \textcolor{teal}{Result} \tabto{25mm }   ?  \tabto{45mm }   The default name of output object. 
 
\section{\textbf{Jlp22} functions} 
\label{jfuncs0} 
The structure of \textbf{Jlp22} functions is easiest to explain using an example. 
For instance a data object can be created with \\ 
data2=\textcolor{VioletRed}{newdata}(matrx,matrz,\textcolor{blue}{read->}(\textcolor{teal}{x1}...\textcolor{teal}{x3},z1...z4),\textcolor{blue}{maketrans->}mt) \\ 
Here \textcolor{teal}{data2} is the output, \textcolor{teal}{matrx} and \textcolor{teal}{matrz} are matrices having equal number of rows. Matrix 
\textcolor{teal}{matrx} has 3 columns, \textcolor{teal}{matrz} 4. \textcolor{blue}{read->} is an option which tells 
what are the variable names in the data. \textcolor{teal}{x1}...\textcolor{teal}{x3} is equivalent to \textcolor{teal}{x1},\textcolor{teal}{x2},\textcolor{teal}{x3}.  Option 
\textcolor{blue}{maketrans->}mt tells that for each observation the trasformations defined in the trasformation 
object \textcolor{teal}{mt} are computed from variables \textcolor{teal}{x1}...\textcolor{teal}{x3} and z1...z4. The output variables 
whose names do not start with \$ are included in the \textcolor{teal}{DATA} object. 
 
 
A function call obtained from the  input programming can have the 
following components separed with commas. 
\subsection{Output of a function} 
\label{output} 
 
There are the following cases with respect to 
the output of the function 
 
\begin{itemize} 
 
\item The function appears in a code line looking like\\ 
Output=func()\\ 
Then the function produces an object \textcolor{teal}{Output}. The type of the \textcolor{teal}{Output} depends on the function. 
Several functions produce additional objects whose name start with ]Output\%[. The 
object \textcolor{teal}{Output} may or may not store links to these object. If such links are 
stored then the output is a compound object. An objects to which there is a link, is called a subobject. 
Objects without such links are called side objects. For instance linear programming function \textcolor{VioletRed}{jlp}() 
does not produce any object with name \textcolor{teal}{Output} just several side objects. 
 
\item The expression \\ 
func()\\ 
is equivalent to\\ 
\textcolor{teal}{Result}=func() 
\item If code line is Output=func(); or func(); the Output or \textcolor{teal}{Result} are printed if 
variable Printvalue has value 1 or 3.  If code line is Output=func();; or func();; 
if variable Printvalue has value 2 or 3. 
 
\item Output is a temporal object. If a function is part of arithmetic computations, then 
the intermediate results are stored into temporary objects according to the parse tree. Thus in the 
expression \textcolor{teal}{y}=\textcolor{VioletRed}{sin}(\textcolor{teal}{x})+\textcolor{VioletRed}{cos}(\textcolor{teal}{x}), \textcolor{VioletRed}{sin}(\textcolor{teal}{x}) produses first a temporary object and \textcolor{VioletRed}{cos}(\textcolor{teal}{x}) 
another temporary object. 
\item Output is a submatrix of a \textcolor{teal}{MATRIX} object. If A is a 4x4 matrix, and 
\textcolor{teal}{B} is a3x3 \textcolor{teal}{MATRIX},then expression\\ 
A(2,-4,1,-3)=\textcolor{teal}{B}\\ 
puts \textcolor{teal}{MATRIX} \textcolor{teal}{B} into A. 
\end{itemize} 
\subsection{Function names} 
\label{functionname} 
 
Function name can be be any of the four cases. 
\begin{itemize} 
 
\item A standard \textbf{Jlp22} function, 
\item An arithmetic or logical function obtained when translating the code into the polish notation.nslated first into 
Thus \\ 
\textcolor{VioletRed}{if}(region.eq.savo)c=2*3+4;\\ 
is translated into \\ 
\textcolor{VioletRed}{if}(\textcolor{VioletRed}{EQ}(region,savo))c=\textcolor{VioletRed}{PLUS}(\textcolor{VioletRed}{MULT}(2,3),4);\\ 
The user can try directly the above translated form 
\item An own-function of the user included in the function space. 
 
\item Implicit function generated with the parser. For instance, options are implemented using 
\textcolor{VioletRed}{setoption}() function. 
\item \textbf{Jlp22} object which can be used as if it were a function. Currently there 
are four such cases 
\end{itemize} 
\subsubsection{\textcolor{teal}{MATRIX} as a function} 
\label{matrixfunc} 
If \textcolor{teal}{matrixa} is a \textcolor{teal}{MATRIX} then expression \textcolor{teal}{matrixa}() can be both in the input side or output side to indicate 
a submatrix or element of the matrix. See matrix chapter. 
\subsubsection{\textcolor{teal}{REAL} as a \textcolor{teal}{MATRIX}} 
\label{realmatrix} 
Often in matrix computations, a \textcolor{teal}{REAL} is a limiting value of a sequence of matrices. 
To facilitate such computations, \textcolor{teal}{matrixa}(1) and \textcolor{teal}{matrixa}(1,1) are legal ways to refer to \textcolor{teal}{matrixa} even if it is \textcolor{teal}{REAL}. 
If \textcolor{teal}{matrixa} is \textcolor{teal}{REAL}, then expression \textcolor{teal}{matrixa}(3) is causing error:\\ 
\textcolor{teal}{matrixa} is \textcolor{teal}{REAL}, ranges            3  are illegal, only (1) or (1,1) are allowed 
\subsubsection{\textcolor{teal}{DATA} as a function} 
\label{datafunc} 
If \textcolor{teal}{Data} is  \textcolor{teal}{DATA} then \textcolor{teal}{Data}(var1,..,varn) indicates a matrix obtained by picking 
the columns of the data matrix corresponding the argument variables. 
\subsubsection{Using a transformation object as a function} 
\label{transfunc} 
It is now possible to use a transformation object as a function which computes new 
objects when generating arguments for functions or options, 
or values of code options, or in any place within a transformation object. 
If {tr} is a transformation and the transformation computes an object {A} then 
{tr(A)} is first calling transformation {tr} and provides then object {A} into this place. 
As the transformation computes also other objects which are computed within it, also thes objects 
are available. At this point it is important to note that arguments of 
a transformation line are computed from right to left, because options must be computed before 
entering into a function. 
\singlespacing 
\begin{example}[transfunc]Transformation as a function\\ 
\label{transfunc} 
\noindent \textcolor{VioletRed}{delete\_o}(a,c)\\ 
\textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
a=8;\\ 
c=2;\\ 
/   \\ 
\textcolor{teal}{transb}=\textcolor{VioletRed}{trans}()\\ 
a=5;\\ 
c=1;\\ 
/   \\ 
c=2\\ 
a=c+\textcolor{teal}{transb}(a)+c+\textcolor{teal}{transa}(a);\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsubsection{\textcolor{teal}{REGR} as a function} 
\label{regrfunc} 
If Regr is a regression object produced with regr, then Regr() produces 
the value of the regression function as explained for \textcolor{VioletRed}{regr}(). The values of arguments 
can be given in the calling code or the existing values can be used. 
\subsubsection{Cannot produce -error} 
\label{isnotfunc} 
If the code looks like a function, the control goes to j\_getelem function 
which computes the results for the above mentioned object types. But if 
the object cannot produce anything, there will be an error message:\\ 
produce   but it is not a function or object which can provide something then 
there will be an error message:\\ 
* (object name) cannot produce anything 
\subsubsection{is \textcolor{teal}{REAL} ranges .. illegal  -error} 
\label{isreal} 
If the object is \textcolor{teal}{REAL} then the error message can be \\ 
\textcolor{teal}{matrixa} is \textcolor{teal}{REAL}, ranges            5  are illegal, only (1) or (1,1) are allowed\\ 
A \textcolor{teal}{REAL} can be treated as a 1x1 \textcolor{teal}{MATRIX}, so for \textcolor{teal}{REAL} \textcolor{teal}{var} \textcolor{VioletRed}{var}(2,2) means illegal dimensions. 
\subsection{Arguments of a function} 
\label{arguments} 
Arguments separated with commas. Arguments can be a combination of the following types 
\begin{itemize} 
\item object name 
\item numeric constant 
\item A code which produces a temporary object generated with any \textbf{Jlp22} functions 
\item a sequence of object names generated with ... as \textcolor{teal}{x1}...\textcolor{teal}{x3} above. 
\item @List where \textcolor{teal}{List} is a \textcolor{teal}{LIST}. If \textcolor{teal}{List} is obtainedwit \textcolor{teal}{List}=\textcolor{VioletRed}{list}(\textcolor{teal}{x1}...\textcolor{teal}{x3}), then 
@List is equivalent to \textcolor{teal}{x1}...\textcolor{teal}{x3} which is equivalnet to \textcolor{teal}{x1},\textcolor{teal}{x2},\textcolor{teal}{x3}. 
\end{itemize} 
a = \textcolor{VioletRed}{sin}(\textcolor{VioletRed}{cos}(c)+\textcolor{teal}{b}) ! Usual arithmetic functions have numeric values as arguments. 
here the value of the argument of cos is obtained by 'computing' the 
value of real variable c. 
\textcolor{VioletRed}{stat}(D,H,\textcolor{blue}{min->},\textcolor{blue}{max->}) ! Here arguments must be variable names 
\textcolor{VioletRed}{plotyx}(H,D,\textcolor{blue}{xrange->}(\textcolor{VioletRed}{int}(D\%min,5), \textcolor{VioletRed}{ceiling}(D\%max,5))) !arguments of the function are variables, arguments of option \textcolor{blue}{xrange->} are numeric values 
c = \textcolor{VioletRed}{inverse}(h+\textcolor{VioletRed}{t}(g)) ! The argument can be intermediate result from matrix computations. 
If it is evident if a function or option should have object names or values as their arguments, it 
is not indicated with a special notation. If the difference is emphasized, then the values are 
indicated by val1,...,valn, and objects by obj1,...,objn, or the names of real variables are 
indicated by var1,...,varn. 
There are some special options which do not refer to object names or values. Some options 
define a small one-statement transformation to be used to compute something repeatedly. 
 
\subsection{Options of a function} 
\label{options} 
Options give additional arguments to the function. 
\subsubsection{Option structure} 
\label{optionstructure} 
An option starts with the option name 
followed with '->' after which there can be 
\begin{itemize} 
\item Nothing. In this case the option indicated that the option is put 'on'. E.g. 
\textcolor{blue}{continue->} in a graphics function indicates that no \textcolor{VioletRed}{pause}() is generated after plotting the figure. 
\item Numeric value, e.g. \textcolor{blue}{continue->}\textcolor{teal}{fcont} in a graphics function 
indicates that no \textcolor{VioletRed}{pause}() is generated if a \textcolor{teal}{REAL} object \textcolor{teal}{fcont} has a nonzero value. 
 
\item Object name. 
\item Function name followed by the arguments within parenthesis, e.g., 
\textcolor{blue}{xrange->}(0,\textcolor{VioletRed}{ask}('xmax')) where \textcolor{VioletRed}{ask}() is the function which asks a numeric value from the user. 
\item Arguments of the option expressed in the same way as the arguments of the function, i.e., 
using acode which is producing a temporary object. 
\end{itemize} 
\subsubsection{Codeoptions} 
\label{codeoption} 
Options are grouped into two groups: code options and regular options. 
Code options 
define a small one-statement transformation to be used to compute something repeatedly. 
As these one-statement can use transformation objects as functions, the code option can actually 
execute long computations. For instance \\ 
\textcolor{VioletRed}{stat}(D,H,\textcolor{blue}{filter->}(region.eq.savo)) \\ 
only those observations are accepted which pass the filter.\\ 
\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}(\textcolor{VioletRed}{sin}(\$\textcolor{teal}{x})+1),\textcolor{teal}{x}->\$\textcolor{teal}{x},\textcolor{blue}{xrange->}(0,10,1),\textcolor{blue}{continue->}fcont)\\ 
\textcolor{blue}{func->} option 
transmits the function to be drawn not a single value. 
\section{Arithmetic and logical functions and operations} 
\label{arith} 
\textbf{Jlp22} has all the standard arithmetic and logical operations and functions. 
The arithmetic and logical functions return single \textcolor{teal}{REAL} value or a \textcolor{teal}{MATRIX}. 
\subsection{Functions \textcolor{VioletRed}{sqrt}(), \textcolor{VioletRed}{sqrt2}(), \textcolor{VioletRed}{exp}(), \textcolor{VioletRed}{log}(), \textcolor{VioletRed}{log10}(), \textcolor{VioletRed}{abs}()}\index{sqrt()sqrt2()exp()log()log10()abs()} 
\label{arfu1} 
! 
\begin{itemize} 
\item \textcolor{VioletRed}{sqrt}(\textcolor{teal}{x}) square root, \textcolor{VioletRed}{sqrt}(0) is defined to be 0, negative argument produce error. 
If {x} is matrix, then an error occurs if any elemet is negative. 
\item \textcolor{VioletRed}{sqrt2}(\textcolor{teal}{x}) If {x} or an element of {x} is negative then \$\textcolor{VioletRed}{sqrt2}()=-\textcolor{VioletRed}{sqrt}()\$. Actually \textcolor{VioletRed}{sqrt2}() might be a 
useful sigmoidal function in modeling context. 
\item \textcolor{VioletRed}{exp}(\textcolor{teal}{x}) \$e\$ to power {x}. If {x}>88, then \textbf{Jlp22} produces error in order to avoid system 
crash. 
\item \textcolor{VioletRed}{log}(\textcolor{teal}{x}) natural logarithm 
\item \textcolor{VioletRed}{log10}(\textcolor{teal}{x}) base 10 logarithm 
\item \textcolor{VioletRed}{abs}(\textcolor{teal}{x}) absolute value 
\end{itemize} 
\subsection{Trig \textcolor{VioletRed}{sin}(),\textcolor{VioletRed}{sind}(),\textcolor{VioletRed}{cos}(),\textcolor{VioletRed}{cosd}(),\textcolor{VioletRed}{tan}(),\textcolor{VioletRed}{tand}(),\textcolor{VioletRed}{cotan}(),\textcolor{VioletRed}{cotand}()}\index{sin()sind()cos()cosd()tan()tand()cotan()cotand()} 
\label{trigfu} 
In \textcolor{VioletRed}{sin}(), etc,  argument is in radians, in \textcolor{VioletRed}{sind}(), etc in degrees 
\begin{itemize} 
\item \textcolor{VioletRed}{sin}() 
\item \textcolor{VioletRed}{sind}() 
\item \textcolor{VioletRed}{cos}() 
\item \textcolor{VioletRed}{cosd}() 
\item \textcolor{VioletRed}{tan}() 
\item \textcolor{VioletRed}{tand}() 
\item \textcolor{VioletRed}{cotan}() 
\item \textcolor{VioletRed}{cotand}() 
\end itemize 
\subsection{arc-trig \textcolor{VioletRed}{asin}() \textcolor{VioletRed}{asind}() \textcolor{VioletRed}{acos}() \textcolor{VioletRed}{acosd}() \textcolor{VioletRed}{atan}() \textcolor{VioletRed}{atand}() \textcolor{VioletRed}{acotan}() \textcolor{VioletRed}{acotand}()}\index{asin()asind()acos()acosd()atan()atand()acotan()aco} 
\label{atrigfu} 
Inverse trigonometric functions. In \textcolor{VioletRed}{asin}(), etc,  argument is in radians, in \textcolor{VioletRed}{asind}(), etc in degrees 
\begin{itemize} 
\item \textcolor{VioletRed}{asin}() 
\item \textcolor{VioletRed}{asind}() 
\item \textcolor{VioletRed}{acos}() 
\item \textcolor{VioletRed}{acosd}() 
\item \textcolor{VioletRed}{atan}() 
\item \textcolor{VioletRed}{atand}() 
\item \textcolor{VioletRed}{acotan}() 
\item \textcolor{VioletRed}{acotand}() 
\end itemize 
\subsection{Hyperbolic  \textcolor{VioletRed}{sinh}() \textcolor{VioletRed}{cosh}() \textcolor{VioletRed}{tanh}()}\index{sinh()cosh()tanh()} 
\label{hyper} 
\begin{itemize} 
\item \textcolor{VioletRed}{sinh}() 
\item \textcolor{VioletRed}{cosh}() 
\item \textcolor{VioletRed}{tanh}() 
\end{itemize} 
\subsection{Functions \textcolor{VioletRed}{mod}() \textcolor{VioletRed}{fraction}()}\index{mod()fraction()} 
\label{mod} 
\begin{itemize} 
\item \textcolor{VioletRed}{mod}() 
\item \textcolor{VioletRed}{fraction}() 
\end{itemize} 
\subsection{Conversion to integer} 
\label{conversion} 
 
\begin{itemize} 
\item \textcolor{VioletRed}{nint}(\textcolor{teal}{x}) nearest integer value 
\item \textcolor{VioletRed}{nint}(\textcolor{teal}{x},modulo) returns modulo*\textcolor{VioletRed}{nint}(\textcolor{teal}{x}/modulo) ,e.g.\textcolor{VioletRed}{nint}(48,5)=50; \textcolor{VioletRed}{nint}(47,5)=45; 
\item \textcolor{VioletRed}{int}(\textcolor{teal}{x}) integer value obtained by truncation 
\item \textcolor{VioletRed}{int}(\textcolor{teal}{x},modulo) returns modulo*\textcolor{VioletRed}{int}(\textcolor{teal}{x}/modulo), e.g. \textcolor{VioletRed}{int}(48,5)=45 
\item \textcolor{VioletRed}{ceiling}(\textcolor{teal}{x}) smallest integer greater than or equal to {x}. 
\item \textcolor{VioletRed}{ceiling}(\textcolor{teal}{x},modulo) returns modulo*\textcolor{VioletRed}{ceiling}(\textcolor{teal}{x}/modulo), e.g. \textcolor{VioletRed}{ceiling}(47,5)=50. 
\item \textcolor{VioletRed}{floor}(\textcolor{teal}{x}) greatest integer smaller than or equal to {x}. 
\item \textcolor{VioletRed}{floor}(\textcolor{teal}{x},modulo) returns modulo*\textcolor{VioletRed}{floor}(\textcolor{teal}{x}/modulo), e.g. \textcolor{VioletRed}{floor}(47,5)=45. 
\end{itemize} 
\subsection{\textcolor{VioletRed}{min}() and \textcolor{VioletRed}{max}()}\index{min()max()} 
\label{minmax} 
Functions \textcolor{VioletRed}{min}() and max () 
behave in a special way, \textcolor{VioletRed}{max}() behaves similarly as \textcolor{VioletRed}{min}() here: 
\begin{itemize} 
\item \textcolor{VioletRed}{min}(\textcolor{teal}{x1},\textcolor{teal}{x2}):: minimum of two \textcolor{teal}{REAL} 
\item \textcolor{VioletRed}{min}(\textcolor{teal}{MATRIX},\textcolor{teal}{REAL}):: each element is \textcolor{VioletRed}{min}(elem,\textcolor{teal}{REAL}) 
\item \textcolor{VioletRed}{min}(\textcolor{teal}{MATRIX}):: row vector having minimums of all columns 
\item \textcolor{VioletRed}{min}(\textcolor{teal}{MATRIX},\textcolor{blue}{any->}):: minimum over the whole amtrix 
\end{itemize} 
\subsection{\textcolor{VioletRed}{sign}(A,\textcolor{teal}{B})} 
\label{sign} 
\textcolor{VioletRed}{sign}(A,\textcolor{teal}{B}) returns the value of A with the sign of \textcolor{teal}{B}. 
\subsection{Numeric operations -, +, *, **, ***, /, *., /.} 
\label{numer} 
An arithmetic expression consisting of ordinary arith metic operations is formed in 
the standard way. The operations are in the order of their precedence. 
\begin{itemize} 
\item - unary minus 
\item *** integer power 
\item ** or \^ real power 
\item * multiplication 
\item / division 
\item + addition 
\item - subtraction 
\end{itemize} 
 
The reason for having a different integer power is that it is faster to compute and a negative 
value can have an integer power but not a real power. 
 
In matrix computations there are two additional operations. 
 
 
\begin{itemize} 
\item *. elementwise product (Hadamard product) 
\item /. elementwise division 
\end{itemize} 
 
 
The matrix operations are explained in section ?. Their operation rules extent 
the standard rules. 
\subsection{Logic and relation .eq. .ne. .gt. .ge. .lt. .le. .not. .and. .or. .eqv. .neqv.} 
\label{logic} 
There are following relational and logical operations. The first alternatives 
follow Fortan style: 
 
 
\begin{note} 
Testing equivalence can be done also using 'equal to' and 'not equal', as the same truth 
value is expressed with the same numeric value. 
\end{note} 
\begin{note} 
when the truth value of an expression is tested with \textcolor{VioletRed}{if}(), then all nonzero real values 
means that the expression is true. 
\end{note} 
 
 
\section{Operation of \textbf{Jlp22}} 
\label{joperation} 
In this section the main structure of the operation of \textbf{Jlp22} and tools 
in code development in a project are presented. 
The two operation modes are interactive operation and batch operation. 
\subsection{Looping between j\_getinput, j\_parser and dotrans} 
\label{basicloop} 
The are three key subroutines in \textbf{Jlp22} operation. 
\begin{itemize} 
\item j\_getinput gets a new command line from the console, an include file. j\_getinput can 
read several records to make one command line, and it can edit or duplicate the input 
with special \textbf{input programming} tools. Jlp prints \textcolor{Red}{sit>} prompt 
when reading form the console. Input programming lines are indicated with initila \%. 
\item If the obtained input line is not an input programming command or if it is not 
captured by some function which is utilizing j\_getinput, the line goes to j\_parser which 
generates an integer vector. 
\item The integer vector produced by the j\_parser is interpred ('executed' in this manual) 
with dotrans subroutine. 
\item \textcolor{VioletRed}{trans}() function packs several lines generated in j\_getinput - j \_parser loops 
into a tranformation (\textcolor{teal}{TRANS}) object, which can be called from different functions. 
\item dotrans subroutine executes a single line command which is not part of an \textcolor{teal}{TRANS} object. 
\textbf{Jlp22} writes '\#' in te front of the line. 
\end{itemize} 
\subsection{Printing of \textbf{Jlp22}} 
\label{printing} 
\textbf{Jlp22} prints information of the proceeding of the control. There are different ways to control 
the output. Finetuning is needed in the output. There are three logical 
stages in the flow of the control. The output indicates these as follows. 
\subsubsection{\% -lines are printed from input programming} 
\label{printinpu} 
The input programming lines are printed starting with \%. 
The amount of printing is controlled with \textcolor{teal}{Printinput} variable. 
the dafault is \textcolor{teal}{Printinput}=1. A problem in printing the input is how much should be 
printed when many input lines are produced with \textcolor{Red}{;do}() 
\subsubsection{\# -lines are printed in one-line commands.} 
\label{printcommand} 
The input lines which go directly to execution are printed starting with \#. 
\subsubsection{Comments starting with !!, !*,** or *! are printed} 
\label{printcom} 
The first non blank character in a command line is '!' or '*'. 
If there are two consecutive comment characters, the line is printed, dropping the first 
character. 
\begin{note} 
There can be comment lines between continuation lines. 
\end{note} 
\subsubsection{\textcolor{teal}{Printoutput} guides printing of functions.} 
\label{printoutput} 
The amount of printing in functions is guided with with variable [Printoutput[. 
The default is \\ 
[Printoutput[=2\\ 
Several functions have \textcolor{blue}{print->} option which overrules \textcolor{teal}{Printoutput} 
The number of printed lines when printing \textcolor{teal}{MATRIX},TEXT, or \textcolor{teal}{TXT} is controlled with 
variable \textcolor{teal}{Maxlines}, which is overruled with maxlines option in some functions. 
\subsection{Interactive operation} 
\label{interactive} 
In the interactive operation, \textbf{Jlp22} may first read commands from the 
default \textcolor{Red}{;incl} -file or from the file specified when starting the software,e.g. using\\ 
\textbf{Jlp22} myincl.inc \\ 
or with the release version 
\textbf{Jlp22}r myinc.inc\\ 
where myinc.inc is the file giving the initial commands. If command 'end' is read, then the program exites. 
But after reading an \textcolor{Red}{;incl}-file to the end or up to \textcolor{Red}{;return}, or after encountering an error, the \textbf{Jlp22} starts 
to read commands from the console using '\textcolor{Red}{sit>}' -prompt, where the user can give 
operation commands or new \textcolor{Red}{;incl} -command or 'end'. 
 
In the interactive operation, the processing of sripts can be interrupted with \textcolor{Red}{;pause}, and 
execution of \textcolor{teal}{TRANS} can be intterrupted with \textcolor{VioletRed}{pause}(). Even if they are described in 
'Command input and output' and '\textbf{Jlp22} transformations' chapters, descriptions 
are repeated here as they are useful in the interactive operation of \textbf{Jlp22}. 
\subsubsection{\textcolor{Red}{;pause} in script processing}\index{;pause} 
\label{inpupause} 
Including input from an include file can be interrupted using an input programming 
command \textcolor{Red}{;pause} promt or the \textbf{Jlp22} function \textcolor{VioletRed}{pause}('<prompt>'). In both cases 
the user can give \textbf{Jlp22} commands, e.g., print objects, change the value of Printdebug etc. 
The difference is that  \textcolor{VioletRed}{pause}('<prompt>') goes first through the interpreted and the interptreted 
code is transmitted to the \textbf{Jlp22} function driver. In the \textcolor{Red}{;pause}- pause it is possible to 
use input programming commands while in \textcolor{VioletRed}{pause}()- pause it is not possible. In both cases, when 
an error occurs, the control remains at the pause prompt. If the user is pressing 
<return> \textbf{Jlp22} continues in the include file. If \textcolor{VioletRed}{pause}() is part of a transformation object, 
pressing <return>, the function driver continues in the transformation object. 
If the user gives command 'e' or 'end', then \textbf{Jlp22} procees similarly as if an error had occured, 
i.e. print error messages and returns control to \textcolor{Red}{sit>} -promt. 
\subsubsection{\textcolor{VioletRed}{pause}() in a \textcolor{teal}{TRANS} or in command input}\index{pause()} 
\label{pause} 
Function \textcolor{VioletRed}{pause}() stops the execution of \textbf{Jlp22} commands which are either in an 
include file or in \textcolor{teal}{TRANS} object. The user can give any commands during the 
\textcolor{VioletRed}{pause}() except input programming commands. 
If the user presses <return> the excution continues. If the user gives 'e', then 
an error condition is generated, and \textbf{Jlp22} comes to the \textcolor{Red}{sit>} promt, except 
if \textcolor{teal}{Continue} has values 1, in which case the control returns one level above 
the \textcolor{Red}{sit>} promt. 
If \textcolor{VioletRed}{pause}()  has a \textcolor{teal}{CHAR} argument, then that character constant is used as 
the prompt. 
\begin{note} 
When reading commands from an include file, the a pause can be generated also 
with \textcolor{Red}{;pause}, which works similarly as \textcolor{VioletRed}{pause}(), but during \textcolor{Red}{;pause} also input programming 
commands can be given. 
\end{note} 
\subsection{Batch mode} 
\label{batch} 
If the default main program is replaced with a program which tells that Jlp is operated 
in the batch mode, or if the initial   \textcolor{Red}{;incl} -file containscommand \textcolor{VioletRed}{batch}(), the \textbf{Jlp22} is operated in 
the batch mode. In the batch mode, the control never starts to read commands from the 
console at \textcolor{Red}{sit>} prompt. Using \textbf{Jlp22} from R, developed with Lauri Meht\"atalo is using \textbf{Jlp22} in the batch mode. 
\subsection{Using shortcuts and sections in \textcolor{Red}{;incl} files}\index{;incl} 
\label{operation2} 
 
It is useful to organize 
the project sript into one script file, which conatians swections starting with a lable and ending 
with \textcolor{Red}{;return}. 
I think that it is more difficult to have several script files. 
The example file jexamples.inc is a good example of a script file. 
different versions of the same script file are stored in different names, it is useful to have 
as first line something like 
this=\textcolor{VioletRed}{thisfile}()\\ 
Then it is not necessary to change anything if the file is stored in a different name. 
Thereafter comes the shortcut definitions for different sections. 
the same 
For instance, if the section 
label is \\ 
;thistask:\\ 
then the shortcut definition could be 
thistaskh='\textcolor{Red}{;incl}(this,\textcolor{blue}{from->}thistask)'\\ 
 
The section should end with\\ 
\textcolor{Red}{;return}\\ 
After defining shortcuts for all sections, it is useful to have a shortcut as:\\ 
again=\textcolor{Red}{;incl}(this)\\ 
If new sections are added, then one needs to give just shortcut\\ 
again\\ 
and then the new shortcuts will be defined. It does not matter if the earlier shortcuts are redefined. 
 
The last shortcut could be \\ 
current='\textcolor{Red}{;incl}(this,\textcolor{blue}{from->}current) 
The label 'current' can be a floating label which is put into the section which is under developed 
in place the problems started. 
 
If a \textbf{Jlp22} code line, either in the input paragraph defining a transformation object 
or outside it, ends with ';' or ';;', the output object of the code line may be printed. 
The output of ';'-line is printed if the variable \textcolor{teal}{Printoutput} has value 1 or 3 at the time when the 
code line is computed. 
The output of ';;'-line is printed if the variable \textcolor{teal}{Printoutput} has value 2 or 3 at the time when the 
code line is computed. 
 
If a code line within a tranformation has function \textcolor{VioletRed}{pause}('text'), then a pause is generated during which 
the user can give any commands except 
input programming commands. If the user will press <return> then the exceution continues. If the user 
presses 'e' and <return>, the control comes to the \textcolor{Red}{sit>} promt similarly as during an error. 
 
If the line outside the transformation definition paragraph is '\textcolor{Red}{;pause}', then 
a similar pause is generated except also input programming commands can be give. 
 
If the variable \textcolor{teal}{Debugtrans} has value 1, them a \textcolor{VioletRed}{pause}() is genertated before each line within 
a tranformation object is executed.  If variable \textcolor{teal}{Debugconsole} has value 1, 
a '\textcolor{Red}{;pause}' is generated before  the line is excuted. In bot cases the user can 
give new values for \textcolor{teal}{Debugtrans} and \textcolor{teal}{Debugconsole}. 
 
What happens when an error is encountered is dependent on the value of variable \textcolor{teal}{Continue}. If \textcolor{teal}{Continue} has 
value 0 (the default case), the control comes into \textcolor{Red}{sit>} prompt when an real error occurs or if an atrficial 
error condition is generated with \textcolor{VioletRed}{errexit}(). If \textcolor{teal}{Continue} has value 1 then the computation continues in 
the same script file where the error occured. This property is used in file jexamples.inc to demonstrate 
possible error conditions so that the computation continues as if no error had occured. 
 
 
\subsection{end ends \textbf{Jlp22}} 
\label{exit} 
To exit \textbf{Jlp22} program and close console window, just give end command: 
 
\textcolor{Red}{sit>}end 
\section{Functions for handling objects} 
\label{objects} 
The following functions can handle objects. 
\subsection{	Copying object: a=\textcolor{teal}{b}} 
\label{copy} 
A copy of object can be made by the assignment statement a=\textcolor{teal}{b}. 
\subsection{\textcolor{VioletRed}{type}() Type of an object or all available types}\index{type()} 
\label{type} 
The type of any object can be access by \textcolor{VioletRed}{type}(\textcolor{teal}{object}). 
If the argument is a character variable or character constant referring to 
a character constant, and there is \textcolor{blue}{content->} option, and the character is the name of 
an object , the \textcolor{VioletRed}{type}() returns the type of the object having the name given in the argument. 
If there is no object having that name, then \textcolor{VioletRed}{type}() returns -1 and no error is generated. 
\singlespacing 
\begin{example}[typeex]Example of type\\ 
\label{typeex} 
\noindent ttt=8;\,\,\,{\color{ForestGreen}!REAL}\\ 
\textcolor{VioletRed}{type}(ttt);\\ 
\textcolor{VioletRed}{type}('ttt');\,{\color{ForestGreen}!type is CHAR}\\ 
\textcolor{VioletRed}{type}('ttt',\textcolor{blue}{content->});\\ 
cttt='ttt'\\ 
\textcolor{VioletRed}{type}(cttt);\\ 
\textcolor{VioletRed}{type}(cttt,\textcolor{blue}{content->});\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{delete\_o}() Deletes objects}\index{delete\_o()} 
\label{delete_o} 
The function \textcolor{VioletRed}{delete\_o}() deletes all the argument objects, which means that the 
associated allocated vectors are deallocated, and the object will be \textcolor{teal}{REAL}. 
\begin{note} 
Note that \textcolor{VioletRed}{delete\_o}() is actually needed only for matrices, because objects 
can be deleted with Object=0. When Object is a matrix, then Object=0 puts all elements 
into zero. 
\end{note} 
\singlespacing 
\begin{example}[deleteoex]Delete object\\ 
\label{deleteoex} 
\noindent a=\textcolor{VioletRed}{matrix}(2,3,\textcolor{blue}{do->});\\ 
\textcolor{teal}{b}=\textcolor{VioletRed}{t}(a);\\ 
\textcolor{VioletRed}{delete\_o}(a,\textcolor{teal}{b})\\ 
a,b;\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{exist\_o}(): does an object exist}\index{exist\_o()} 
\label{existo} 
looks whether an object with the name given in 
the character constant  argument exists. 
\begin{note} 
In the previous versions of \textbf{Jlp22} same function was used for files and objects. 
\end{note} 
\subsection{\textcolor{VioletRed}{name}(): writes the name of an object}\index{name()} 
\label{name} 
The argument gives the index of the object. This function 
may useful if \textbf{J} prints in problem cases the object indices. 
\section{\textbf{Jlp22} transformations} 
\label{jtrans} 
Most operation commands affecting \textbf{Jlp22} objects can be entered directly at the command level or 
packed into transformation object. In both cases the syntax and working is the same. A 
command line can define arithmetic operations for real variables or matrices, or they can 
include functions which operate on other \textbf{Jlp22} objects. General \textbf{Jlp22} functions can have arithmetic 
statements in their arguments or in the option values. In some cases the arguments must be 
object names. In principle it is possible to combine several general \textbf{Jlp22} functions in the same 
operation command line, but there may not be any useful applications yet, and possibly some 
error conditions would be generated. 
Definition: A numeric function is a \textbf{Jlp22} function which returns a single real value. These functions 
can be used within other transformations similarly as ordinary arithmetic functions. E.g. 
\textcolor{VioletRed}{weights}() is a numeric function returning the number of schedules having nonzero weight 
in a JLP-solution. Then \textcolor{VioletRed}{print}(\textcolor{VioletRed}{sqrt}(\textcolor{VioletRed}{weights}())+\textcolor{teal}{Pi}) is a legal transformation. 
\subsection{Transformation object} 
\label{transo} 
A transformation object groups several operation commands together so that they 
can be used for different purposes by \textbf{Jlp22} functions and \textbf{Jlp22} objects. A 
transformation object contains the interpreted transformations. For more details 
see \textbf{Jlp22} function for defining transformation objects: \textcolor{VioletRed}{trans}(). 
Transformation objects can be called using \textcolor{VioletRed}{call}() function, so that all 
transformations defined in the object are done once. Function result() also calls 
transformations but is also returning a value. When transformation objects are 
linked to data objects, then the transformations defined in trans-formation object 
are done separately for each observation. 
There is an implicit transformation object \$Cursor\$ which is used to run the 
command level. The name \$Cursor\$ may appear in error messages when doing 
commands at command level.  An-other transformation object \$Val\$ which is used to 
take care of the substitutions of "-sequences in the input programming. Some \textbf{Jlp22} 
functions use also implicitly transformations object \$Cursor2\$. 
\subsection{\textcolor{VioletRed}{trans}() Creates a \textcolor{teal}{TRANS} (transformation) object}\index{trans()} 
\label{trans} 
\textcolor{VioletRed}{trans}() function interprets lines from input paragraph following the \textcolor{VioletRed}{trans}() command and puts the 
interpreted code into an integer vector, which can be excuted in several places. 
If there are no arguments in the function, the all objected used within the 
transforamations are global. This may cause conflicts if there are several recursive 
functions operating at the same time with same objects. \textbf{Jlp22} checks some of 
these conflict situations, but not all.  These conflicts can be avoided by giving 
intended global arguments  in the list of arguments. 
Then an object 'ob' created e.g. with transformation object \textcolor{teal}{tr} have prefix 
]tr/\[ yelding ]tr/\ob[. Actually also these objects are global, but their prefix 
protects them so that they do not intervene with objects having the same name in the 
calling transformation objec. 
 
Each line in the input paragraph is read and interpreted and packed into a transformation 
object, and associated tr\%input and tr\%output lists are created for input and output 
variables. Objects can be in both lists. Objects having names starting 
with '\$' are not put into the input or output lists. The source code is saved in a text object 
tr\%source. List tr\%arg contains all arguments. 
	! 
If a semicolon ';'  is at the end of an input line, then 
the output is printed if \textcolor{teal}{REAL} variable Prindebug has value 1 or value>2 at 
the execution time. If the double semicolon ';;' is at the end then the output is 
printed if \textcolor{teal}{Printresult}>1. If there is no output, but just list of objects, then these 
objects will be printed with semicolns. 
 
	! 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{Data} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The \textcolor{teal}{TRANS} object generated. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} N|1- \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Global objects. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
Options input->, \textcolor{blue}{local->}, \textcolor{blue}{matrix->}, \textcolor{blue}{arg->}, result->, \textcolor{blue}{source->} of previous 
versions are obsolte. 
\end{note} 
\begin{note} 
The user can intervene the execution from console if the code calls \textcolor{VioletRed}{read}(\$,), 
\textcolor{VioletRed}{ask}(), \textcolor{VioletRed}{askc}() or \textcolor{VioletRed}{pause}() functions. During the pause one can give any command excepts 
such input programming command as \textcolor{Red}{;incl}. 
\end{note} 
\begin{note} 
The value of \textcolor{teal}{Printresult} can be changed in other parts of the transformation, or 
in other transforamations called or during execution of \textcolor{VioletRed}{pause}(). 
\end{note} 
 
\begin{note} 
Output variables in \textcolor{blue}{maketrans->} transformations whose name start with \$ are not put into the new data object. 
\end{note} 
\singlespacing 
\begin{example}[transex]Demonstrates also error handling\\ 
\label{transex} 
\noindent \textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
\$\textcolor{teal}{x3}=\textcolor{teal}{x1}+3\\ 
\textcolor{teal}{x2}=2/\$x3;\\ 
/                          \\ 
\textcolor{teal}{transa}\%input,\textcolor{teal}{transa}\%output,\textcolor{teal}{transa}\%source;\\ 
\textcolor{teal}{x1}=8\\ 
\textcolor{VioletRed}{call}(\textcolor{teal}{transa})\\ 
\textcolor{teal}{transb}=\textcolor{VioletRed}{trans}(\textcolor{teal}{x1},\textcolor{teal}{x2})\\ 
\$\textcolor{teal}{x3}=\textcolor{teal}{x1}+3\\ 
\textcolor{teal}{x2}=2/\$x3;\\ 
\textcolor{teal}{x3}=\textcolor{teal}{x1}+\textcolor{teal}{x2}+\$x3;\\ 
/                                                                  \\ 
\textcolor{teal}{transb}\%input,\textcolor{teal}{transb}\%output,\textcolor{teal}{transb}\%source;\\ 
\textcolor{VioletRed}{call}(\textcolor{teal}{transb})\\ 
transb|x3;\,\,\,{\color{ForestGreen}!x3 is now local}\\ 
transc=\textcolor{VioletRed}{trans}()\\ 
\textcolor{teal}{x1}=-3\\ 
\textcolor{VioletRed}{call}(\textcolor{teal}{transb})\,{\color{ForestGreen}!this is causing division by zero}\\ 
/                                                                                                            \\ 
\textcolor{teal}{Continue}=1\,\,\,{\color{ForestGreen}! continue after error}\\ 
\textcolor{VioletRed}{call}(transc)\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\color{Green} 
\begin{verbatim} 
sit>transex 
<;incl(exfile,from->transex) 
 
 
<transa=trans() 
<$x3=x1+3 
<x2=2|$x3; 
</ 
<transa%input,transa%output,transa%source; 
transa%input is list with            2  elements: 
x1 $x3 
transa%output is list with            1  elements: 
x2 
transa%source is text object: 
1 $x3=x1+3 
2 x2=2/$x3; 
3 / 
///end of text object 
 
<x1=8 
 
 
<call(transa) 
x2=0.18181818 
 
<transb=trans(x1,x2) 
<$x3=x1+3 
<x2=2/$x3; 
<x3=x1+x2+$x3; 
</ 
<transb%?; 
 
 
<call(transb) 
 
 
<transc=trans() 
<x1=-3 
<call(transb) 
</ 
<Continue=1 
<call(transc) 
*division by zero 
*****error on row            2  in tr%source 
x2=2/$x3; 
recursion level set to    3.0000000000000000 
 
*****error on row            2  in transc%source 
call(transa) 
recursion level set to    2.0000000000000000 
 
*err* transformation set=$Cursor$ 
recursion level set to    1.0000000000000000 
****cleaned input 
call(transc) 
*Continue even if error has occured 
<;return 
\end{verbatim} 
\color{Black} 
\subsection{\textcolor{VioletRed}{call}() executes \textcolor{teal}{TRANS} object}\index{call()} 
\label{call} 
Parsed transformations in a TRANSobject can be automatically executed by other \textbf{Jlp22} 
functions or they can be executed explicitly using \textcolor{VioletRed}{call}() function. 
 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{teal}{Arg} \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{TRANS} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The transformation object executed. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
 
\begin{note} 
A transformation objects can be used recursively, i.e. a transformation can be called from 
itself. The depth of recursion is not controlled by \textbf{J}, so going too deep in recursion will 
eventually lead to a system error. 
\end{note} 
\begin{note} 
Professional programmers would probably say that the integer vector produced with the parser 
is interpreted and not executed. An amateur programmer can be more flexible with terms. 
\end{note} 
\singlespacing 
\begin{example}[recursion]Recursion produces system crash.\\ 
\label{recursion} 
\noindent \textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\,{\color{ForestGreen}!level will be initialized as zero}\\ 
level;\\ 
level=level+1\\ 
\textcolor{VioletRed}{call}(\textcolor{teal}{transa})\\ 
/                                                    \\ 
\textcolor{teal}{Continue}=1\,\,{\color{ForestGreen}!error is produced}\\ 
\textcolor{VioletRed}{call}(\textcolor{teal}{transa})\\ 
\textcolor{teal}{Continue}=0\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{pause}() in a \textcolor{teal}{TRANS} or in command input}\index{pause()} 
\label{pause} 
Function \textcolor{VioletRed}{pause}() stops the execution of \textbf{Jlp22} commands which are either in an 
include file or in \textcolor{teal}{TRANS} object. The user can give any commands during the 
\textcolor{VioletRed}{pause}() except input programming commands. 
If the user presses <return> the excution continues. If the user gives 'e', then 
an error condition is generated, and \textbf{Jlp22} comes to the \textcolor{Red}{sit>} promt, except 
if \textcolor{teal}{Continue} has values 1, in which case the control returns one level above 
the \textcolor{Red}{sit>} promt. 
If \textcolor{VioletRed}{pause}()  has a \textcolor{teal}{CHAR} argument, then that character constant is used as 
the prompt. 
\begin{note} 
When reading commands from an include file, the a pause can be generated also 
with \textcolor{Red}{;pause}, which works similarly as \textcolor{VioletRed}{pause}(), but during \textcolor{Red}{;pause} also input programming 
commands can be given. 
\end{note} 
\section{Special implicit functions} 
\label{special} 
The special functions are such that the parser uses these functions for special operations. 
Only \textcolor{VioletRed}{list2}() is function which also the user can use, but the parser is 
is using it implicitly. 
\subsection{\textcolor{VioletRed}{setoption}(): set option on}\index{setoption()} 
\label{setoption} 
When a function has an option then the parser generates first code 
\textcolor{VioletRed}{setoption}(...) where the arguments of the option are interpred in the similar way as 
arguments of all functions. Then the parser genarates the code for 
\textcolor{VioletRed}{setoption}() function in a special way. 
\subsection{Get or set a matrix element or submatrices} 
\label{getelem} 
Matrix elements or submatrices can be accessed using the same syntax as 
accesing \textbf{Jlp22} functions. 
 
One can get or set matrix elements and submatrices as follows. If the expression 
is on the right side of '=' then \textbf{Jlp22} gets a \textcolor{teal}{REAL} value or submatrix, if the expression 
is on the left side of '=', the \textbf{Jlp22} sets new values for a matrix element or a submatrix. 
In the following formulas \textcolor{teal}{C} is a column vector, \textcolor{teal}{R} a row vector, and \textcolor{teal}{M} is 
a general matrix with m rows and n columns. 
If \textcolor{teal}{C} is actually \textcolor{teal}{REAL} it can 
be used as if it would 1 \textcolor{teal}{x} 1 \textcolor{teal}{MATRIX}. This can be useful when working with 
matrices whose dimensions can vary starting from 1 \textcolor{teal}{x} 1. Symbol \textcolor{teal}{r} refers to 
row index, \textcolor{teal}{r1} to first row in a row range, \textcolor{teal}{r2} to the last row. The rows and 
columns can be specifiel using \textcolor{teal}{ILIST} objects \textcolor{teal}{il1} and \textcolor{teal}{il2} to specify noncontiguous ranges. 
It is currently not possible to mix \textcolor{teal}{ILIST} range and contiguous range, so if \textcolor{teal}{ILIST} 
is needed for rows (columns), it must be used also for columns (rows). \textcolor{teal}{ILIST} can be 
specified using explicitly \textcolor{VioletRed}{ilist}() function or using {} construction. 
Similarly columns are indicated  with \textcolor{teal}{c}. It is always legal to refer to 
vectors by using the \textcolor{teal}{M} formulation and giving \textcolor{teal}{c} with value 1 for column vectors and 
and \textcolor{teal}{r} with value 1 for row vectors. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 0-4 \tabto{5cm}  \textcolor{teal}{REAL} | \textcolor{teal}{ILIST} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent row and column range as explained below. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{diag} \tabto{3cm} N| \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent Get or set diagonal elements 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{sum} \tabto{3cm} N|0|1 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  When setting elements, the right side is added to the current elements. If the 
\textcolor{blue}{sum->} option has argument, the right side is multiplied with the argument when adding to the curretn elements. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
 
Row and column ranges can be spcidie as follows. 
\begin{itemize} 
\item  \textcolor{teal}{M}(r,c) \tabto{5cm} Get or set single element. 
\item  \textcolor{teal}{C}(r)  \tabto{5cm} Get or set single element in column vector. 
\item  \textcolor{teal}{R}(c) \tabto{5cm} Get or set single element in column vector. 
\item  \textcolor{teal}{M}(RANGES) \tabto{5cm} Get or set a submatrix, where RANGES 
can be. For a column vector, the column range need not to specified. 
\begin{itemize} 
\item  r1,-r2,c1,-c2 
\item  r,c1,-c2  \tabto{5cm} part of row r 
\item  r1,-r2,c	\tabto{5cm} part of column c 
\item  r1,-r2,All  \tabto{5cm} All columns of the row range 
\item  All,c1,-c2  \tabto{5cm} All rows of the column range 
\item  {r1,....rm},{c1,...,cn}  \tabto{5cm} Given rows and columns 
\item  {r1,....rm}  \tabto{5cm} Given rows for column vector 
\item  il1,il2   \tabto{5cm} for matrix with several columns 
\item  il1   \tabto{5cm} for column vector 
\end{itemize} 
\item  When r2= m, then -r2 can be replaced with \textcolor{teal}{Tolast}. 
\item  When c2= n, then -c2 can be replaced with \textcolor{teal}{Tolast}. 
\end{itemize} 
 
If option \textcolor{blue}{diag->} is present then 
\begin{itemize} 
\item  \textcolor{teal}{M}(\textcolor{blue}{diag->}) Get or set the diagonal. If \textcolor{teal}{M} is not square matrix, and error 
occurs. 
\item  \textcolor{teal}{M}(r1,-r2,\textcolor{blue}{diag->}) (Again -r2 can be \textcolor{teal}{Tolast}. 
\end{itemize} 
\begin{note} 
Note 
When setting values to a submatrix the the the values given in input matrix 
are put into the outputmatrix in row order, and the shape of the input and output matrices need 
not be the same. An error occurs only if input and output contain different number of 
elements. 
\end{note} 
\singlespacing 
\begin{example}[getset]Get or set submatrices\\ 
\label{getset} 
\noindent A=\textcolor{VioletRed}{matrix}(3,4,\textcolor{blue}{do->});\\ 
\textcolor{teal}{B}=A(1,-2,3,-4);\\ 
A(1,-2,3,-4)=\textcolor{teal}{B}+3;\\ 
A(1,-2,3,-4,\textcolor{blue}{sum->})=-5;\\ 
A(1,-2,3,-4,\textcolor{blue}{sum->}2)=A(2,-3,1,-2);\\ 
C=A({1,3},{4...2});\\ 
H=\textcolor{VioletRed}{matrix}(4,4,\textcolor{blue}{diag->},\textcolor{blue}{do->}3);\\ 
H(3,-4,\textcolor{blue}{diag->})=\textcolor{VioletRed}{matrix}(2,\textcolor{blue}{values->}(4,7));\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\begin{note} 
When giving range, the lower and upper limit can be equal. 
\end{note} 
\subsection{\textcolor{VioletRed}{getelem}(): extracting information from an object}\index{getelem()} 
\label{getelem0} 
The origin of this function is the function which was used in previous versions 
to take an matrix element, which explains the name. Now it is used to extract 
also submatrices (e.g. a(1,-3,All)) , or to get value of an regression 
function or to compute 
a transformation and then take argument object as the result. E.g. if \textcolor{teal}{tr} is a transformation 
then the result of  \textcolor{teal}{tr}(\textcolor{teal}{a}) is object \textcolor{teal}{a} after calling \textcolor{teal}{tr}. 
\begin{note} 
If someone starts to use the own function property of the open source \textbf{J}, she/he 
probably would like to get the possibility to extract information from her/his object types 
also. To implement this property requires some co-operation from my side. 
\end{note} 
\subsection{\textcolor{VioletRed}{setelem}(): Putting something  into an object.}\index{setelem()} 
\label{setelem} 
The origin of this function is the function which was used in previous versions 
to set an matrix element, which explains the name. Now it is used to replace values 
of submatrices when submatrix expression is on the 
output side (e.g. a(1,-3,All)=..). 
\begin{note} 
If someone starts to use the own function property of the open source \textbf{J}, she/he 
probably would like to get the possibility to put information into from her/his object types 
also. To implement this property requires some co-operation from my side. 
\end{note} 
\begin{note} 
In effect the \textcolor{VioletRed}{getelem}() and \textcolor{VioletRed}{setelem}() functions are excuted in the same 
\textcolor{VioletRed}{getelem}() subroutine, because bot functions can utilize the same code. 
\end{note} 
\subsection{\textcolor{VioletRed}{list2}()}\index{list2()} 
\label{list20} 
The interpreted utilizes this to separate when spearating output and input objects. 
See Section \ref{list2} hw user can use this function 
\subsection{\textcolor{VioletRed}{setcodeopt}(): Initialization of a code option}\index{setcodeopt()} 
\label{setcode} 
This function initializes an code option for a function which has the option. 
\subsection{\textcolor{VioletRed}{o1\_funcs}(), \textcolor{VioletRed}{o2\_funcs}() and \textcolor{VioletRed}{o3\_funcs}() calls own functions}\index{o1\_funcs()o2\_funcs()o3\_funcs()} 
\label{own} 
The users of open \textbf{Jlp22} can define their own functions using three 
available own-function sets. In addition to own functions open \textbf{Jlp22} is ready to 
recognize also own object types and options which are defined in the source files 
controlled by the users. The main \textbf{Jlp22} does not know what to do with these own 
object types and options, they are just transmitted to the own-functions. 
In the main \textbf{Jlp22} the control is transmitted to the own functions using implicit 
\textbf{Jlp22} functions \textcolor{VioletRed}{o1\_funcs}(), \textcolor{VioletRed}{o2\_funcs}() and \textcolor{VioletRed}{o3\_funcs}(). 
\section{Transformation objects} 
\label{Transformations} 
The code lines generated by the input programming can be either 
executed directly after interpretation, or the interpreted code lines 
are packed into a transformation object, which can be excuted with \textcolor{VioletRed}{call}() 
which is either in the code generated with the input programming 
or inside the same or other transformation object. Recursive 
calling a transformation is thus also possible. Different functions 
related to transformation object are described in this section. 
\section{Loops and control strucures} 
\label{loops} 
This section describes nonstadard functions. 
\subsection{\textcolor{VioletRed}{do}() loops}\index{do()} 
\label{do} 
 
The loop construction in \textbf{Jlp22} looks as follows: 
\textcolor{VioletRed}{do}(i,start,end[,step]) 
\textcolor{VioletRed}{enddo} 
\begin{note} 
cycle and exit are implemented in the current \textbf{Jlp22} version with \textcolor{VioletRed}{goto}() 
Within a do‚Äìloop there can be cycleand exitdostatements 
\end{note} 
\begin{note} 
There can be 8 nested loops. do-loop is not allowed at command level. 
\end{note} 
\singlespacing 
\begin{example}[doex]do-loop\\ 
\label{doex} 
\noindent {\color{ForestGreen}!!begin}\\ 
\textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
\textcolor{VioletRed}{do}(i,1,5)\\ 
i;\\ 
ad1:\,\textcolor{VioletRed}{if}(i.eq.3)\textcolor{VioletRed}{goto}(cycle)\\ 
i;\\ 
\textcolor{VioletRed}{if}(i.eq.4)\textcolor{VioletRed}{goto}(jump)\\ 
cycle:\textcolor{VioletRed}{enddo}\\ 
jump:i;\\ 
/      \\ 
\textcolor{VioletRed}{call}(\textcolor{teal}{transa})\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{if}()}\index{if()} 
\label{if} 
 
\textcolor{VioletRed}{if}()j\_statement... \newline 
The one line if-statement. 
\subsection{ \textcolor{VioletRed}{if}() elseif() else \textcolor{VioletRed}{endif}}\index{if()} 
\label{ifthen} 
There can be 4 nested \textcolor{VioletRed}{if}()\textcolor{VioletRed}{then} structures. If-then-structures are not 
allowed at command level. 
 
\textcolor{VioletRed}{if}()\textcolor{VioletRed}{then} 
.... 
elseif()\textcolor{VioletRed}{then} 
... 
else 
.... 
\textcolor{VioletRed}{endif} 
\subsection{ \textcolor{teal}{output}=\textcolor{teal}{input}} 
\label{ASSIGN} 
There are two assignment functions generated by '=', when the line is of 
form \textcolor{teal}{output}=func[]input[), then the output is directly 
put to the output position of the function 
without explicitly generating assignment. 
When the codeline is in form \textcolor{teal}{output}=\textcolor{teal}{input} then the following cases can occur 
 
\begin{itemize} 
\item  \textcolor{teal}{output} is \textcolor{teal}{MATRIX} 
and \textcolor{teal}{input} is scalar, then each element of \textcolor{teal}{MATRIX} is replaced with the \textcolor{teal}{input} 
in \textcolor{VioletRed}{assone}() function. 
\item  \textcolor{teal}{output} is submatrix expression, then the elements of the 
submatrix are asigned in \textcolor{VioletRed}{setelem}() funtion whether \textcolor{teal}{input} is \textcolor{teal}{MATRIX} or submatrix 
expression, scalar or \textcolor{teal}{LIST}. 
 
\item  \textcolor{teal}{output} is \textcolor{teal}{MATRIX}  and on input side is a random number 
generation function, the random numbers are put to all elements of the matrix. 
 
\item If on output side are many object names, and input side is 
one \textcolor{teal}{REAL} value, this is put to all variables. 
 
\item If on output side are many object names, and input there are several 
variables then both sides should have equal numbers of object names, then 
then copies of the input objects are put into output objects. 
 
 
\end{itemize} 
\singlespacing 
\begin{example}[assignex]Examples of assignments\\ 
\label{assignex} 
\noindent a=\textcolor{VioletRed}{matrix}(2,3);\\ 
a=4;\\ 
a=\textcolor{VioletRed}{rann}();\\ 
v1...v5=2...6;\\ 
v1...v5=77;\\ 
\textcolor{teal}{Continue}=1\,\,{\color{ForestGreen}! ERROR}\\ 
v1..v3=1,5;\\ 
v1..3=1...3\,\,\,{\color{ForestGreen}! v is missing from the front of 3}\\ 
\textcolor{teal}{Continue}=0\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{which}() Value based on conditions}\index{which()} 
\label{which} 
 
Usage:\\ 
 
output=\textcolor{VioletRed}{which}(condition1,value1,...,conditionn,valuen) \\ 
or\\ 
output=\textcolor{VioletRed}{which}(condition1,value1,...,conditionn,valuen,valuedefault) 
Where conditionx is a \textcolor{teal}{REAL} value, nonzero	value indicating TRUE. Output will get first value for which 
the condition is TRUE. When the number of arguments is not even, the the last value 
is the default value. 
\singlespacing 
\begin{example}[whichex]Example of \textcolor{VioletRed}{which}()\\ 
\label{whichex} 
\noindent c=9\\ 
\textcolor{VioletRed}{which}(a.eq.3.or.c.gt.8,5,a.eq.7,55);\\ 
a=7\\ 
\textcolor{VioletRed}{which}(a.eq.3.or.c.gt.8,5,a.eq.7,55);\\ 
a=5\\ 
\textcolor{VioletRed}{which}(a.eq.3.or.c.gt.8,5,a.eq.7,55);\\ 
\textcolor{VioletRed}{which}(a.eq.3.or.c.gt.8,5,a.eq.7,55,108);\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{errexit}() returns to \textcolor{Red}{sit>}}\index{errexit()} 
\label{errexit} 
Function \textcolor{VioletRed}{errexit}() returns the control to \textcolor{Red}{sit>} prompt with a message similarly 
as when an error occurs. 
 
\singlespacing 
\begin{example}[errexitex]errexit() returns as if error had occured\\ 
\label{errexitex} 
\noindent \textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
\textcolor{VioletRed}{if}(a.eq.0)\textcolor{VioletRed}{errexit}('illegal\,value\,',a)\\ 
s=3/a;\,{\color{ForestGreen}! division with zero is tested automatically}\\ 
/                                                                        \\ 
a=3.7\\ 
\textcolor{VioletRed}{call}(\textcolor{teal}{transa})\\ 
\textcolor{teal}{transa}(s);\,{\color{ForestGreen}!tr can also be used as a function}\\ 
a=0\\ 
\textcolor{teal}{Continue}=1\,\,{\color{ForestGreen}!Do not stop in this selfmade error}\\ 
\textcolor{VioletRed}{call}(\textcolor{teal}{transa})\\ 
\textcolor{teal}{Continue}=0\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{goto}() goto a label in \textcolor{teal}{TRANS}}\index{goto()} 
\label{goto} 
Control can be transfered to a label in a transformation set with \textcolor{VioletRed}{goto}(). 
There are two types of goto's, unconditional goto to a given label and goto 
to an label from a group af labels based on a condition (Computed goto in Fortran). 
These are decribed in separate subsections. Notes common to both are presented here. 
\begin{note} 
It is not recommended to use \textcolor{VioletRed}{goto}() according to modern computation practices. 
However, it was easier to implement cycle and exitdo with \textcolor{VioletRed}{goto}(). 
\end{note} 
\begin{note} 
It is not allowed to jump in to a loop or into if -then structure. This is 
checked already in in the parser. DOES NOT WORK NOW, WILL BE CORRECTED 
\end{note} 
\begin{note} 
Even if the labels are 
logically character arguments, they are not treated using CHARs. The parser 
handles them otherwise. 
\end{note} 
\begin{note} 
The label lines can contain code but the labels can stand on the line also alone. 
\end{note} 
\subsection{\textcolor{VioletRed}{goto}(label) Unconditional goto} 
\label{goto1} 
An unconditional \textcolor{VioletRed}{goto}() has only one label argument. 
\singlespacing 
\begin{example}[gotoex]Example of unconditional goto\\ 
\label{gotoex} 
\noindent \textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
i=0\\ 
\textcolor{VioletRed}{if}(i.eq.0)\textcolor{VioletRed}{goto}(koe)\\ 
out=99;\\ 
koe:out=88;\\ 
/          \\ 
\textcolor{VioletRed}{call}(\textcolor{teal}{transa})\\ 
out;\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{goto}(index,lable1...labeln) Conditional goto} 
\label{goto2} 
An conditional \textcolor{VioletRed}{goto}() selects the label from a group of labels. 
\singlespacing 
\begin{example}[congotoex]\\ 
\label{congotoex} 
\noindent \textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
out=999\\ 
\textcolor{VioletRed}{goto}(ad1)\\ 
77;\\ 
ad1:\\ 
1;\\ 
\textcolor{VioletRed}{goto}(2,ad1,ad3)\\ 
88;\\ 
ad2:\\ 
2;\\ 
\textcolor{VioletRed}{goto}(go,ad1,ad3)\\ 
out=0;\\ 
return\\ 
ad3:\\ 
3;\\ 
\textcolor{VioletRed}{goto}(3,ad3,ad1,ad2)\\ 
/                                         \\ 
go=0\,\,{\color{ForestGreen}! This determines the last goto}\\ 
\textcolor{VioletRed}{call}(\textcolor{teal}{transa})\\ 
out;\\ 
go=4\\ 
{\color{ForestGreen}** Now error occurs}\\ 
\textcolor{teal}{Continue}=1\\ 
\textcolor{VioletRed}{call}(\textcolor{teal}{transa})\\ 
\textcolor{teal}{Continue}=0\\ 
\textcolor{Red}{;return}\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\begin{note} 
A simulator for generating treatment schedules for forest stands 
can be nicely defined using the conditional goto, as will shortly be described. 
\end{note} 
\section{Arithmetic and logical operations} 
\label{arit} 
The logical operations follow the same ruels as addition +. The following rules, 
extending the standard matrix computaion rules apply. The same rules aplly if the 
order of arguments is changed, 
\begin{itemize} 
\item \textcolor{teal}{MATRIX} + \textcolor{teal}{REAL} : \textcolor{teal}{REAL} is added to each element 
 
\item MATRIX1+MATRIX2 :: elementwise addition, if matrices hav comptaible dimensions 
\item  \textcolor{teal}{MATRIX}+ column vector: column vector is added to each column of \textcolor{teal}{MATRIX} 
if the numbers of rows agrees. 
\item  \textcolor{teal}{MATRIX}+ row vector: row vector is added to each 
row of \textcolor{teal}{MATRIX} 
if the numbers of columns agree. 
 
\end{itemize} 
The same rules apply for the lelmentwise multiplication *. and elementwise 
division /. as for addition +. 
\subsection{\textcolor{VioletRed}{min}() and \textcolor{VioletRed}{max}()}\index{min()max()} 
\label{minmax} 
Functions \textcolor{VioletRed}{min}() and max () 
behave in a special way, \textcolor{VioletRed}{max}() behaves similarly as \textcolor{VioletRed}{min}() here: 
\begin{itemize} 
\item \textcolor{VioletRed}{min}(\textcolor{teal}{x1},\textcolor{teal}{x2}):: minimum of two \textcolor{teal}{REAL} 
\item \textcolor{VioletRed}{min}(\textcolor{teal}{MATRIX},\textcolor{teal}{REAL}):: each element is \textcolor{VioletRed}{min}(elem,\textcolor{teal}{REAL}) 
\item \textcolor{VioletRed}{min}(\textcolor{teal}{MATRIX}):: row vector having minimums of all columns 
\item \textcolor{VioletRed}{min}(\textcolor{teal}{MATRIX},\textcolor{blue}{any->}):: minimum over the whole amtrix 
\end{itemize} 
\section{Statistical functions for matrices} 
\label{matrixstat} 
Functions \textcolor{VioletRed}{mean}(), \textcolor{VioletRed}{sd}(), \textcolor{VioletRed}{var}(), \textcolor{VioletRed}{sum}(), \textcolor{VioletRed}{min}() and \textcolor{VioletRed}{max}() 
can be used used to compute stastics from a matrix. Let \textcolor{VioletRed}{mean}() here present 
any of thes functions. The following rules apply: 
\begin{itemize} 
\textcolor{VioletRed}{mean}(VECTOR) computes the mean of the vector, output is \textcolor{teal}{REAL} 
\textcolor{VioletRed}{mean}(\textcolor{teal}{MATRIX}) computes the mean of the each column. \textcolor{teal}{Result} is row vector. 
\textcolor{VioletRed}{mean}(VECTOR,\textcolor{blue}{weight->}wvector) computes the 
weigted mean of the vector,weights being in vector wvector. 
\textcolor{VioletRed}{mean}(\textcolor{teal}{MATRIX},\textcolor{blue}{weight->}wvector) computes the 
weighted mean of each column, weights being in vector wvector, result is row vector. 
 
\end{itemize} 
\subsection{\textcolor{VioletRed}{mean}() Means or weighted means}\index{mean()} 
\label{mean} 
See section matrixstat for details 
\subsection{\textcolor{VioletRed}{sd}() Sd's or weighted sd's}\index{sd()} 
\label{sd} 
See section matrixstat for details 
\subsection{\textcolor{VioletRed}{var}() Sample variances or weighted variances}\index{var()} 
\label{var} 
See section matrixstat for details 
\subsection{\textcolor{VioletRed}{sum}() Sums or weighted sums}\index{sum()} 
\label{sum} 
See section matrixstat for details 
\section{Special arithmetic functions} 
\label{Special} 
\textbf{Jlp22} has the following arithmetic functions producing \textcolor{teal}{REAL} values.These functions cannot yet have 
matrix arguments. 
\subsection{\textcolor{VioletRed}{der}() Derivatives}\index{der()} 
\label{der} 
Derivates of a function with respect to any of its arguments can be 
computed using the derivation rules by using \textcolor{VioletRed}{der}() function in the previous line. The funcion must be expressed with 
one-line statement. The function can call other functions using the standard way 
to obtain objects from transformations, but these functions cannot 
contain variables for which derivatives are obtained. 
Nonlinear regression needs the derivatives with respect to the parameters. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output  \tabto{3cm}    \tabto{5cm}     \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The \textcolor{VioletRed}{der}() function does not have an explicit output, but 
\textcolor{VioletRed}{der}() accompanied with the function produces \textcolor{teal}{REAL} ]d[[] variable for each of the 
argument variables. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args  \tabto{3cm} 1-  \tabto{5cm}   \textcolor{teal}{REAL}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent   ]d[[Argi] variable will get the value of the derivative wiht 
respect to the argument \textcolor{teal}{Argi}. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\singlespacing 
\begin{example}[derex]Derivatives with \textcolor{VioletRed}{der}()\\ 
\label{derex} 
\noindent \textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
\textcolor{VioletRed}{der}(\textcolor{teal}{x})\\ 
f=(1+\textcolor{teal}{x})*\textcolor{VioletRed}{cos}(\textcolor{teal}{x})\\ 
/                                                                        \\ 
fi=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}\textcolor{teal}{transa}(f\\textcolor{teal}{x}),\textcolor{teal}{x}->\textcolor{teal}{x},\textcolor{blue}{xrange->}(0,10),\textcolor{blue}{color->}\textcolor{teal}{Blue},\textcolor{blue}{continue->})\\ 
fi=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}\textcolor{teal}{transa}(f),\textcolor{teal}{x}->\textcolor{teal}{x},\textcolor{blue}{xrange->}(0,10),\textcolor{blue}{color->}\textcolor{teal}{Cyan},\textcolor{blue}{append->},\textcolor{blue}{continue->}fcont)\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\singlespacing 
\begin{example}[derex2]2\\ 
\label{derex2} 
\noindent X=\textcolor{VioletRed}{matrix}(\textcolor{blue}{do->}(0,1000,10))\\ 
e=\textcolor{VioletRed}{matrix}(\textcolor{VioletRed}{nrows}(X))\\ 
e=\textcolor{VioletRed}{rann}(0,2);\\ 
A,Pmax,Res=0.1,20,2\\ 
A*Pmax*1000/(A*1000+Pmax);\\ 
Y=A*Pmax*X/.(A*X+Pmax)-Res+e\,\,{\color{ForestGreen}!rectangular hyperbola used often for photosynthesis}\\ 
 
\textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
\textcolor{VioletRed}{der}(A,Pmax,Res)\\ 
f=A*Pmax*I/(A*I+Pmax)-Res\\ 
/                        \\ 
 
fi=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}(\textcolor{teal}{transa}(f)),\textcolor{teal}{x}->I,\textcolor{blue}{xrange->}(0,1000),\textcolor{blue}{color->}Orange,\textcolor{blue}{width->}2,\textcolor{blue}{continue->},\textcolor{blue}{show->}0)\\ 
da=\textcolor{VioletRed}{newdata}(X,Y,e,\textcolor{blue}{extra->}(\textcolor{teal}{Regf},\textcolor{teal}{Resid}),\textcolor{blue}{read->}(I,P,er))\\ 
\textcolor{VioletRed}{stat}()\\ 
fi=\textcolor{VioletRed}{plotyx}(P,I,\textcolor{blue}{append->},\textcolor{blue}{show->}0,\textcolor{blue}{continue->}fcont)\\ 
 
A,Pmax,Res=0.07,17,3\,{\color{ForestGreen}!initial values}\\ 
 
fi=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}(\textcolor{teal}{transa}(f)),\textcolor{teal}{x}->I,\textcolor{blue}{xrange->}(0,1000),\textcolor{blue}{color->}\textcolor{teal}{Green},\textcolor{blue}{width->}2,\textcolor{blue}{append->},\textcolor{blue}{show->}0,\textcolor{blue}{continue->})\\ 
reg=\textcolor{VioletRed}{nonlin}(P,f,\textcolor{blue}{par->}(A,Pmax,Res),\textcolor{blue}{var->},\textcolor{blue}{corr->},\textcolor{blue}{data->}da,\textcolor{blue}{trans->}\textcolor{teal}{transa})\\ 
reg\%var;\\ 
reg\%corr;\\ 
\textcolor{VioletRed}{corrmatrix}(reg\%var);\\ 
fi=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}(\textcolor{teal}{transa}(f)),\textcolor{teal}{x}->I,\textcolor{blue}{xrange->}(0,1000),\textcolor{blue}{color->}\textcolor{teal}{Violet},\textcolor{blue}{append->},\textcolor{blue}{continue->}fcont)\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{gamma}() Gamma function}\index{gamma()} 
\label{gamma} 
Function \textcolor{VioletRed}{gamma}() produses the value of gamma funtion for a positive argument. 
The function utilises gamma subroutine from 
library dcdflib in Netlib. For computing gamma function for a product, \textcolor{VioletRed}{loggamma}() is often needed. 
\ubsection{\textcolor{VioletRed}{loggamma}() Log of gamma function}\index{loggamma()} 
\label{loggamma} 
Function \textcolor{VioletRed}{gamma}() produces the value of loggamma funtion for a positive argument. 
	! 
The function utilises gamma subroutine from 
library dcdflib in Netlib. Loggamma is used in statistics in many cases where 
gamma function gets a too large value to be presented in double precision. 
\subsection{\textcolor{VioletRed}{logistic}() Logistic function}\index{logistic()} 
\label{logistic} 
Returns the value of the logistic function 1/(1+\textcolor{VioletRed}{exp}(-\textcolor{teal}{x})). This can in principle computed by the 
transformation, but the transformation will produce an error condition when the argument -\textcolor{teal}{x} 
of the exp-function is large. Because the logistic function is symmetric, these cases are 
computed as \textcolor{VioletRed}{exp}(\textcolor{teal}{x})/(1+\textcolor{VioletRed}{exp}(\textcolor{teal}{x})). Because the logistic function can be needed in the nonlinear 
regression, also the derivatives are implemented.  Note, to utilize derivatives 
the function needs to be in a \textcolor{teal}{TRANS} object. 
Eg when f=\textcolor{VioletRed}{logistic}(a*(\textcolor{teal}{x}-x0)), then 
the derivatives can be obtained with respect to the parameters a and x0 by 
\singlespacing 
\begin{example}[logisticex]Example of logistic function\\ 
\label{logisticex} 
\noindent \textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
\textcolor{VioletRed}{der}(a,x0)\\ 
f=\textcolor{VioletRed}{logistic}(a*(\textcolor{teal}{x}-x0));\\ 
/                                                             \\ 
 
\textcolor{teal}{x},x0,a=10,5,0.1\\ 
\textcolor{VioletRed}{call}(\textcolor{teal}{transa})\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\begin{note} 
In the previous example tr(d[x0] ahs the effect that \textcolor{teal}{TRANS} tr is first 
called, which makes that also d[a] and d[x] have been computed. Remember that 
the parse tree is computed from right to left. 
\end{note} 
\subsection{\textcolor{VioletRed}{npv}() Net present value}\index{npv()} 
\label{npv} 
 
\textcolor{VioletRed}{npv}(]interest,income1,‚Ä¶,incomen,time1,‚Ä¶,timen[)// 
Returns net present value for income sequence income1,...,incomen, occurring at times 
time1,‚Ä¶,timen when the interest percentage is \textcolor{teal}{interest}. 
\section{Probality distributions} 
\label{dist} 
There are currently the following functions relate to probability distributions. 
\begin{note} 
function \textcolor{VioletRed}{density}() can be used define density or probability 
function for any continuous or discrete distribution which can then be used 
to generate random numbers with \textcolor{VioletRed}{random}() function. 
\end{note} 
\subsection{\textcolor{VioletRed}{pdf}() Normal density}\index{pdf()} 
\label{pdf} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output  \tabto{3cm}  1  \tabto{5cm}   \textcolor{teal}{REAL}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  the value of the density. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args  \tabto{3cm} 0-2  \tabto{5cm}   \textcolor{teal}{REAL}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textcolor{teal}{Arg1} is the mean (default 0), \textcolor{teal}{Arg2} is the standard deviation 
(default 1). If sd is given, the mean must be given explicitly as teh first argument. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
See example drawclassex for an utilization of \textcolor{VioletRed}{pdf}() 
\end{note} 
\subsection{\textcolor{VioletRed}{cdf}() Cumulative distribution for normal and chi2}\index{cdf()} 
\label{cdf} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm}  1  \tabto{5cm}   \textcolor{teal}{REAL}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The value of the cdf. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args  \tabto{3cm}  1-3  \tabto{5cm}   \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textcolor{teal}{Arg1} the upper limit of the integral. When \textcolor{blue}{chi2->} is not present, then 
\textcolor{teal}{Arg2}, if present is the mean of the normal distribution (defaul 0), and \textcolor{teal}{Arg3}, if present, 
is the sd of the ditribution. If \textcolor{blue}{chi2->} is present, then oblicatory \textcolor{teal}{Arg2} is 
ifs the number of degrees of freedom for chi2-distribution. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{chi2}  \tabto{3cm}  N |0  \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent \noindent chi2  \tabto{3cm}  N |0  \tabto{5cm}    \tabto{7cm} 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\subsection{\textcolor{VioletRed}{bin}() Binomial probability}\index{bin()} 
\label{bin} 
\textcolor{VioletRed}{bin}(\textcolor{teal}{k},\textcolor{teal}{n},\textcolor{teal}{p})= 
The binomial probability that there will be \textcolor{teal}{k} successes 
in \textcolor{teal}{n} independent trials when in a 
single trial the probability of success is \textcolor{teal}{p}. 
\subsection{\textcolor{VioletRed}{negbin}() Negative binomial}\index{negbin()} 
\label{negbin} 
\textcolor{VioletRed}{negbin}(\textcolor{teal}{k},\textcolor{teal}{myy},\textcolor{teal}{theta})= 
The probability that a negative binomial random variable 
has value \textcolor{teal}{k} when the variable 
has mean \textcolor{teal}{myy} and variance \textcolor{teal}{myy}+\textcolor{teal}{theta}*\textcolor{teal}{myy}**2. 
\begin{note} 
\textcolor{VioletRed}{negbin}(k,n*p,0)= 
\textcolor{VioletRed}{bin}(k,n*p). 
\end{note} 
\begin{note} 
Sorry for the parameter inconsistency with \textcolor{VioletRed}{rannegbin}(). 
\end{note} 
\subsection{\textcolor{VioletRed}{density}() for any discrete or continues distribution}\index{density()} 
\label{density} 
Make density for for random numbers either with a function 
or histogram generated with classify. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 0-1 \tabto{5cm}  \textcolor{teal}{MATRIX}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textcolor{teal}{MATRIX} generated with \textcolor{VioletRed}{classify}() 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{func} \tabto{3cm}  N|1 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent codeoption defining the density. The \textcolor{teal}{x}-varaible is \$. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{xrange} \tabto{3cm} 0|2 \tabto{5cm}   \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Range of \textcolor{teal}{x}-values 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{discrete} \tabto{3cm} -1|0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Presence implies the the distribution is discrete 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
Actually the function generates a matrix having towo rows which 
has values for the cumulative distribution function. 
\end{note} 
\begin{note} 
When defining the density function, the user need not care about 
the scaling constant which makes the integral to integrate up to 1. 
\end{note} 
\singlespacing 
\begin{example}[densityex]Example of distributions\\ 
\label{densityex} 
\noindent ber=\textcolor{VioletRed}{density}(\textcolor{blue}{func->}(1-p+(2*p-1)*\$),\textcolor{blue}{xrange->}(0,1),\textcolor{blue}{discrete->});\,Bernoully\\ 
bim=\textcolor{VioletRed}{matrix}(100)\\ 
bim=\textcolor{VioletRed}{random}(ber)\\ 
\textcolor{VioletRed}{mean}(bim);\\ 
p*(1-p);\,\,{\color{ForestGreen}!theoretical variance}\\ 
\textcolor{VioletRed}{var}(bim);\\ 
pd=\textcolor{VioletRed}{density}(\textcolor{blue}{func->}\textcolor{VioletRed}{exp}(-0.5*\$*\$),\textcolor{blue}{xrange->}(-3,3))\,\,{\color{ForestGreen}!Normal distribution}\\ 
 
ra=\textcolor{VioletRed}{random}(pd);\\ 
f=\textcolor{VioletRed}{matrix}(1000)\\ 
f=\textcolor{VioletRed}{random}(pd)\\ 
da=\textcolor{VioletRed}{newdata}(f,\textcolor{blue}{read->}\textcolor{teal}{x})\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{min->},\textcolor{blue}{max->})\\ 
cl=\textcolor{VioletRed}{classify}(\textcolor{teal}{x}->\textcolor{teal}{x},\textcolor{blue}{xrange->});\\ 
fi=\textcolor{VioletRed}{drawclass}(cl,\textcolor{blue}{continue->}fcont)\\ 
fi=\textcolor{VioletRed}{drawclass}(cl,\textcolor{blue}{area->},\textcolor{blue}{continue->}fcont)\\ 
 
 
fi=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}\textcolor{VioletRed}{pdf}(\textcolor{teal}{x}),\textcolor{teal}{x}->\textcolor{teal}{x},\textcolor{blue}{xrange->},\textcolor{blue}{append->},\textcolor{blue}{continue->}fcont)\\ 
f=\textcolor{VioletRed}{matrix}(1000)\\ 
f=\textcolor{VioletRed}{rann}()\\ 
da=\textcolor{VioletRed}{newdata}(f,\textcolor{blue}{read->}\textcolor{teal}{x})\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{min->},\textcolor{blue}{max->})\\ 
cl=\textcolor{VioletRed}{classify}(\textcolor{teal}{x}->\textcolor{teal}{x},\textcolor{blue}{xrange->})\\ 
fi=\textcolor{VioletRed}{drawclass}(cl,\textcolor{blue}{histogram->},\textcolor{blue}{classes->}20,\textcolor{blue}{continue->}fcont)\\ 
den=\textcolor{VioletRed}{density}(cl);\\ 
fi=\textcolor{VioletRed}{drawline}(den,\textcolor{blue}{continue->}fcont)\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\section{Random number generators} 
\label{randomgen} 
Random number generators are taken from Ranlib library of Netlib. 
They can produce single \textcolor{teal}{REAL} variables or random \textcolor{teal}{MATRIX} objects. 
Random matrices are produced by defining first a matrix with \textcolor{VioletRed}{matrix}() 
funtion and putting that as the output. 
\subsection{\textcolor{VioletRed}{ran}() Uniform}\index{ran()} 
\label{ran} 
Uniform random numbers between 0 and 1 are generating usig Netlib function ranf. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm}  1 \tabto{5cm}   \textcolor{teal}{REAL} |MATRIX   \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The generated \textcolor{teal}{REAL} value or \textcolor{teal}{MATRIX}. 
Random matrix cab generated by defining first the matrix with \textcolor{VioletRed}{matrix}(). 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\singlespacing 
\begin{example}[ranex]\\ 
\label{ranex} 
\noindent \textcolor{VioletRed}{ran}();\\ 
\textcolor{VioletRed}{ran}();\\ 
cpu0=\textcolor{VioletRed}{cpu}()\\ 
A=\textcolor{VioletRed}{matrix}(10000,5)\\ 
A=\textcolor{VioletRed}{ran}()\\ 
\textcolor{VioletRed}{mean}(A);\\ 
\textcolor{VioletRed}{mean}(A,\textcolor{blue}{any->})\,{\color{ForestGreen}!mean over all elements}\\ 
\textcolor{VioletRed}{mean}(A(All,2));\\ 
\textcolor{VioletRed}{sd}(A);\\ 
\textcolor{VioletRed}{sd}(A,\textcolor{blue}{any->});\\ 
\textcolor{VioletRed}{min}(A);\\ 
\textcolor{VioletRed}{min}(A,\textcolor{blue}{any->});\\ 
\textcolor{VioletRed}{max}(A);\\ 
\textcolor{VioletRed}{cpu}()-cpu0;\\ 
 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
 
\subsection{\textcolor{VioletRed}{rann}() Normal}\index{rann()} 
\label{rann} 
Computes normally distributed pseudo random numbers into a \textcolor{teal}{REAL} variable or 
into \textcolor{teal}{MATRIX}. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm} 1 \tabto{5cm}  REAL|MATRIX \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The matrix to be generated must be defined earlier with \textcolor{VioletRed}{matrix}(). 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 0-2 \tabto{5cm}  num \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  rannn() produces N(0,1) variables, \textcolor{VioletRed}{rann}(mean) will produce 
N(mean,1) variables and \textcolor{VioletRed}{rann}(mean,sd) procuses N(mean,sd) variables. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\singlespacing 
\begin{example}[rannex]Random normal variates, illustrating also find\\ 
\label{rannex} 
\noindent rx=\textcolor{VioletRed}{rann}();\,\,{\color{ForestGreen}!Output is REAL}\\ 
rm=\textcolor{VioletRed}{matrix}(1000)\\ 
rm=\textcolor{VioletRed}{rann}()\\ 
rm(1,-5);\\ 
\textcolor{VioletRed}{print}(\textcolor{VioletRed}{mean}(rm),\textcolor{VioletRed}{sd}(rm),\textcolor{VioletRed}{min}(rm),\textcolor{VioletRed}{max}(rm))\\ 
\textcolor{teal}{Continue}=1\,{\color{ForestGreen}!an error}\\ 
large=\textcolor{VioletRed}{find}(rm,\textcolor{blue}{filter->}(\$.ge.2),any)\\ 
\textcolor{teal}{Continue}=0\\ 
large=\textcolor{VioletRed}{find}(rm,\textcolor{blue}{filter->}(\$.ge.2),\textcolor{blue}{any->})\\ 
100*\textcolor{VioletRed}{nrows}(large)/\textcolor{VioletRed}{nrows}(rm);\\ 
cpu0=\textcolor{VioletRed}{cpu}()\\ 
rm2=\textcolor{VioletRed}{matrix}(1000000)\\ 
rm2=\textcolor{VioletRed}{rann}(10,2)\,\,{\color{ForestGreen}!there cannot be arithmetix opreations in the right side}\\ 
\textcolor{VioletRed}{cpu}()-cpu0;\\ 
\textcolor{VioletRed}{mean}(rm2),\textcolor{VioletRed}{sd}(rm2),\textcolor{VioletRed}{min}(rm2),\textcolor{VioletRed}{max}(rm2);\\ 
large=\textcolor{VioletRed}{find}(rm2,\textcolor{blue}{filter->}(\$.ge.14),\textcolor{blue}{any->})\\ 
100*\textcolor{VioletRed}{nrows}(large)/\textcolor{VioletRed}{nrows}(rm2);\\ 
	!                                                                        \\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\begin{note} 
When generating a matrix with random numbers, there cannot be 
arithmetic operations on the right side.That means that code:\newline 
rm=\textcolor{VioletRed}{matrix}(100)\newline 
rm=2*\textcolor{VioletRed}{rann}()\newline 
would produce a \textcolor{teal}{REAL} value rm. 
\end{note} 
 
\subsection{\textcolor{VioletRed}{ranpoi}() Poisson}\index{ranpoi()} 
\label{ranpoi} 
\textcolor{VioletRed}{ranpoi}(\textcolor{teal}{myy}// 
returns a random Poisson variable with expected value and variance \textcolor{teal}{myy} 
\subsection{\textcolor{VioletRed}{ranbin}() Binomial}\index{ranbin()} 
\label{ranbin} 
 
Binomial random numbers between 0 and n are generating usig Netlib 
ignbin(n,p). Random matrix can generated by defining first 
the matrix with \textcolor{VioletRed}{matrix}(). 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm}  1 \tabto{5cm}   \textcolor{teal}{REAL} |MATRIX   \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The generated \textcolor{teal}{REAL} value or \textcolor{teal}{MATRIX} with 
number of successes. (\textbf{Jlp22} does not have explicit integer type object). 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args  \tabto{3cm} 2 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textcolor{teal}{Arg1} is the number of trials (n) and \textcolor{teal}{Arg2} is the probability 
of succes in one trial. 
	! 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\singlespacing 
\begin{example}[ranbinex]Random binomial\\ 
\label{ranbinex} 
\noindent \textcolor{VioletRed}{ranbin}(10,0.1);\\ 
\textcolor{VioletRed}{ranbin}(10,0.1);\\ 
A=\textcolor{VioletRed}{matrix}(1000,2)\\ 
\textcolor{teal}{Continue}=1\\ 
A(All,1)=\textcolor{VioletRed}{ranbin}(20,0.2)\\ 
\textcolor{teal}{Continue}=0\\ 
A=\textcolor{VioletRed}{matrix}(1000)\\ 
A=\textcolor{VioletRed}{ranbin}(20,0.2)\\ 
\textcolor{teal}{B}=\textcolor{VioletRed}{matrix}(1000)\\ 
\textcolor{teal}{B}=\textcolor{VioletRed}{ranbin}(20,0.2)\\ 
da=\textcolor{VioletRed}{newdata}(A,\textcolor{teal}{B},\textcolor{blue}{read->}(s1,s2))\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{min->},\textcolor{blue}{max->})\\ 
cl=\textcolor{VioletRed}{classify}(1,\textcolor{teal}{x}->s1,\textcolor{blue}{xrange->})\\ 
fi=\textcolor{VioletRed}{drawclass}(cl,\textcolor{blue}{histogram->},\textcolor{blue}{color->}\textcolor{teal}{Blue},\textcolor{blue}{continue->}fcont)\\ 
cl=\textcolor{VioletRed}{classify}(1,\textcolor{teal}{x}->s2,\textcolor{blue}{xrange->})\\ 
fi=\textcolor{VioletRed}{drawclass}(cl,\textcolor{blue}{histogram->},\textcolor{blue}{color->}\textcolor{teal}{Red},\textcolor{blue}{append->},\textcolor{blue}{continue->}fcont)\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
 
\subsection{\textcolor{VioletRed}{rannegbin}() Negative binomial}\index{rannegbin()} 
\label{rannegbin} 
The  function  returns  random  number  distributed  according to the 
negative binomial distribution. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{REAL} | \textcolor{teal}{MATRIX}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  the number of successes in 
independent Bernoul trials before r‚Äôth failure when 
p is the probability of success. \textcolor{VioletRed}{ranbin}(r,1)returns 1.7e37 and 
\textcolor{VioletRed}{ranbin}(r,0)returns 0. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
 
\begin{note} 
there are different ways to define the negative binomial distribution. In this definition 
a Poisson random variable with mean \$\lamda\$ is obtained by letting r go 
to infinity and defining p= \$\lamda\$/( \$\lamda\$+r) 
The mean E(\textcolor{teal}{x}) of this definition is p*r/(1-p) and the variance is V=p*r/(1-p)2. Thus given 
E(\textcolor{teal}{x}) and V, r and p can be obtained as follows: p=1- E(\textcolor{teal}{x}) /V and r= E(\textcolor{teal}{x})**2/(V- E(\textcolor{teal}{x})) . This is useful when 
simulating ‚Äòoverdispersed Poisson‚Äô variables. Sorry for the (temporary) inconsistency of parameters with 
function \textcolor{VioletRed}{negbin}(). 
\end{note} 
\begin{note} 
can also have a noninteger values. This is not in accordance with the above 
interpretation of the distribution, but it is compatible with interpreting negative binomial 
distribution as a compound gamma-Poisson distribution and it is useful when simulating 
overdispersed Poisson distributions. 
\end{note} 
\subsection{\textcolor{VioletRed}{select}() Random selection}\index{select()} 
\label{select} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{MATRIX}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent column vector with n elements indicating random 
selection of k 
elements out of n elements. The selection is without replacement, 
thus elements of the output are 1 or 0.. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 2 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  k=\textcolor{teal}{Arg1} and n=\textcolor{teal}{Arg2}. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\singlespacing 
\begin{example}[selectex]Random selection\\ 
\label{selectex} 
\noindent {\color{ForestGreen}** select 500 numbers without replacement from 10000}\\ 
{\color{ForestGreen}** output is vector of 10000 rows containing 0 or 1}\\ 
S=\textcolor{VioletRed}{select}(500,10000)\\ 
\textcolor{VioletRed}{nrows}(S),\textcolor{VioletRed}{mean}(S),\textcolor{VioletRed}{sum}(S),500/10000;\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{random}()  Any distribution}\index{random()} 
\label{random} 
usage \textcolor{VioletRed}{random}(\textcolor{teal}{dist}) where \textcolor{teal}{dist} is the density defined in \textcolor{VioletRed}{density}(). 
See \textcolor{VioletRed}{density}() for examples. 
\section{Interpolation} 
\label{inter} 
The following functions can be used for interpolation 
\subsection{\textcolor{VioletRed}{interpolate}() Linear interpolation}\index{interpolate()} 
\label{interpolate} 
Usage:// 
\textcolor{VioletRed}{interpolate}(x0,x1[,x2],y0,y1[,y2],x]// 
If arguments \textcolor{teal}{x2} and \textcolor{teal}{y2} are given then computes the value of the quadratic function at value 
\textcolor{teal}{x} going through the three points, otherwise computes the value of the linear function at value 
\textcolor{teal}{x} going through the two points. 
\begin{note} 
The argument \textcolor{teal}{x} need not be within the interval of given \textcolor{teal}{x} values (thus the function also 
extrapolates). 
\end{note} 
\subsection{\textcolor{VioletRed}{plane}() Interpolates an a plane}\index{plane()} 
\label{plane} 
Usage:\\ 
\textcolor{VioletRed}{plane}(\textcolor{teal}{x1},\textcolor{teal}{x2},\textcolor{teal}{x3},\textcolor{teal}{y1},\textcolor{teal}{y2},\textcolor{teal}{y3},z1,z2,z3,\textcolor{teal}{x},y]\\ 
The function computes the equation of plane going through the three points (\textcolor{teal}{x1},\textcolor{teal}{y1},z1), etc 
and computes the value of the \textcolor{teal}{z}-coordinate in point (\textcolor{teal}{x},\textcolor{teal}{y}). The three points defining the plane 
cannot be on single line. 
\subsection{\textcolor{VioletRed}{bilin}() Bilinear interpolation}\index{bilin()} 
\label{bilin} 
Usage:\\ 
\textcolor{VioletRed}{bilin}(\textcolor{teal}{x1},\textcolor{teal}{x2},\textcolor{teal}{y1},\textcolor{teal}{y2},z1,z2,z3,z4,\textcolor{teal}{x},y]\\ 
z1 is the value of function at point (\textcolor{teal}{x1},\textcolor{teal}{y1}), z2 is the value at point (\textcolor{teal}{x1},\textcolor{teal}{y2}), z3 is the value at 
(\textcolor{teal}{x2},\textcolor{teal}{y1}) and z4 is the value at (\textcolor{teal}{x2},\textcolor{teal}{y2}): the function is using bilinear interpolation to compute 
the value of the \textcolor{teal}{z}-coordinate in point (\textcolor{teal}{x},\textcolor{teal}{y}). The point (\textcolor{teal}{x},\textcolor{teal}{y}) needs not be within the square 
defined by the corner points, but it is good if it is. See Press et al. ? (or Google) for the principle 
of bilinear interpolation 
\section{List functions} 
\label{lists} 
The following list functions are available 
\subsection{Object lists} 
\label{listo} 
An object list is a list of named \textbf{Jlp22} object. See Shortcuts for implicit object 
lists and List functions for more details. Object lists can be used also as 
pointers to objects, see e.g. the selector option of the simulate() function. 
\subsection{\textcolor{VioletRed}{list}() Creates \textcolor{teal}{LIST}}\index{list()} 
\label{list} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm}  1 \tabto{5cm}   \textcolor{teal}{LIST}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The generated \textcolor{teal}{LIST} object. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm}  0-  \tabto{5cm}     \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  named objects. If an argument is \textcolor{teal}{LIST} it is ex+panded 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{mask} \tabto{3cm}  N|1-  \tabto{5cm}  REAl \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Which object are picked from the list of arguments. 
value 0 indicates that 
he object is dropped, positive value indicates how many variables are taken, 
negative value how many objects are dropped (thus 0 is equivalent to -1). mask- 
option is useful for creating sublists of long lists. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
The same object may appear several times in the list. (see \textcolor{VioletRed}{merge}()) 
\end{note} 
\begin{note} 
There may be zero arguments, which result in an empty list 
which can be updated later. 
\end{note} 
\begin{note} 
The index of object in a \textcolor{teal}{LIST} can be obtained using \textcolor{VioletRed}{index}(). 
\end{note} 
li=\textcolor{VioletRed}{list}(\textcolor{teal}{x1}...\textcolor{teal}{x3}); 
\textcolor{VioletRed}{index}(\textcolor{teal}{x2},li); 
\textcolor{teal}{Continue}=1 
\textcolor{VioletRed}{index}(x4,li);  ! error 
\textcolor{teal}{Continue}=0 
 
 
\singlespacing 
\begin{example}[list2ex]x\\ 
\label{list2ex} 
\noindent all=\textcolor{VioletRed}{list}();\,\,{\color{ForestGreen}! empty list}\\ 
sub=\textcolor{VioletRed}{list}();\\ 
nper=3\\ 
\textcolor{Red}{;do}(i,1,nper)\\ 
period\#"i"=\textcolor{VioletRed}{list}(ba\#"i",vol\#"i",age\#"i",harv\#"i")\\ 
sub\#"i"=\textcolor{VioletRed}{list}(@period\#"i",\textcolor{blue}{mask->}(-2,1,-1))\\ 
all=\textcolor{VioletRed}{list}(@all,@period\#"i")\,{\color{ForestGreen}!note that all is on both sides}\\ 
sub=\textcolor{VioletRed}{list}(@sub,@sub\#"i")\\ 
;end\,do\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{;list(part\%?) \textcolor{teal}{LIST} of objects having common part in name} 
\label{inpusub2b} 
;list() Makes a list of objects. The example shows how the list can be printed and how 
to print all objects in the list. This function is described also in section \ref{inpusub2} 
 
\singlespacing 
\begin{example}[subobjex2]ex2\\ 
\label{subobjex2} 
\noindent \textcolor{teal}{dataa}=\textcolor{VioletRed}{data}(\textcolor{blue}{in->},\textcolor{blue}{read->}(\textcolor{teal}{x},\textcolor{teal}{y}))\\ 
1,2\\ 
3,4\\ 
/  \\ 
\textcolor{teal}{lista}=;list(\textcolor{teal}{dataa}\%?);\\ 
{\color{ForestGreen}**Then all objects in the list are printed.}\\ 
@lista;\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{merge}() Merges LISTs and ILISTs by dropping duplicates.}\index{merge()} 
\label{merge} 
\textcolor{VioletRed}{merge}() will produce of a \textcolor{teal}{LIST} consisting of separate objects or values 
in the arguments. 
	! 
\hrule 
\vspace{0.2cm} 
\singlespacing 
\begin{example}[mergex]Merging list\\ 
\label{mergex} 
\noindent \textcolor{teal}{lista}=\textcolor{VioletRed}{list}(\textcolor{teal}{x1}...x5,\textcolor{teal}{x3});\\ 
{\color{ForestGreen}** LISTs must be expanded with @}\\ 
\textcolor{teal}{listb}=\textcolor{VioletRed}{merge}(@\textcolor{teal}{lista})\\ 
ilista=\textcolor{VioletRed}{ilist}(1...5,3);\\ 
ilistb=\textcolor{VioletRed}{merge}(ilista,\textcolor{blue}{ilist->});\\ 
{\color{ForestGreen}*** without ilist the arguments are interpreted as object indices}\\ 
ilistc=\textcolor{VioletRed}{merge}(ilista);\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{difference}() Difference of LISTs}\index{difference()} 
\label{difference} 
\textcolor{VioletRed}{difference}() removes elements from a \textcolor{teal}{LIST} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm}  1 \tabto{5cm}  \textcolor{teal}{LIST}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  the generated \textcolor{teal}{LIST}. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 2 \tabto{5cm}  LIST|OBJ  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The first argument is the \textcolor{teal}{LIST} from which the elements of of the 
are removed  If second argument is \textcolor{teal}{LIST} then all of its eleemts are remove, other wise 
it is assumed that the second argument is an object which is remode from the lisrt. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\singlespacing 
\begin{example}[diffex]fex\\ 
\label{diffex} 
\noindent lis=\textcolor{VioletRed}{list}(\textcolor{teal}{x1}...\textcolor{teal}{x3},z3..z5);\\ 
lis2=\textcolor{VioletRed}{list}(\textcolor{teal}{x1},z5);\\ 
liso=\textcolor{VioletRed}{difference}(lis,lis2);\\ 
liso2=\textcolor{VioletRed}{difference}(liso,z3);\\ 
\textcolor{teal}{Continue}=1\\ 
lisoer=\textcolor{VioletRed}{difference}(lis,z6);\,{\color{ForestGreen}! error occurs}\\ 
liser=\textcolor{VioletRed}{difference}(Lis,\textcolor{teal}{x3});\,\,{\color{ForestGreen}!error occurs}\\ 
\textcolor{teal}{Continue}=0\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{index}() Index in a \textcolor{teal}{LIST} or \textcolor{teal}{MATRIX}}\index{index()} 
\label{index} 
\textcolor{VioletRed}{index}(obj,list) return the index of object obj in \textcolor{teal}{LIST} list. Fuction returns zero 
if list is not in \textcolor{teal}{LIST} list.\\ 
\textcolor{VioletRed}{index}(valuea,\textcolor{teal}{matrixa}) returns the location of valuea in \textcolor{teal}{MATRIX} \textcolor{teal}{matrixa} when going 
the matrix through in row order. If valuea is not in \textcolor{teal}{matrixa} \textcolor{VioletRed}{index}() returns zero.\\ 
\textcolor{VioletRed}{index}(valuea,\textcolor{teal}{matrixa},\textcolor{blue}{any->}) returns the location of the first element which is greater or equal 
to valuea. 
\subsection{\textcolor{VioletRed}{len}() Length of \textcolor{teal}{LIST}, \textcolor{teal}{ILIST} or \textcolor{teal}{MATRIX}}\index{len()} 
\label{len} 
\textcolor{VioletRed}{len}(\textcolor{teal}{arg})  Lenghts for the following argument types 
\begin{itemize} 
\item  \textcolor{teal}{arg} is \textcolor{teal}{MATRIX} => len=the size of the matrix, i.e. 
\textcolor{VioletRed}{nrows}(\textcolor{teal}{arg})*\textcolor{VioletRed}{ncols}(\textcolor{teal}{arg}) 
 
\item  \textcolor{teal}{arg} is TEXT => len=the number of chracter in TEXT object 
 
\item  \textcolor{teal}{arg} is \textcolor{teal}{LIST} => len=the number of elements in \textcolor{teal}{LIST} 
\item  \textcolor{teal}{arg} is \textcolor{teal}{ILIST} => len=the number of elements in \textcolor{teal}{ILIST} 
\end{itemize} 
If \textcolor{teal}{arg} does not have a legal type for \textcolor{VioletRed}{len}(), then \textcolor{VioletRed}{len}(\textcolor{teal}{arg})=-1 if \textcolor{VioletRed}{len}() has 
option \textcolor{blue}{any->}, otherwise an error is produced. 
\subsection{\textcolor{VioletRed}{ilist}() \textcolor{teal}{ILIST} of integers}\index{ilist()} 
\label{ilist} 
Generates a list of integers which can be used as indexes. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm}  1 \tabto{5cm}   \textcolor{teal}{ILIST}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The generated \textcolor{teal}{ILIST}. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm}  0-  \tabto{5cm}  \textcolor{teal}{REAL}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Values to be put into \textcolor{teal}{ILIST}, or the dimesion 
of the \textcolor{teal}{ILIST} when values are given in \textcolor{blue}{values->},  or variables whose indeces 
in in the data are put into the \textcolor{teal}{ILIST}. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{data} \tabto{3cm} N|1 \tabto{5cm}   \textcolor{teal}{DATA} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The \textcolor{teal}{DATA} from whose variable indeces are obtained. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{extra}  \tabto{3cm}  1 \tabto{5cm}  \textcolor{teal}{REAL}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Extra space reserved for later updates of the \textcolor{teal}{ILIST}. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{values}  \tabto{3cm} N|1- \tabto{5cm}   \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Values to be put into \textcolor{teal}{ILIST} when dimesnion is determined as the 
only argument 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
\textcolor{teal}{ILIST} is a new object whose all utilization possiblities are not yet explored. 
It will be used e.g. when developing factory optimization. 
\end{note} 
\begin{note} 
eote 
Using \textcolor{VioletRed}{ilist}() by giving the dimension as argument and values with \textcolor{blue}{values->} option 
imitates the definition of a matrix (column vector). The structure of \textcolor{teal}{ILIST} object 
is the same as \textcolor{teal}{LIST} object which can be used in matrix computations. 
\end{note} 
\singlespacing 
\begin{example}[ilistex]ILIST examples\\ 
\label{ilistex} 
\noindent {1,4,5};\\ 
{4...1};\\ 
A=\textcolor{VioletRed}{matrix}(4,4)\\ 
A({1,5},{3}=\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{putlist}() puts into \textcolor{teal}{LIST} an object}\index{putlist()} 
\label{putlist} 
Usage:\\ 
\textcolor{VioletRed}{putlist}(\textcolor{teal}{LIST},OBJ)\\ 
put OBJ into \textcolor{teal}{LIST} 
\subsection{\textcolor{VioletRed}{table}() Crossses two LISTs}\index{table()} 
\label{table} 
Usage:\\ 
Output=\textcolor{VioletRed}{table}(rowlist,collist)\\ 
This can be used in factory optimizations 
 
 
 
 
 
call j\_getname(ivout) 
call j\_getname(j\_o(ivout)\%i(6)) 
\textcolor{VioletRed}{write}(6,*)'jdjdj ',j\_oname(1:j\_loname) 
\subsection{\textcolor{teal}{lista}(2,-4) makes \textcolor{teal}{LIST} from part of \textcolor{teal}{LIST} \textcolor{teal}{lista}} 
\label{sublist} 
A list can be made taking a part of \textcolor{teal}{LIST}. 
\singlespacing 
\begin{example}[sublistex]taking sublist\\ 
\label{sublistex} 
\noindent \textcolor{teal}{lista}=\textcolor{VioletRed}{list}(\textcolor{teal}{x1}...x5);\\ 
lista2\%5=\textcolor{teal}{lista}(2,-5);\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\section{TEXT and \textcolor{teal}{TXT} text objects} 
\label{texts} 
The are now two object types for text. 
\subsection{\textcolor{VioletRed}{text}() Creates TEXT}\index{text()} 
\label{text} 
Text objects are created as a side product by many \textbf{Jlp22} functions. Text objects can be created 
directly by the \textcolor{VioletRed}{text}() function which works in a nonstandard way. The syntax is:\\ 
output=\textcolor{VioletRed}{text}()\\ 
‚Ä¶\\ 
// 
 
The input paragraph ends exceptionally with '//' and not with '/'. The lines within the input 
paragraph of text are put literally into the text object (i.e. even if there would be input 
programming functions or structures included) 
\subsection{\textcolor{VioletRed}{txt}() Creates \textcolor{teal}{TXT}}\index{txt()} 
\label{txt} 
Works as \textcolor{VioletRed}{text}(). The new \textcolor{teal}{TXT} object is used 
to implement \textcolor{Red}{;incl} and Gnuplot -figures. 
\section{File handling} 
\label{file} 
The following functions can handle files. 
\subsection{\textcolor{VioletRed}{exist\_f}(): does a file exist}\index{exist\_f()} 
\label{existf} 
looks whether a file with the name given in 
the character constant  argument exists. 
\begin{note} 
In the previous versions of \textbf{Jlp22} same function was used for files and objects. 
\end{note} 
\subsection{\textcolor{VioletRed}{delete\_f}() Deletes files}\index{delete\_f()} 
\label{delete_f} 
The function \textcolor{VioletRed}{delete\_f}() deletes all files having the names given in the arguments. 
The arguments can be character constants or character variables associated with character 
constants. After deleting a file whose name is given in character variable, the variable still refers to the same 
chracter constant. 
\singlespacing 
\begin{example}[deletfex]Deletef file\\ 
\label{deletfex} 
\noindent \textcolor{VioletRed}{write}('delete\_fex.txt',\$,'a=\textcolor{VioletRed}{matrix}(2,4,\textcolor{blue}{do->});')\\ 
\textcolor{VioletRed}{write}('delete\_fex.txt',\$,'\textcolor{VioletRed}{delete\_o}(a)')\\ 
\textcolor{VioletRed}{write}('delete\_fex.txt',\$,'a;')\\ 
\textcolor{VioletRed}{close}('delete\_fex.txt')\\ 
\textcolor{Red}{;incl}(delete\_fex.txt)\\ 
\textcolor{VioletRed}{delete\_f}('delete\_fex.txt')\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{print\_f}() prints files}\index{print\_f()} 
\label{printf} 
Prints the files associated with the \textcolor{teal}{CHAR} arguments\\ 
\textcolor{blue}{maxlines->}  tells the maximum number of lines to be printed, default the value of \textcolor{teal}{Maxlines} 
\subsection{\textcolor{VioletRed}{close}() Closes a file}\index{close()} 
\label{close} 
\textcolor{VioletRed}{close}(file) closes an open file where file is either a character constant 
or character variable associated with a file. 
\begin{note} 
No open(9)function is needed. An file is opened when it is first time in \textcolor{VioletRed}{write}() or 
\textcolor{VioletRed}{print}(\textcolor{blue}{file->}). 
\end{note} 
\subsection{\textcolor{VioletRed}{showdir}() shows the current directory}\index{showdir()} 
\label{showdir} 
\begin{note} 
showdir is defined in the system dependent file jsysdep\_gfortran.f90. 
Using other compliers it may be neccessary to change the definition 
\end{note} 
\subsection{\textcolor{VioletRed}{setdir}() sets the current directory}\index{setdir()} 
\label{setdir} 
\begin{note} 
setdir is defined in the system dependent file jsysdep\_gfortran.f90. 
Using other complilers it may be neccessary to change the definition 
\end{note} 
\subsection{\textcolor{VioletRed}{thisfile}() Name of the current \textcolor{Red}{;incl} -file}\index{thisfile();incl} 
\label{thisfile} 
The name of the current include file is returned as a character variable by: 
out=\textcolor{VioletRed}{thisfile}() 
This is useful when defining shortcuts for commands that include sections from an include file. 
Using this function the shortcuts work even if the name of the include file is changed. See file 
jexamples.inc for an application 
\subsection{\textcolor{VioletRed}{filestat}() Information of a file}\index{filestat()} 
\label{filestat} 
Function \textcolor{VioletRed}{filestat}(filename) prints the size of the 
file in bytes (if available) and the time the file was last accessed 
\section{Io-functions} 
\label{io} 
Theree are following io functions 
\subsection{\textcolor{VioletRed}{read}() Reads from file}\index{read()} 
\label{read} 
\textcolor{VioletRed}{read}(file,format[,obj1,‚Ä¶,objn][,\textcolor{blue}{eof->}var] [,\textcolor{blue}{wait->}])// 
Reads real variables or matrices from a file. If there are no objects 
to be read, then a record is 
by-passed.// 
Arguments: 
file the file name as a character variable or a character constant// 
format// 
\textcolor{teal}{b}' unformatted (binary) data // 
'\textcolor{teal}{bn}' unformatted, but for each record there is integer for the size of the record. Does 
not work when reading matrices. 
'bis' binary data consisting of bytes, each value is converted to real value (the only 
numeric data type in J). This works only when reading matrices.// 
'(‚Ä¶.)' a Fortran format. Does not work when reading matrices. 
\$ the * format of Fortran// 
obj1,‚Ä¶,objn 
\textbf{Jlp22} objects// 
Options:// 
eof Defines the variable which indicates the end of file condition of the file. If the end 
of the file is not reached the variable gets the value 0, and when the end of file is 
reached then the variable gets value 1 and the file is closed without extra notice. 
 
When \textcolor{blue}{eof->} option is not present and the file ends then an error 
condition occurs and the file is closed.// 
wait \textbf{Jlp22} is waiting until the file can be opened. Useful in client-server applications. See 
chapter \textbf{Jlp22} as a server. 
\begin{note} 
Use \textcolor{VioletRed}{ask}() or \textcolor{VioletRed}{askc}() to read values from the terminal when reading lines from an 
include file. 
\end{note} 
\begin{note} 
When reading matrices, their shapes need to 
be defined earlier with \textcolor{VioletRed}{matrix}() 
hfunction. 
\end{note} 
\subsection{\textcolor{VioletRed}{write}() Writes to console or to file}\index{write()} 
\label{write} 
\textcolor{VioletRed}{write}(file,format,arg1,‚Ä¶,argn)\\ 
Writes real values and text to a file or to the console. \\ 
 
Arguments:\\ 
file variable \$ (indicating the console), or the name of the file as a character variable 
or a character constant.\\ 
format 
\begin{itemize} 
\item \$ indicates the '*' format of Fortran for numeric values. The numeric values are converted to single precision. 
This format can be used also when there are \textcolor{teal}{CHAR} and \textcolor{teal}{REAL} arguments. 
\item \$\$ indicates the '*' format of Fortran, works only for numeric values. 
The numeric values are printed in double precision. 
\item '\textcolor{teal}{b}' The values are converted to single precision and written to a binary file 
\item '\textcolor{teal}{B}' The values are written to a binary file in double precision 
\item A Fortran format statement, e.g. ($\sim$the values were $\sim$,4f6.0) when there are numeric values to be written 
\item If there are no arguments and the format is a \textcolor{teal}{CHAR}, then this is written. 
\end{itemize} 
For other arguments the following rules apply: 
\begin{itemize} 
\item If the format is \$ and the arguments are \textcolor{teal}{REAL} or \textcolor{teal}{CHAR} in any order, arguments are written 
\item If there is one \textcolor{teal}{MATRIX} argument then this matrix is written row after 
row using the format indicated. 
\item If there are several arguments which are \textcolor{teal}{REAL} or \textcolor{teal}{MATRIX}, then the values are put into a vector which is then written. If format is '\textcolor{teal}{b}' or  \$ then 
the values are converted to single precision. For matrices, all values written 
without paying attention to to number of rows or columns. If matrices needs to be written 
row by row, the matrices can be put into a single matrix with matrix operations 
and then this matrix can be used as a single argument (after file and format). 
\end{itemize} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{tab} \tabto{3cm} -1-1 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  if format is a Fortran format then, \textcolor{blue}{tab->} option indicates that sequences of 
spaces are replaced by tab character so that written text can be easily converted 
to Ms Word tables. If there are no decimals after the decimal point also the 
decimal point is dropped. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
There have been options to describe the format with tab and 
width parameters but they may not work now. If such formats are needed, 
I can reinstall them. 
\end{note} 
\begin{note} 
Also text objects can be written, but I must check how this works now. 
\end{note} 
 
\subsection{\textcolor{VioletRed}{print}() Prints objects to file or console}\index{print()} 
\label{print} 
\textcolor{VioletRed}{print}(arg1,‚Ä¶,argn[,\textcolor{blue}{maxlines->}][,\textcolor{blue}{data->}][,\textcolor{blue}{row->}] 
[,\textcolor{blue}{file->}][,\textcolor{blue}{func->}][,\textcolor{blue}{debug->}])// 
Print values of variables or information about objects.// 
Arguments: 
arg1,‚Ä¶,argn 
Options: 
maxlines&-1|1&\textcolor{teal}{REAL}& the maximum number of lines printed for matrices, default 100. 
any& -1|0 && if the argument is the name of a text file, then \textcolor{blue}{any->} indicates that 
the file is read to the end and the number  of lines is put into variable \textcolor{teal}{Accepted}. 
data&-1|1 &\textcolor{teal}{DATA} & data sets. If \textcolor{blue}{data->} option is given then arguments must be ordinary real 
variables obtained from data. 
row if a text object is printed, then the first value given in the \textcolor{blue}{row->} option gives the 
first line to be printed. If a range of lines is printed, then the second argument 
must be the negative of the last line to be printed (e.q. \textcolor{blue}{row->}(10,-15)).Note 
that \textcolor{VioletRed}{nrows}() function can be used to get the number of rows. 
file the file name as a character variable or a character constant. Redirects the output 
of the \textcolor{VioletRed}{print}() function to given file. After printing to the file, the file remains 
open and must be explicitly closed (\textcolor{VioletRed}{close}(‚Äòfile‚Äô)) if it should be opened in 
a different application. 
form when a matrix is printed, the format for a row can be given as a Fortran format, 
e.g. form ‚Äò(15f6.2)‚Äô may be useful when printing a correlation matrix. 
debug the associated real variable part is first printed, and thereafter the tow associated 
two integer vectors, the real vector and the double precision vector 
func all functions available are printed 
\begin{note} 
For simple objects, all the object content is printed, for complicates objects only 
summary information is printed. \textcolor{VioletRed}{print}(\textcolor{teal}{Names}) will list the names, types and sizes of all 
named \textbf{Jlp22} objects. The printing format is dependent on the object type. 
\end{note} 
\begin{note} 
\textcolor{VioletRed}{print}() function can be executed for the output of a \textbf{Jlp22} command 
by writing ';' or ';;' at the end of the line. The excution of implied \textcolor{VioletRed}{print}() 
is dependent on the value of \textcolor{teal}{Printoutput}. If \textcolor{teal}{printoutput} =0, 
then the output is not printed, If \textcolor{teal}{printoutput} =1, then ';' is 
causing printing, if \textcolor{teal}{Printoutput} =2 then only ';;'-outputs are 
printed, and if \textcolor{teal}{Printoutput} =3, then both ';' and ';;' outputs are printed. 
\end{note} 
\begin{note} 
it was earlier to print a file using this function, but now function Print\_f must be 
used fro taht purpose. 
\end{note} 
 
 
\subsection{\textcolor{VioletRed}{print\_f}() prints files}\index{print\_f()} 
\label{printf} 
Prints the files associated with the \textcolor{teal}{CHAR} arguments\\ 
\textcolor{blue}{maxlines->}  tells the maximum number of lines to be printed, default the value of \textcolor{teal}{Maxlines} 
\subsection{\textcolor{VioletRed}{ask}() Asks \textcolor{teal}{REAL}}\index{ask()} 
\label{ask} 
\textcolor{VioletRed}{ask}([var][,\textcolor{blue}{default->}][,\textcolor{blue}{q->}][,\textcolor{blue}{exit->}])// 
Ask values for a variable while reading commands from an include file.// 
Argument:// 
var 0 or one real variable (need not exist before) 
Options: 
default default values for the asked variables 
q text used in asking 
exit if the value given in this option is read, then the control returns to command level 
similarly as if an error would occur. If there is no value given in this option, then 
the exit takes place if the text given as answer is not a number. 
\begin{note} 
If there are no arguments, then the value is asked for the output variable, otherwise for 
the argument. The value is interpreted, so it can be defined using transformations. 
Response with carriage return indicates that the variables get the default values. If there is no 
\textcolor{blue}{default->} option, then the previous value of the variable is maintained (which is also printed 
as the \textcolor{blue}{default->} value in asking) 
\end{note} 
 
\singlespacing 
\begin{example}[askex]Examples for \textcolor{VioletRed}{ask}()\\ 
\label{askex} 
\noindent a=\textcolor{VioletRed}{ask}(\textcolor{blue}{default->}8)\\ 
\textcolor{VioletRed}{ask}(a,\textcolor{blue}{default->}8)\\ 
\textcolor{VioletRed}{print}(\textcolor{VioletRed}{ask}()+\textcolor{VioletRed}{ask}())\,{\color{ForestGreen}! ask without argument is a numeric function}\\ 
\textcolor{VioletRed}{ask}(v,\textcolor{blue}{q->}'Give\,v>')\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{askc}() Asks \textcolor{teal}{CHAR}}\index{askc()} 
\label{askc} 
Usage :// 
\textcolor{VioletRed}{askc}(chvar1[,\textcolor{blue}{default->}][,\textcolor{blue}{q->}][,\textcolor{blue}{exit->}]) 
Asks values for character variables when reading commands from an include file. 
 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 0-4 \tabto{5cm}  \textcolor{teal}{REAL} | \textcolor{teal}{ILIST} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent row and column range as explained below. 
 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args  \tabto{3cm}  0|1  \tabto{5cm}  \textcolor{teal}{CHAR}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  character variable (need not exist before) 
 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{default} \tabto{3cm} 0|1 \tabto{5cm}  \textcolor{teal}{CHAR}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  default character stings 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{q}  \tabto{3cm}  0|1  \tabto{5cm}  \textcolor{teal}{CHAR}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent text used in asking 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{exit} \tabto{3cm}  -1|0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  if the character constant or variable given in this option is read, then the control 
return to command level similarly as if an error would occur. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
Note 
Response with carriage return indicates that the variable gets the default value. If there is no 
\textcolor{blue}{default->} option, then the variable will be unchanged (i.e. it may remain also as another 
object type than character variable). 
\end{note} 
\begin{note} 
If there are no arguments, then the value is asked for the output variable, otherwise for 
the arguments. 
\end{note} 
\subsection{\textcolor{VioletRed}{printresult}() and \textcolor{VioletRed}{printresult2}() for ending ; and ;;}\index{printresult()printresult2()} 
\label{printresult} 
The \textbf{Jlp22} interpreter translates ';'  at the end of the 
line to a call to \textcolor{VioletRed}{printresult}() function and ';;' to a call to \textcolor{VioletRed}{printresult2}() 
The output of a function is printed by writing ';' or ';;' at the end of the line. The excution of implied \textcolor{VioletRed}{print}() 
is dependent on the value of \textcolor{teal}{Printoutput}. If \textcolor{teal}{printoutput} =0, 
then the output is not printed, If \textcolor{teal}{printoutput} =1, then ';' is 
causing printing, if \textcolor{teal}{Printoutput} =2 then only ';;'-outputs are 
printed, and if \textcolor{teal}{Printoutput} =3, then both ';' and ';;' outputs are printed. 
\begin{note} 
\textcolor{VioletRed}{printresult}() and \textcolor{VioletRed}{printresult2}() are  simple functions 
which just test the value of 
\textcolor{teal}{Printoutput} and then call the  printing subroutine, if needed. 
\end{note} 
\section{Matrix functions} 
\label{matrixs} 
\textbf{Jlp22} contains now the following matrix functions. 
\subsection{Matrices and vectors} 
\label{matrixo} 
Matrices and vectors are generated with the \textcolor{VioletRed}{matrix}() function or they are 
produced by matrix operations, matrix functions or by other \textbf{Jlp22} functions. E.g. 
the \textcolor{VioletRed}{data}() function is producing a data matrix as a part of the compound data 
object. Matrix elements can be used in arithmetic operations as input or output 
in similar way as real variables. 
See Matrix computations. 
\subsection{\textcolor{VioletRed}{matrix}() Creates \textcolor{teal}{MATRIX}}\index{matrix()} 
\label{matrix} 
Function \textcolor{VioletRed}{matrix}() creates a matrix and puts \textcolor{teal}{REAL} values to the elements. Element values 
can be read from the input paragraph, file, or the values can be generated 
using \textcolor{blue}{values->} option, or sequential values can be generated 
using \textcolor{blue}{do->} option. Function \textcolor{VioletRed}{matrix}() can generate a diagonal and block diagonal matrix. 
A matrix can be generated from submatrices by using matrices as arguments 
of the  \textcolor{blue}{values->} option. It should be noted that matrices are stored in row order. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm}  1 \tabto{5cm}   \textcolor{teal}{MATRIX} | \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  If a 1x1 matrix is defined, the output will be \textcolor{teal}{REAL}. 
The output can be a temporary matrix without name, if \textcolor{VioletRed}{matrix}() is an argument 
of an arithmetic function  or matrix function. If no element values are 
given in \textcolor{blue}{values->} or obtained from \textcolor{blue}{in->} input, all elemets get value zero. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 0-2 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The dimension of the matrix. The first argument is the number of rows, 
the second argument, if present, the number of columns.  If the matrix is generated from submatrices given in \textcolor{blue}{values->}, then the dimensions 
refer to the submatrix rows and submatrix columns. If there are no arguments, then the 
it should be possible to infer the dimensions from \textcolor{blue}{values->} option. If the 
first argument is \textcolor{teal}{Inf}, the the number of rows is determined by the number 
number of lines in source determined by \textcolor{blue}{in->}. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{in} \tabto{3cm} N|0|1 \tabto{5cm}  \textcolor{teal}{CHAR} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The input for values. \textcolor{blue}{in->} means that values are read in from 
the following input paragraps, \textcolor{blue}{in->}\textcolor{teal}{file} means that the values are read from file. 
in both cases a record must contain one row for the matrix. 
If there is reading error and values are read from the terminal, \textbf{Jlp22} gives 
possibility to continue with better luck, otherwise an error occurs. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{values} \tabto{3cm} N|1- \tabto{5cm}   \textcolor{teal}{REAL}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent values or \textcolor{teal}{MATRIX} objects put to the matrix. The argumenst of 
\textcolor{blue}{values->} option go in the regular way 
through the interpreter, so the values can be obtained by computations. If only one \textcolor{teal}{REAL} value is 
given then all diagonal elements are put equal to the value (ohers will be zero), 
if \textcolor{blue}{diag->} option is present, otherwise all elements are put equal to this value. If matrix dimensions 
are given, and there are fewer values than is the size the matrix, matrix is 
filled row by row using all values given in 
\textcolor{blue}{values->}. If there are more values as is the size, an error occurs unless there is 
\textcolor{blue}{any->} option present. 
Thus \textcolor{VioletRed}{matrix}(N,N,\textcolor{blue}{values->}1) generates the identity matrix. 
If value-> refers to one \textcolor{teal}{MATRIX},and \textcolor{blue}{diag->} is present then a block diagonal 
matrix is generated. Without \textcolor{blue}{diag->}, a partitioned matrix is generated having all 
submatrices equal 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{do}  \tabto{3cm} N|0-3 \tabto{5cm}  \textcolor{teal}{REAL}   \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  A matrix of number sequences is generated, as followsws: \newline 
\textcolor{blue}{do->} Values 1,2,...,\textcolor{teal}{arg1} \textcolor{teal}{x} \textcolor{teal}{arg2} are put into the matrix in the row order. \newline 
\textcolor{blue}{do->}5 Values 5,6,...,\textcolor{teal}{arg1} \textcolor{teal}{x} \textcolor{teal}{arg2}+4 are put into the matrix \newline 
\textcolor{blue}{do->} 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
When reading matrix from the following input paragraph, the numbers must be separated with commas. It would 
otherwise easy to read alos comma separated numbers, but because the lines are obtained throug 
input programming, the spaces would mix up input programmig. If the numbers are separated with 
spaces either a reading error coccurs or warning like \\ 
*wrn* the number of values            7  does not agree with the number of elements 
\end{note} 
\singlespacing 
\begin{example}[matrixex]Example of generatig matrices\\ 
\label{matrixex} 
\noindent A=\textcolor{VioletRed}{matrix}(3,\\ 
 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
 
\subsection{\textcolor{VioletRed}{nrows}() Number of rows in \textcolor{teal}{MATRIX}, TEXT or \textcolor{teal}{BITMATRIX}}\index{nrows()} 
\label{nrows} 
can be used as: 
\begin{itemize} 
\item  \textcolor{VioletRed}{nrows}(\textcolor{teal}{MATRIX}) 
\item  \textcolor{VioletRed}{nrows}(TEXT) 
\item  \textcolor{VioletRed}{nrows}(\textcolor{teal}{BITMATRIX}) 
\end{itemize} 
\begin{note} 
If the argument has another object type, and error occurs 
\end{note} 
\subsection{\textcolor{VioletRed}{ncols}() Number of columns in \textcolor{teal}{MATRIX} or \textcolor{teal}{BITMATRIX}}\index{ncols()} 
\label{ncols} 
can be used as: 
\begin{itemize} 
\item  \textcolor{VioletRed}{nrows}(\textcolor{teal}{MATRIX}) 
\item  \textcolor{VioletRed}{nrows}(\textcolor{teal}{BITMATRIX}) 
\end{itemize} 
\begin{note} 
If the argument has another object type, and error occurs 
\end{note} 
\subsection{\textcolor{VioletRed}{t}() Transpose of a \textcolor{teal}{MATRIX} or a \textcolor{teal}{LIST}}\index{t()} 
\label{t} 
\textcolor{VioletRed}{t}(\textcolor{teal}{MATRIX}) is the transpose of a \textcolor{teal}{MATRIX}. As \textcolor{teal}{LIST} objects can now 
be used in matrix computations, \textcolor{VioletRed}{t}(\textcolor{teal}{LIST}) is also available. 
\begin{note} 
Multiplying a matrix by the transpose of a matrix can be made by 
making new operation '*. 
\end{note} 
\begin{note} 
The argument matrix can also be a submatrix expression. 
\end{note} 
\subsection{\textcolor{VioletRed}{inverse}() Inverse and condition of \textcolor{teal}{MATRIX}}\index{inverse()} 
\label{inverse} 
\textcolor{VioletRed}{inverse}(\textcolor{teal}{matrixa}) computes the inverse of a square \textcolor{teal}{MATRIX} \textcolor{teal}{matrixa}. The function utilized dgesv funtion 
of netlib. If the argument has type \textcolor{teal}{REAL}, then the reciprocal is computed, 
and the output will also have type \textcolor{teal}{REAL}. An error occurs, if \textcolor{teal}{matrixa} is not 
a square matrix or \textcolor{teal}{REAL}, or \textcolor{teal}{matrixa} is singular according to dgesv. 
If the output is a named object (i.e. not a temporary object), the condition number is stored in \textcolor{teal}{REAL} with name Output\%condition. 
\begin{note} 
The condition number is \textbf{not} put into input\%conditon which could be more logical. 
\end{note} 
\singlespacing 
\begin{example}[inverseex]inverse() and condition number\\ 
\label{inverseex} 
\noindent \textcolor{teal}{matrixa}=\textcolor{VioletRed}{matrix}(4,4)\\ 
\textcolor{teal}{matrixa}=1\\ 
{\color{ForestGreen}***  well conditoned matrix}\\ 
\textcolor{teal}{matrixa}(\textcolor{blue}{diag->})=10\\ 
matrixa;\\ 
\textcolor{teal}{matrixb}=\textcolor{VioletRed}{inverse}(\textcolor{teal}{matrixa});\\ 
\textcolor{teal}{matrixb}\%condition;\\ 
{\color{ForestGreen}** almost singular matrix}\\ 
\textcolor{teal}{matrixa}(\textcolor{blue}{diag->})=1.05\\ 
\textcolor{teal}{matrixb}=\textcolor{VioletRed}{inverse}(\textcolor{teal}{matrixa});\\ 
\textcolor{teal}{matrixb}\%condition;\\ 
{\color{ForestGreen}** figure of condition number}\\ 
\textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
\textcolor{teal}{matrixa}(\textcolor{blue}{diag->})=diag\\ 
\textcolor{teal}{matrixb}=\textcolor{VioletRed}{inverse}(\textcolor{teal}{matrixa})\\ 
/                                                                                  \\ 
{\color{ForestGreen}** Note that the lower bound is equal to the dimension}\\ 
\textcolor{teal}{figa}=\textcolor{VioletRed}{draw}(\textcolor{teal}{x}->diag,\textcolor{blue}{xrange->}(1.05,50),\textcolor{blue}{func->}\textcolor{teal}{transa}(\textcolor{teal}{matrixb}\%condition),\\ 
\textcolor{blue}{color->}\textcolor{teal}{Blue},\textcolor{blue}{continue->}fcont)\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\begin{note} 
instead of writing c=\textcolor{VioletRed}{inverse}(a)*\textcolor{teal}{b}, it is faster and more accurate to 
write c=\textcolor{VioletRed}{solve}(a,\textcolor{teal}{b}) 
\end{note} 
\subsection{\textcolor{VioletRed}{solve}() Solves a linear equation A*\textcolor{teal}{x}=\textcolor{teal}{b}}\index{solve()} 
\label{solve} 
A linear matrix equation A*\textcolor{teal}{x}=\textcolor{teal}{b} can be solved for \textcolor{teal}{x} with code\\ 
\textcolor{teal}{x}=\textcolor{VioletRed}{solve}(A,\textcolor{teal}{b}) 
\begin{note} 
\textcolor{teal}{x}=\textcolor{VioletRed}{solve}(A,\textcolor{teal}{b}) is faster and more accurate than \textcolor{teal}{x}=\textcolor{VioletRed}{inverse}(A)*\textcolor{teal}{b} 
\end{note} 
\begin{note} 
solve works also if A and \textcolor{teal}{b} are scalars. This is useful when 
working with linear systems which start to grow from scalars. 
\end{note} 
\subsection{\textcolor{VioletRed}{qr}() QR decomposition of \textcolor{teal}{MATRIX}}\index{qr()} 
\label{qr} 
Makes QR decomposition of a \textcolor{teal}{MATRIX} This can be used to study if columns of a are linearly 
dependent. \textbf{Jlp22} prints a matrix which indicates the structure of the upper diagonal matrix R in the 
qr decomposition. If column k is linearly dependent on previous columns the k‚Äôth diagonal 
element is zero. If output is given, then it will be the r matrix. Due to rounding errors diagonal 
elements which are interpreted to be zero are not exactly zero. Explicit r matrix is useful if user 
thinks that \textbf{Jlp22} has not properly interpreted which diagonal elements are zero. 
In \textbf{Jlp22}  \textcolor{VioletRed}{qr}() may be useful when it is studied why a matrix which shoudl 
be nonsingular turns out to be singular in \textcolor{VioletRed}{inverse}() or \textcolor{VioletRed}{solve}(). 
\textcolor{VioletRed}{qr}() is using  the subroutine dgeqrf from Netlib. 
An error occurs if the argument is not \textcolor{teal}{MATRIX} or if dgeqrf produces 
error code, which is just printed. 
Now the function just shows the linear dependencies, as sho in the examples. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{MATRIX} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent A m-by-n \textcolor{teal}{MATRIX}. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\subsection{\textcolor{VioletRed}{eigen}() Eigenvector and eigenmatrix from \textcolor{teal}{MATRIX}}\index{eigen()} 
\label{eigen} 
Computes eigenvectors and eigenvalues of a square matrix. The eigenvectors are stored as 
columns in matrix output\%matrix and the eigenvalues are stored as a row vector 
output\%values. The eigenvalues and eigenvectors are sorted from smallest to larges eigenvalue. 
Netlib subroutines DLASCL, DORGTR, DSCAL, DSTEQR, DSTERF, DSYTRD, 
XERBLA, DLANSY and DLASCL are used. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 1 \tabto{5cm}  MAT \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  A square \textcolor{teal}{MATRIX}. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\subsection{\textcolor{VioletRed}{sort}() Sorts \textcolor{teal}{MATRIX}}\index{sort()} 
\label{sort} 
Usage:\\ 
\textcolor{VioletRed}{sort}(a,\textcolor{blue}{key->}(key1[,key2]))\\ 
Makes a new matrix obtained by sorting all matrix columns of \textcolor{teal}{MATRIX} a according to one or two columns. 
Absolute value of key1 and the value of key2 must be legal column numbers. 
If key1 is 
positive then the columns are sorted in ascending order, 
if key1 is negative then the columns 
are sorted in descending order. If two keys are given, then first key dominates. 
\begin{note} 
It is currently 
assumed that if there are two keys then the values in first key column have integer values. 
\end{note} 
\begin{note} 
If key2 is not given and key1 is positive, then the syntax is: \textcolor{VioletRed}{sort}(a,\textcolor{blue}{key->}key1). 
\end{note} 
\begin{note} 
If there is no output, then the argument matrix is sorted in place. 
\end{note} 
\begin{note} 
The argument can be the data matrix of a data object. The data object will remain a 
valid data object. 
\end{note} 
\subsection{\textcolor{VioletRed}{envelope}() Convex hull of point}\index{envelope()} 
\label{envelope} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm}  1 \tabto{5cm}  \textcolor{teal}{MATRIX}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  (nvertex+1, 2) matrix of the coordinates of the convex hull, where nvertex is the number of 
verteces. The last point is the same as the first point 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{arg}  \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{MATRIX}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  (n,2) matrix of point coordinates 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{nobs} \tabto{3cm} -1|1 \tabto{5cm}   \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The number of points if not all 
points of the input matrix are used 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
The transpose of the output can be directly used in frawline() function 
to draw the envelope 
\end{note} 
\begin{note} 
The function is using a subroutine made by Alan Miller and found in Netlib 
\end{note} 
\subsection{\textcolor{VioletRed}{find}() Finds from a \textcolor{teal}{MATRIX}}\index{find()} 
\label{find} 
Function \textcolor{VioletRed}{find}() can be used to find the first matrix element satisfying a given condition, or 
all matrix elements satifying the conditon, and in that case the found 
elements can be put to a vector containg element numbers or to a 
vector which has equal size as the input matrix and where 1 indicates that 
the element satifies the condition.. 
Remember that matrices are stored in row order. If a given column or row of matrix A should be seaeched, 
use A(All,column) or A(row,ALL) to extract that row or column. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm}  1 \tabto{5cm}   REAL|MATRIX \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent Without \textcolor{blue}{any->} or \textcolor{blue}{expand->} the first element found in row order. 
With \textcolor{blue}{any->}, the vector of element numbers satisfying the conditon. If nothing found 
the output will be \textcolor{teal}{REAL} with value zero. 
With \textcolor{blue}{expand->}, the matrix of the same dimensions as the input matrix where 
hits are marked with 1. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 1 \tabto{5cm}  Matrix \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The matrix searched. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{filter} \tabto{3cm} 1 \tabto{5cm}  Code \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The condition which the matrix element should be satisfied. The 
values of the matrix elements are put to the variable \$. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{any} \tabto{3cm} -1|0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The filtered element numbers are put to the output vector. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{expand} \tabto{3cm} -1|0 \tabto{5cm}   \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The filtered elements are put the output matrix 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\singlespacing 
\begin{example}[findex]Finding something from matrix\\ 
\label{findex} 
\noindent {\color{ForestGreen}** Repeating the example, different results will be obtained}\\ 
rm=\textcolor{VioletRed}{matrix}(500)\\ 
m,s=2,3\\ 
rm=\textcolor{VioletRed}{rann}(m,s)\\ 
\textcolor{VioletRed}{mean}(rm),\textcolor{VioletRed}{sd}(rm),\textcolor{VioletRed}{min}(rm),\textcolor{VioletRed}{max}(rm);\\ 
m+1.96*s;\\ 
{\color{ForestGreen}** index of first row satisfying the condition:}\\ 
first=\textcolor{VioletRed}{find}(rm,\textcolor{blue}{filter->}(\$.ge.m+1.96*s));\\ 
{\color{ForestGreen}** indeces of all rows satisfying the condition}\\ 
large=\textcolor{VioletRed}{find}(rm,\textcolor{blue}{filter->}(\$.ge.m+1.96*s),\textcolor{blue}{any->});\\ 
\textcolor{VioletRed}{nrows}(large),\textcolor{VioletRed}{nrows}(large)/\textcolor{VioletRed}{nrows}(rm),\textcolor{VioletRed}{mean}(large),\textcolor{VioletRed}{sd}(large),\textcolor{VioletRed}{min}(large),\textcolor{VioletRed}{max}(large);\\ 
{\color{ForestGreen}** vector of equal size as rm containing 1 or 0}\\ 
large2=\textcolor{VioletRed}{find}(rm,\textcolor{blue}{filter->}(\$.ge.m+1.96*s),\textcolor{blue}{expand->})\\ 
\textcolor{VioletRed}{mean}(large2),\textcolor{VioletRed}{min}(large2),\textcolor{VioletRed}{max}(large2);\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{mean}() Means or weighted means}\index{mean()} 
\label{mean} 
See section matrixstat for details 
\subsection{\textcolor{VioletRed}{sum}() Sums or weighted sums}\index{sum()} 
\label{sum} 
See section matrixstat for details 
\subsection{\textcolor{VioletRed}{var}() Sample variances or weighted variances}\index{var()} 
\label{var} 
See section matrixstat for details 
\subsection{\textcolor{VioletRed}{sd}() Sd's or weighted sd's}\index{sd()} 
\label{sd} 
See section matrixstat for details 
\subsection{\textcolor{VioletRed}{minloc}() Locations of the minimum values}\index{minloc()} 
\label{minloc} 
\textcolor{VioletRed}{minloc}(\textcolor{teal}{MATRIX}) generates a row vector containing the locations of the  minimum 
values in each column. \textcolor{VioletRed}{minloc}(VECTOR) is the \textcolor{teal}{REAL} scalar telling 
the location of the minimum value. Thus the VECTOR can also be a row vector. 
\subsection{\textcolor{VioletRed}{maxloc}() Locations of the minimum values}\index{maxloc()} 
\label{maxloc} 
\textcolor{VioletRed}{maxloc}(\textcolor{teal}{MATRIX}) generates a row vector containing the locations of the  minimum 
values in each column. \textcolor{VioletRed}{maxloc}(VECTOR) is the \textcolor{teal}{REAL} scalar telling 
the location of the maxim value whether VECTOR is a row vector or column vector. 
\subsection{\textcolor{VioletRed}{cumsum}() Cumulative sums}\index{cumsum()} 
\label{cumsum} 
\textcolor{VioletRed}{cumsum}(\textcolor{teal}{MATRIX}) generates a \textcolor{teal}{MATRIX} with the same dimesnions as the argument, 
and puts the cumulative sums of the columsn into the output matrix. 
\begin{note} 
If the argument is vector, the cumsum makes a vector having the same 
form as the argument. 
\end{note} 
\subsection{\textcolor{VioletRed}{corrmatrix}() Correlation matrix from variance-covariance matrix}\index{corrmatrix()} 
\label{corrmatrix} 
This simple function is sometimes needed. The function does not test wether the input matrix is symmetric. 
Negative diagonal eleemnt produces error, value zero correaltion 9,99. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm}  1 \tabto{5cm}   \textcolor{teal}{MATRIX} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  matrix having nondiagonal values \\ 
\textcolor{teal}{Out}(i,j)= \textcolor{teal}{arg}(i,j)= 
\textcolor{teal}{arg}(i,j)/\textcolor{VioletRed}{sqrt}(\textcolor{teal}{arg}(i,i)*\textcolor{teal}{arg}(j,j)). 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args  \tabto{3cm} 1 \tabto{5cm}   \textcolor{teal}{MATRIX} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  symmetric matrix 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{sd} \tabto{3cm} N|0  \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent If \textcolor{blue}{sd->} is given, then diagonal elements will be equal to \textcolor{VioletRed}{sqrt}(\textcolor{teal}{arg}(i,i) 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\section{ \textcolor{teal}{DATA} functions} 
\label{datahead} 
\textcolor{teal}{Data} can be analyzed and processed either using matrix computations 
or using DATAs. A \textcolor{teal}{DATA} is compound object 
linked to a data \textcolor{teal}{MATRIX} and \textcolor{teal}{LIST} containing variable (column) names, 
some other information. 
When data ere used via \textcolor{teal}{DATA} in statistical or linear programming 
functions, the data are processed observarion by observation. 
It is possible to work using \textcolor{teal}{DATA} or using directly the data matrix, wharever is more 
convenient. It is posible make new data objects or new matrices 
by to extracting  columns of data matrix, computing matrices with matrix computations. 
It is possible to use data in hierarcchila way, This property is inherited fro JLP. 
There are two \textbf{Jlp22} functions which create DATAs from files, \textcolor{VioletRed}{data}() and 
exceldta(). \textcolor{VioletRed}{data}() can create hierarchical data objects. Function \textcolor{VioletRed}{newdata}() creates a \textcolor{teal}{DATA} from matrices, which temselfs can be 
picked from data objects. Function \textcolor{VioletRed}{linkdata}() can link two data sets to make a hierarchical data. 
\begin{note} 
If a data file contains columns which are referred with variable names and some vectors, 
the it is practical to read data first into a matrix using \textcolor{VioletRed}{matrix}() function and then 
use matrix operations and \textcolor{VioletRed}{newdata}() to make \textcolor{teal}{DATA} with variable names and matrices. 
See Simulator section for an example. 
\end{note} 
\begin{note} 
\textcolor{VioletRed}{transdata}() function goes through a \textcolor{teal}{DATA} similarly as statitical functions, but 
does not serve a specific purpose, just transformations defined in the \textcolor{teal}{TRANS} object refreed with 
\textcolor{blue}{trans->} option are computed. See again the simulator section. 
\end{note} 
\begin{note} 
In earlier versions it was possible to give several data sets as arguments for \textcolor{blue}{data->} option. 
This festure is now deleted as it is possible to stack several data matrices and then use \textcolor{VioletRed}{newdata}() function to create a single data set. 
\end{note} 
\subsection{\textcolor{VioletRed}{data}() Making a \textcolor{teal}{DATA}}\index{data()} 
\label{data} 
\textcolor{teal}{Data} objects can be created with the \textcolor{VioletRed}{data}() function. 
A data object can created by a \textcolor{VioletRed}{data}() function when data are read from a file 
or from the following input paragraph. New data objects can 
be created with \textcolor{VioletRed}{newdata}() function from previous data objects and/or matrices. 
A data object can created using a \textcolor{teal}{TRANS} object 
by creating first data matrix with \textcolor{VioletRed}{matrix}() and then using \textcolor{VioletRed}{newdata}() to 
create data object. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output  \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{DATA} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent \noindent Output  \tabto{3cm} 1 \tabto{5cm}  DATA \tabto{7cm} 
\textcolor{teal}{Data} object to be created. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{read}  \tabto{3cm} 0|1- \tabto{5cm}  REAL|List \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Variables read from the input files. If the first variable is \%nobsw its 
name is changed into Output\%nobsw which is assumed in hierarchical data. 
If no arguments are given 
then the variables to be read in are stored in the first line of the data file separated 
with commas. Also the ‚Ä¶ -shortcut can be used to define the variable list. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{in}  \tabto{3cm} 0- \tabto{5cm}  Char \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent input file or list of input files. If no files are given, data is read from the following input 
paragraph. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{form}  \tabto{3cm} -1|1 \tabto{5cm}  Char \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Format of the data as follows \newline 
\$  Fortran format '*', the default \newline 
\textcolor{teal}{b}    Single precison binary \newline 
\textcolor{teal}{B}  Double precison binary.\newline 
Char giving a Fortran format, e.g. '(4f4.1,1x,f4.3)' \newline 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{maketrans} \tabto{3cm} -1|1 \tabto{5cm}  \textcolor{teal}{TRANS}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent Transformations computed for each observation when reading the data 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{keep} \tabto{3cm} -1|1- \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  variables kept in the data object, default: all \textcolor{blue}{read->} variables plus the output 
variables of \textcolor{blue}{maketrans->} transformations. If tr is the \textcolor{blue}{maketrans->} object, 
then \textcolor{blue}{keep->}(\textcolor{teal}{x},x4,@tr\%output) can be used to pick part of \textcolor{blue}{read->} variables and 
all output variables of tr. \textcolor{blue}{keep->} can be used to put into data matrix columns which 
are utilized later. If there the is \textcolor{blue}{read->}@readv, then \textcolor{blue}{keep->}(@readv,\textcolor{teal}{Regf},\textcolor{teal}{Resid}) 
can be used to put \textcolor{teal}{Regf} and \textcolor{teal}{Resid} to the data, and these are the utilisez in regressions. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{filter} \tabto{3cm} -1|1 \tabto{5cm}  Code \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  logical or arithmetic statement (nonzero value indicating True) describing which 
observations will be accepted to the data object. \textcolor{blue}{maketrans->}-transformations are 
computed before using filter. Option \textcolor{blue}{filter->} can utilize automatically created 
variable \textcolor{teal}{Record} which tells which input record has been just read. If observations 
are rejected, then the \textcolor{teal}{Obs}-variable has as its value number of already accepted 
observations+1. 
 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{reject}  \tabto{3cm} -1|1 \tabto{5cm}  Code \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Logical or arithmetic statement (nonzero value indicating True) describing which 
observations will be rejected from the data object. If \textcolor{blue}{filter->} option is given then 
reject statement is checked for observations which have passed the filter. Option 
\textcolor{blue}{reject->} can utilize automatically created variable \textcolor{teal}{Record} which tells which 
input record has been just read. If observations are rejected, then the Obsvariable has as its value number of already accepted observations+1. 
 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{keepopen}  \tabto{3cm} -1:1 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  This option tells that if \textcolor{blue}{nobs->} option gives the number of observations 
then after the current \textcolor{teal}{DATA} is read in, the file remains open so that other DATAs can be read from the same file. 
This option is useful when storing schedules having the tree structure and unpacking the structure 
with \textcolor{VioletRed}{joindata}(). See also \textcolor{VioletRed}{splitdata}(). 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{continue}   \tabto{3cm} -1:1 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  This tells that the reading continues from 
the file which was left open with the previous \textcolor{blue}{keepopen->} option. 
 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{up} \tabto{3cm} -1|1 \tabto{5cm}   \textcolor{teal}{DATA} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Gives the upper level data to which the data is linked. The first keep 
variable must be updata\%nobsw, which tells the number of children observations for 
each up data observation. If there is up data then the variable \textcolor{teal}{Data}\%obsw will give 
the number of observation within the upper level observation. The up data 
is automatically linked to the \textcolor{teal}{DATA} created. 
 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{duplicate} \tabto{3cm} -1|2 \tabto{5cm}   \textcolor{teal}{TRANS}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent \noindent duplicate \tabto{3cm} -1|2 \tabto{5cm}   TRANS  \tabto{7cm} 
The two \textcolor{teal}{TRANS} object arguments describe how observations 
will be duplicated. This can be used only with \textcolor{blue}{up->}. Without up\_ the duplcation can be treated 
with standard matrix operations.The first transformation object should have Duplicates as an 
output variable so that the value of Duplicates tells how many duplicates ar 
made (0= no duplication). The second transformation object defines how the values 
of subdata variables are determined for each duplicate. The number of duplicate 
is transmitted to the variable \textcolor{teal}{Duplicate}. These transformations are called also 
when \textcolor{teal}{Duplicate}=0. This means that when there is the \textcolor{blue}{duplicate->} option, 
then all transformations for the subdata can be defined in the duplicate 
transformation object, and \textcolor{blue}{submaketrans->} is not necessary. If there are duplications 
the \%nobsw variable of the upper level data is updated. 
 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent oldobs \tabto{3cm} -1|1 \tabto{5cm}   \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  If there are duplications of observations, then this option gives the variable 
into which the original observation number is put. This can be stored in the 
data by putting it into \textcolor{blue}{keep->} list, or, if \textcolor{blue}{keep->} option is not given 
then this variable is automatically put into the \textcolor{blue}{keep->} list of the data. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{oldobsw} \tabto{3cm} -1|1 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  This works similarly with respect to the 
initial obsw variable as oldobs-> 
works for initial obs variable. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{nobs} \tabto{3cm} -1|1 \tabto{5cm}  Real \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Gives the number of records in the data file. 
If there are 
fewer records in file as given in \textcolor{blue}{nobs->} option, an error occurs. There are two 
reasons for using \textcolor{blue}{nobs->} option. First, one can read a small sample 
from a large file for testing purposes. Second, the reading is slightly faster as the 
data can be read directly into proper memory area without using linked buffers. 
Third, if the data file is so large that a memory overflow occurs, then it may 
be possible to read data in as linked buffers are not needed. 
If there is up dta, nobs is not needed as the numbers of observations can be computed 
from the \%nobsw variable in the upper level data. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{buffersize} \tabto{3cm} -1|1 \tabto{5cm}  Real \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent \noindent buffersize \tabto{3cm} -1|1 \tabto{5cm}  Real \tabto{7cm} 
The number of observations put into one temporary working buffer. The default 
is 10000. Experimentation with different values of \textcolor{blue}{buffersize->} in huge data 
objects may result in more efficient \textcolor{blue}{buffersize->} than is the default (or perhaps 
not). Note that the buffers are not needed if number of observations is given in 
\textcolor{blue}{nobs->}. 
 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{par} \tabto{3cm} -1|1- \tabto{5cm}   Real \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent additional parameters for reading. If \textcolor{blue}{subform->} option is '\textcolor{teal}{bgaya}' then par 
option can be given in form \textcolor{blue}{par->}(ngvar,npvar) where ngvar is the number 
of nonperiodic \textcolor{teal}{x}-variables and npvar is the number of period specific \textcolor{teal}{x}-variables 
for each period. Default values are \textcolor{blue}{par->}(8,93). 
 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{rfhead}  \tabto{3cm} -1-1 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  When reading data from a text file, the first lines can contain a header which is 
printed but othewise ignored. If the number of header lines is geater than one, 
the argument gives the number of header lines. 
 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{rfcode}  \tabto{3cm} -1-1 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The data file can contain also \textbf{Jlp22}-code which is first executed. Note the code can 
be like var1,var,\textcolor{teal}{x1}...x5=1,2,3,4,5,6,7, which give the possibility to 
define variables which describe the \textcolor{blue}{in->} file. 
If there are both header and code lines, they are read in the same order as 
the options are. 
 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{time} \tabto{3cm} -1|0 \tabto{5cm}   \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  If \textcolor{blue}{time->} is present, the cpu-time and total time in function are printed 
 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
It was earlier possibl√∂e to create both the upper level data and subdata with the same \textcolor{VioletRed}{data}(). 
This made the function very complicated. The function is also otherwise greatly 
simplified. 
\end{note} 
\begin{note} 
Direct acces formats and format for reading Pascal binary files are easy 
to include. 
\end{note} 
\begin{note} 
\textcolor{VioletRed}{data}() function will create a data object object, which is a compound object consisting 
of links to data matrix, etc. see \textcolor{teal}{Data} object object. If \textcolor{teal}{Data} is the output 
of the function, the function creates the list \textcolor{teal}{Data}\%keep telling the 
variables in the data and 
\textcolor{teal}{Data}\%matrix containg the data as a single precision matrix. The number of observations can be obtained by \textcolor{VioletRed}{nobs}(\textcolor{teal}{Data}) or by 
\textcolor{VioletRed}{nrows}(\textcolor{teal}{Data}\%matrix) or \textcolor{VioletRed}{nobs}(\textcolor{teal}{Data}). 
\end{note} 
\begin{note} 
See common options section for how data objects used in other \textbf{Jlp22} functions will be defined. 
\end{note} 
 
\begin{note} 
In ealier versions, the user could select the name for the variable telling the number 
of the observation. After version Dec 20 2022, the name for \textcolor{teal}{DATA} \textcolor{teal}{datab} is always \textcolor{teal}{datab}\%obs. 
\end{note} 
 
\begin{note} 
Options \textcolor{blue}{nobs->}100, \textcolor{blue}{reject->}(\textcolor{teal}{Record}.gt.100) and \textcolor{blue}{filter->} 
(\textcolor{teal}{Record}.le.100) result in the same data object, but when reading a large file, the \textcolor{blue}{nobs->} 
option is faster as the whole input file is not read. 
\end{note} 
\begin{note} 
If no observations are rejected, obs variable and \textcolor{teal}{Record} variable get the same values. 
\end{note} 
\begin{note} 
If virtual memory overflow occurs, see \textcolor{blue}{nobs->} optio. This should not happen easily with the currrent 
64-bit application. 
\end{note} 
 
 
 
\singlespacing 
\begin{example}[dataex]data() generates a new data object by reading data.\\ 
\label{dataex} 
\noindent {\color{ForestGreen}**This example now contains several combinations of options}\\ 
{\color{ForestGreen}** and this example is not yet cleaned}\\ 
{\color{ForestGreen}** it may not contain all possible option comination s}\\ 
da=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{x1},\textcolor{teal}{x2}),\textcolor{blue}{in->})\\ 
1,2\\ 
3,4\\ 
/  \\ 
da\%keep;\\ 
da\%matrix;\\ 
 
da2=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{x1}...x4),\textcolor{blue}{in->})\\ 
1,2,3,4\\ 
5,6,7,8\\ 
/      \\ 
da2\%keep;\\ 
da2\%matrix;\\ 
\textcolor{VioletRed}{write}('da2.txt',\$,da2\%matrix)\\ 
\textcolor{VioletRed}{close}('da2.txt')\\ 
tr=\textcolor{VioletRed}{trans}()\\ 
x13=\textcolor{teal}{x1}+\textcolor{teal}{x3}\\ 
/                                            \\ 
da2=\textcolor{VioletRed}{data}(\textcolor{blue}{in->}'da2.txt',\textcolor{blue}{read->}(\textcolor{teal}{x1}...x4),\textcolor{blue}{keep->}(\textcolor{teal}{x2},x4,x13),\textcolor{blue}{maketrans->}tr)\\ 
da2\%keep;\\ 
da2\%matrix;\\ 
\textcolor{VioletRed}{delete\_f}('da2.txt')\\ 
 
\textcolor{VioletRed}{write}('da3.txt',\$,'\textcolor{teal}{x1}...\textcolor{teal}{x3}')\\ 
\textcolor{VioletRed}{write}('da3.txt',\$,da2\%matrix)\\ 
\textcolor{VioletRed}{close}('da3.txt')\\ 
da3=\textcolor{VioletRed}{data}(\textcolor{blue}{in->}'da3.txt',\textcolor{blue}{read->})\\ 
da3\%keep;\\ 
da3\%matrix;\\ 
\textcolor{VioletRed}{delete\_f}('da3.txt')\\ 
 
 
da=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{x1},\textcolor{teal}{x2}),\textcolor{blue}{keep->}(\textcolor{teal}{x1},\textcolor{teal}{x2},\textcolor{teal}{Regf},\textcolor{teal}{Resid}),\textcolor{blue}{in->})\\ 
1,2\\ 
3,4\\ 
/  \\ 
da\%keep;\\ 
da\%matrix;\\ 
 
tr=\textcolor{VioletRed}{trans}()\\ 
\textcolor{teal}{x1}\#\textcolor{teal}{x2}=\textcolor{teal}{x1}*\textcolor{teal}{x2}\\ 
\textcolor{teal}{x1}\%\textcolor{teal}{x2}=\textcolor{teal}{x1}+\textcolor{teal}{x2}\\ 
/                                                                                  \\ 
dab=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{x1},\textcolor{teal}{x2}),\textcolor{blue}{maketrans->}tr,\textcolor{blue}{in->})\\ 
1,2\\ 
3,4\\ 
/  \\ 
dab\%keep;\\ 
dab\%matrix;\\ 
 
trup=\textcolor{VioletRed}{trans}()\\ 
\textcolor{teal}{x1}\#\textcolor{teal}{y1}=\textcolor{teal}{x1}*\textcolor{teal}{y1}\\ 
\textcolor{teal}{x2}\%\textcolor{teal}{y2}=\textcolor{teal}{x2}+\textcolor{teal}{y2}\\ 
/                                                                                  \\ 
{\color{ForestGreen}**first variable must be \%nobsw}\\ 
da\%keep(1)=da\%nobsw\\ 
 
dasub=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{y1},\textcolor{teal}{y2}),\textcolor{blue}{in->},\textcolor{blue}{up->}da,\textcolor{blue}{maketrans->}trup)\\ 
3,4\\ 
6,7\\ 
8,9\\ 
10,11\\ 
/    \\ 
dasub\%keep;\\ 
dasub\%matrix;\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{data->}dasub)\\ 
{\color{ForestGreen}**utilize upper level data}\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{data->}dasub,\textcolor{blue}{up->})\\ 
 
ndupl=\textcolor{VioletRed}{trans}()\\ 
Duplicates=0\\ 
\textcolor{VioletRed}{if}(da\%obs.eq.\,2.and.Obsw.eq.2)Duplicates=2\\ 
/                                                                 \\ 
dupl=\textcolor{VioletRed}{trans}()\\ 
\textcolor{teal}{x1}\#\textcolor{teal}{y1}=\textcolor{teal}{x1}*\textcolor{teal}{y1}\\ 
\textcolor{teal}{x2}\%\textcolor{teal}{y2}=\textcolor{teal}{x2}+\textcolor{teal}{y2}\\ 
\textcolor{VioletRed}{if}(\textcolor{teal}{Duplicate}.gt.0)\textcolor{VioletRed}{then}\\ 
\textcolor{teal}{x1}\#\textcolor{teal}{y1}=\textcolor{teal}{x1}\#\textcolor{teal}{y1}+\textcolor{teal}{Duplicate}\\ 
\textcolor{teal}{x1}\%\textcolor{teal}{y1}=\textcolor{teal}{x1}\#\textcolor{teal}{y1}+\textcolor{teal}{Duplicate}\\ 
\textcolor{VioletRed}{endif}\\ 
 
/                           \\ 
 
da\%keep;\\ 
da\%matrix;\\ 
dasub3=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{y1},\textcolor{teal}{y2}),\textcolor{blue}{in->},\textcolor{blue}{up->}da,\textcolor{blue}{maketrans->}trup)\,{\color{ForestGreen}!,duplicate->(ndupl,dupl))}\\ 
3,4\\ 
6,7\\ 
8,9\\ 
10,11\\ 
/    \\ 
dasub3\%keep;\\ 
dasub3\%matrix;\\ 
 
da\%keep;\\ 
da\%matrix;\\ 
dasub2=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{y1},\textcolor{teal}{y2}),\textcolor{blue}{in->},\textcolor{blue}{up->}da,\textcolor{blue}{duplicate->}(ndupl,dupl))\\ 
3,4\\ 
6,7\\ 
8,9\\ 
10,11\\ 
/    \\ 
da\%matrix;\\ 
dasub2\%keep;\\ 
dasub2\%matrix;\\ 
 
\textcolor{VioletRed}{stat}(\textcolor{blue}{data->}dasub)\\ 
{\color{ForestGreen}**utilize upper level data}\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{data->}dasub2,\textcolor{blue}{up->})\\ 
\textcolor{Red}{;return}\\ 
\textcolor{VioletRed}{write}('dasub.txt',\$,dasub\%matrix)\\ 
\textcolor{VioletRed}{close}('dasub.txt')\\ 
{\color{ForestGreen}**this must be redefined because duplication changed nobsw}\\ 
da=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(da\%nobsw,\textcolor{teal}{x2}),\textcolor{blue}{keep->}(da\%nobsw,\textcolor{teal}{x2},\textcolor{teal}{Regf},\textcolor{teal}{Resid}),\textcolor{blue}{in->})\\ 
1,2\\ 
3,4\\ 
/  \\ 
da\%keep;\\ 
da\%matrix;\\ 
dasub=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{y1},\textcolor{teal}{y2}),\textcolor{blue}{in->}'dasub.txt',\textcolor{blue}{up->}da,\textcolor{blue}{maketrans->}trup,\\ 
\textcolor{blue}{keep->}(\textcolor{teal}{y1},\textcolor{teal}{y2},@trup\%output,\textcolor{teal}{Regf},\textcolor{teal}{Resid}))\\ 
dasub\%keep;\\ 
dasub\%matrix;\\ 
{\color{ForestGreen}** x2 is now alwasy zero}\\ 
\textcolor{VioletRed}{regr}(\textcolor{teal}{y1},\textcolor{teal}{x2},\textcolor{blue}{data->}dasub)\\ 
{\color{ForestGreen}** Regf and Resid are put into the data matrix}\\ 
dasub\%matrix;\\ 
 
{\color{ForestGreen}** now x2 is picked from the up-data}\\ 
\textcolor{VioletRed}{regr}(\textcolor{teal}{y1},\textcolor{teal}{x2},\textcolor{blue}{data->}dasub,\textcolor{blue}{up->})\\ 
dasub\%matrix;\\ 
\textcolor{VioletRed}{delete\_f}('dasub.txt')\\ 
 
 
\textcolor{VioletRed}{write}('data.txt',\$,da\%matrix)\\ 
\textcolor{VioletRed}{close}('data.txt')\\ 
dc=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{x1},\textcolor{teal}{x2}),\textcolor{blue}{in->}'data.txt')\\ 
dc\%matrix;\\ 
dc=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{x1},\textcolor{teal}{x2}),\textcolor{blue}{in->}'data.txt',\textcolor{blue}{maketrans->}tr)\\ 
dc\%keep;\\ 
dc\%matrix;\\ 
{\color{ForestGreen}** another way to make data}\\ 
damat=\textcolor{VioletRed}{matrix}(\textcolor{VioletRed}{nrows}(da\%matrix),\textcolor{VioletRed}{ncols}(da\%matrix),\textcolor{blue}{in->}'data.txt')\\ 
da2=\textcolor{VioletRed}{newdata}(damat,\textcolor{blue}{read->}(\textcolor{teal}{x1}...x4))\\ 
da2\%matrix;\\ 
 
\textcolor{VioletRed}{delete\_f}('data.txt')\\ 
 
\textcolor{VioletRed}{write}('data.txt','(4f4.0)',da\%matrix)\\ 
\textcolor{VioletRed}{close}('data.txt')\\ 
 
dc=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{x1},\textcolor{teal}{x2}),\textcolor{blue}{form->}'(2f4.0)',\textcolor{blue}{in->}'data.txt')\\ 
\textcolor{VioletRed}{delete\_f}('data.txt')\\ 
dc\%matrix;\\ 
 
\textcolor{VioletRed}{write}('data.bin','\textcolor{teal}{b}',da\%matrix)\\ 
\textcolor{VioletRed}{close}('data.bin')\\ 
dc=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{x1},\textcolor{teal}{x2}),\textcolor{blue}{form->}'\textcolor{teal}{b}',\textcolor{blue}{in->}'data.bin')\\ 
dc\%matrix;\\ 
dc=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{x1},\textcolor{teal}{x2}),\textcolor{blue}{form->}'\textcolor{teal}{b}',\textcolor{blue}{in->}'data.bin',\textcolor{blue}{maketrans->}tr)\\ 
dc\%keep;\\ 
dc\%matrix;\\ 
\textcolor{VioletRed}{delete\_f}('data.bin')\\ 
 
\textcolor{VioletRed}{write}('data.bin','\textcolor{teal}{B}',da\%matrix)\\ 
\textcolor{VioletRed}{close}('data.bin')\\ 
dc=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{x1},\textcolor{teal}{x2}),\textcolor{blue}{form->}'\textcolor{teal}{B}',\textcolor{blue}{in->}'data.bin')\\ 
dc\%keep;\\ 
dc\%matrix;\\ 
 
dc=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{x1},\textcolor{teal}{x2}),\textcolor{blue}{form->}'\textcolor{teal}{B}',\textcolor{blue}{in->}'data.bin',\textcolor{blue}{maketrans->}tr)\\ 
dc\%keep;\\ 
dc\%matrix;\\ 
\textcolor{VioletRed}{delete\_f}('data.bin')\\ 
 
\textcolor{Red}{;return}\\ 
 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{newdata}() Making a \textcolor{teal}{DATA} from MATRIXs and/or DATAs}\index{newdata()} 
\label{newdata} 
Function \textcolor{VioletRed}{newdata}() generates a new data object from existing data objects and/or 
matrices possibly using transformations to generate new variables. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{Data} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The data object generated. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 1- \tabto{5cm}  Data|Matrix \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Input matrices and data objects. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{read} \tabto{3cm} N|1- \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Variable names for columns of matrices in the order of 
matrices. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{maketrans} \tabto{3cm} N|1 \tabto{5cm}   \textcolor{teal}{TRANS}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  A predefined ransformation object computed for each observation. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{time} \tabto{3cm} -1|0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  If \textcolor{blue}{time->} is present, the cpu-time and total time in function are printed 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{delete} \tabto{3cm} -1|0|1  \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  If present, then the new data matrix is made sequentially so that used data 
matrices are deleted. This takes more time, but may be needed if there is shortage of 
memory. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
If a \textcolor{teal}{DATA} has a link to an upper level \textcolor{teal}{DATA} obtained with \textcolor{VioletRed}{linkdata}() without 
output, the the upper level \textcolor{teal}{DATA} is not included. You can make a link to an upper level data 
using \textcolor{VioletRed}{linkdata}() for the \textcolor{teal}{DATA} produced with \textcolor{VioletRed}{newdata}() 
\end{note} 
\begin{note} 
It is not yet possible to drop variables. 
\end{note} 
\begin{note} 
An error occurs if the same variable is several times in the variable list obtained 
by combining variables in data sets and \textcolor{blue}{read->} variables. 
\end{note} 
\begin{note} 
An error occurs if the numbers of rows of matrices and observations in data sets 
are not compatible. 
\end{note} 
\begin{note} 
Output variables in \textcolor{blue}{maketrans->} transformations whose name start with \$ are not put into the new data object. 
\end{note} 
\singlespacing 
\begin{example}[newdataex]newdata() generates a new data object.\\ 
\label{newdataex} 
\noindent data1=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{x1}...\textcolor{teal}{x3}),\textcolor{blue}{in->})\\ 
1,2,3\\ 
4,5,6\\ 
7,8,9\\ 
/    \\ 
matrix1=\textcolor{VioletRed}{matrix}(3,2,\textcolor{blue}{in->})\\ 
10,20\\ 
30,40\\ 
50,60\\ 
/    \\ 
\textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
\textcolor{Red}{;do}(i,1,3)\\ 
\textcolor{Red}{;do}(j,1,2)\\ 
\textcolor{teal}{x}"i"\#\textcolor{teal}{z}"j"=\textcolor{teal}{x}"i"*\textcolor{teal}{z}"j"\\ 
\textcolor{Red}{;enddo}\\ 
\textcolor{Red}{;enddo}\\ 
/                      \\ 
new=\textcolor{VioletRed}{newdata}(data1,matrix1,\textcolor{blue}{read->}(z1,z2),\textcolor{blue}{maketrans->}\textcolor{teal}{transa})\\ 
\textcolor{VioletRed}{print}(new)\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{datawcase}() \textcolor{teal}{DATA} with case names}\index{datawcase()} 
\label{datawcase} 
This function will replace the properties function in factory optimizations. 
The function creates subobjects Output\%matrix,Output\%keep, and Output\%case, which is a list of case names. 
	! 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output  \tabto{3cm} 0|1 \tabto{5cm}  \textcolor{teal}{Data} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent \noindent Output  \tabto{3cm} 0|1 \tabto{5cm}  Data \tabto{7cm} 
\textcolor{teal}{Data} object to be created. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{read}  \tabto{3cm} 0|1- \tabto{5cm}  REAL|List \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Variables read from the following input paragraph. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{maketrans}  \tabto{3cm} 0|1 \tabto{5cm}  \textcolor{teal}{TRANS} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Transformations made. Output variables whose names do not start with \$ are put into the data. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\singlespacing 
\begin{example}[datawcaseex]Example of datawcase\\ 
\label{datawcaseex} 
\noindent sawmills=\textcolor{VioletRed}{datawcase}(\textcolor{blue}{read->}(capacity1...capacity4))\\ 
Kotka,110,120,130,140\\ 
Oulu,210,220,230,240\\ 
/                   \\ 
sawsub=;list(sawmills\%?);\\ 
@sawsub;\\ 
sawmills\%?;\\ 
\textcolor{VioletRed}{stat}()\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{exceldata}() \textcolor{teal}{DATA} from an excel file}\index{exceldata()} 
\label{exceldata} 
Generates data object from csv data generated with excel. It is assumed that ';' is used as column separator, 
and first is the header line generated with excel and containing column names. 
The second line contains information for \textbf{Jlp22} how to read the data. 
First the first line is copied and pasted as the second line. To the beginning of the second line is put 
'@\#'. Then each entry separated by ';' is edited as follows. If the column is just ignored, then 
put '!' to the beginning of the entry. If all characters in the column are read in as 
a numeric variable, change the name to accpetable variable name in \textbf{J}. 
If the column is read in but it is just used as an input variable for 
\textcolor{blue}{maketrans->} trasformations, then start the name with '\$' so the variable is not put to 
the list of \textcolor{blue}{keep->} variables. If a contains only character values then it must 
be ignored using '!'. If the contains numeric values surrounded by characters, the the numeric value can be picked 
as follows. Put '?' to the end of entry. Put the variable name to the beginning of the entry. 
then put the the number of characters to be ignored by two digits, inserting 
aleading zero if needed. The given the length of the numeric field to be read in as a numeric value. 
For instance, if the header line in the excel file is 
\color{Green} 
\begin{verbatim} 
Block;Contract;Starting time;Name of municipality;Number of stem;Species code 
\end{verbatim} 
\color{Black} 
and the first data line could be 
\color{Green} 
\begin{verbatim} 
MG_H100097362501;20111001;7.5.2021 9:37;Akaa;20;103;1;FI2_Spruce 
\end{verbatim} 
\color{Black} 
then the second line before the first data line could be 
\color{Green} 
\begin{verbatim} 
##block0808?;!Contract;!Starting time;!Name of municipality;stem;species0201? 
\end{verbatim} 
\color{Black} 
therafter the first observation would get values block=97362501,stem=1, and 
species=2. 
 
If there are several input files, the header line of later input lines is ignored, and 
also if the second line of later files starts with '\#\#', then it is ignored. 
if any later lines in any input files start with 'jcode:', then the code is computed. 
This way variables decribing the whole input file can be transmitted to the data. 
Currently jcode-output variables can be transmitted to data matrix only by using the as pseudo 
outputvariables in maketrans-transformations, e.g., filevar1=filevar1, if 
filevar1 is generated in jcode transformation. 
If there are several input files the file number is put into variable In before computing maketrans transformations 
and this variable is automatically stored in the data matrix. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{Data} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textcolor{teal}{Data} object generated 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{in} \tabto{3cm} 1- \tabto{5cm}  Char \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent Files to read in. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{maketrans} \tabto{3cm} N|1 \tabto{5cm}  trans \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Transformations used to compute new variables to be stored 
in the data. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\subsection{\textcolor{VioletRed}{linkdata}() Links or combines hierarchical DATAs}\index{linkdata()} 
\label{linkdata} 
\textcolor{VioletRed}{linkdata}(updata,subdata,...) 
links hierarchical data sets. Currently linkdata can create also one flat file which can be used in \textcolor{VioletRed}{jlp}() 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 2-999 \tabto{5cm}  \textcolor{teal}{DATA} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textcolor{teal}{DATA} objects in up to down order. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
In versions before 20.12.2022 \textcolor{blue}{nobsw->} obtion was needed to tell what is the number 
of subdata -observations under the current upper level observation. When I made the data format for storing 
schedules having the tree structure efficiently, everything became too complicated when allowing any 
freedom with respect to the nobsw-variable. Thus the nobsw variable in \textcolor{teal}{DATA} subdata has 
name subdat\%nosw and it must be the first variable among the keep-variables of the \textcolor{teal}{DATA}. 
\end{note} 
 
\begin{note} 
In most cases links between data sets can be made be making a \textcolor{teal}{DATA} with \textcolor{blue}{up->} option. 
If there is need to duplicate lower level observations, then 
this can be currently made only in \textcolor{VioletRed}{data}() function. 
\end{note} 
\begin{note} 
When using linked data in  functions, the values of the upper level variables are 
automatically obtained when accessing lower level observations, if option \textcolor{blue}{up->} is present. 
\end{note} 
 
\begin{note} 
In the current version of \textbf{Jlp22} it is no more necassary to use linked data sets in 
\textcolor{VioletRed}{jlp}() function, as the treatment unit index in data containing both 
stand and schedule data can be given in \textcolor{blue}{unit->} option 
\end{note} 
 
 
\singlespacing 
\begin{example}[linkdataex]Example for linkdata.\\ 
\label{linkdataex} 
\noindent {\color{ForestGreen}** make upper level DATA}\\ 
\textcolor{teal}{dataa}=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{dataa}\%nobsw,site),\textcolor{blue}{in->})\\ 
2,4\\ 
3,5\\ 
/  \\ 
\textcolor{teal}{dataa}\%matrix;\\ 
 
{\color{ForestGreen}** make subdata as an ordinary DATA}\\ 
\textcolor{teal}{datab}=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{x1},\textcolor{teal}{y}),\textcolor{blue}{in->})\\ 
1,2\\ 
3,4\\ 
5,6\\ 
7,8\\ 
6,9\\ 
/  \\ 
\textcolor{teal}{datab}\%matrix;\\ 
\textcolor{teal}{datab}\%keep;\\ 
{\color{ForestGreen}**link now DATAs}\\ 
{\color{ForestGreen}** First varaible in the upper level dataa must be dataa\%nobsw}\\ 
\textcolor{VioletRed}{linkdata}(\textcolor{teal}{dataa},\textcolor{teal}{datab})\\ 
\textcolor{teal}{listb}=;list(\textcolor{teal}{datab}\%?);\\ 
@listb;\\ 
{\color{ForestGreen}** when working with subdata the upper level data is feeded in for all observations}\\ 
{\color{ForestGreen}** if up-> is present}\\ 
{\color{ForestGreen}**   even if they are not part of the data matrix as seen from datab\%keep.}\\ 
\textcolor{VioletRed}{stat}()\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{up->})\\ 
 
**                                                 \\ 
{\color{ForestGreen}** Note stat() and all functions assume that the last DATA created is used}\\ 
{\color{ForestGreen}** Thus when there are several DATAs around it is safer all use data-> option}\\ 
{\color{ForestGreen}** i.e. the above could/should be stat(data->datab)}\\ 
**                                                                      \\ 
 
**                                                                      \\ 
{\color{ForestGreen}** The flat file can be created also as follows:}\\ 
{\color{ForestGreen}** when dealing with the subdata the upper level data is automatically used}\\ 
\textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
Unit=Unit\,{\color{ForestGreen}!adds Unit and site variables from up-data to sub-data}\\ 
site=site\\ 
Unit\%obsw=Unit\%obsw\\ 
/                  \\ 
{\color{ForestGreen}** In TRANS transa, the input variables come from the upper level data, and}\\ 
{\color{ForestGreen}** outputvariables go to the new data based on DATA datab.}\\ 
\textcolor{teal}{datac}=\textcolor{VioletRed}{newdata}(\textcolor{teal}{datab},\textcolor{blue}{maketrans->}\textcolor{teal}{transa})\\ 
\textcolor{VioletRed}{stat}()\\ 
\textcolor{teal}{datac}\%matrix;\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{splitdata}() splits a schedules \textcolor{teal}{DATA} into components}\index{splitdata()} 
\label{splitdata} 
 
Each component contains variables simulated for a given period. After the function the stand data 
is linked to \textcolor{teal}{DATA} of schedules variables during the first period. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm} 1 \tabto{5cm}  ? \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The variable name determining the names the generated DATAs. 
If the output is xdatab 
then the \textcolor{VioletRed}{splitdata}() generates DATAs xdatab\#1...,xdatab\#p for the number of periods p. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{DATA} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Schedules data linked to an upper level stand data with \textcolor{VioletRed}{linkdata}(). 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{periodvars} \tabto{3cm} 2- \tabto{5cm}  \textcolor{teal}{LIST} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textcolor{teal}{LIST} of LISTs, each list telling variables which 
are simulated for the corresponding period. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
When deciding to which period a variable belongs, the only thing which matters is at 
what level the variable is put into the tree. Thus variable 
NPV0 which is the variable telling the NPV at the beginning 
of the plannin horizon must put to the last list in periodvars, because it can be computed only 
after the whole planning horizon is simulated. 
\end{note} 
\begin{note} 
If the stand data has variable nobswold then the initial value of the nobsw variable 
is put into this variable. The easiest way to add this variable is to use 
\textcolor{blue}{extra->}nobswold when making the stand data 
\end{note} 
\begin{note} 
All generated matrices files can be written into one (e.g. binary) file starting 
from the first to the last period. These DATAS can be the read in using 
\textcolor{blue}{keepopen->} and \textcolor{blue}{continue->} options of \textcolor{VioletRed}{data}(). See below in the \textcolor{VioletRed}{joindata}() section 
\end{note} 
\begin{note} 
The first variable in \textcolor{teal}{DATA} \textcolor{teal}{dataa} is \textcolor{teal}{dataa}\%nobsw 
\end{note} 
 
 
\subsection{\textcolor{VioletRed}{joindata}() Joins hierarchical DATAs}\index{joindata()} 
\label{joindata} 
There are two different cases of \textcolor{VioletRed}{joindata}() \\ 
The call has only two arguments and is like \\ 
xdata2=\textcolor{VioletRed}{joindata}(cdata,xdata)\\ 
where cdata and xdata are linked and the first variable in cdata is cdata\%nobsw. Then xdata2 will 
contain all variables in cdata, except variable cdata\%nosw is replaced by variable 
cdata\%obs which tells into which cdata observation the xdata observation belongs, in practice, 
into which stand the schedule belongs. The output data will not be linked to any upper level data.\\ 
In the second case the call is like \\ 
xdata2=\textcolor{VioletRed}{joindata}(cdata,xdata\#1...xdata\#p)\\ 
DATAs xdata\#1...xdata\#p contain different periods (levels) in hierarchical data and 
the will contain whole schedules. This new data is automatically linked to 
to the first argument \textcolor{teal}{DATA} (cdata). 
 
\begin{note} 
In the second case: As the output will be connected to the first argument, the link from the second argument 
to the first argument will be lost. 
\end{note} 
\begin{note} 
In the second case: The variable cdata\%nobsw in cdata is modified to correpond to the new number of children, 
i.e. the number of schedules in the stands. 
\end{note} 
\begin{note} 
there are examples of the new data format after \textcolor{VioletRed}{splitdata}() function. 
\end{note} 
\singlespacing 
\begin{example}[joindataex]splitting and joining period \textcolor{teal}{DATA}\\ 
\label{joindataex} 
\noindent cdata=\textcolor{VioletRed}{data}(\textcolor{blue}{in->}'cdat.txt',\textcolor{blue}{read->}(cdata\%nobsw,site))\\ 
\textcolor{VioletRed}{stat}()\\ 
xdata=\textcolor{VioletRed}{data}(\textcolor{blue}{in->}'xdat.txt',\textcolor{blue}{read->}(npv\#0,npv\#5,income1...income5),\textcolor{blue}{time->})\\ 
\textcolor{VioletRed}{stat}()\\ 
 
\textcolor{VioletRed}{linkdata}(cdata,xdata)\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{up->})\\ 
 
 
\textcolor{Red}{;do}(i,1,4)\\ 
pv"i"=\textcolor{VioletRed}{list}(income"i")\\ 
\textcolor{Red}{;enddo}\\ 
pv5=\textcolor{VioletRed}{list}(income5,npv\#0,npv\#5)\\ 
 
xdatap=\textcolor{VioletRed}{splitdata}(xdata,\textcolor{blue}{periodvars->}(pv1...pv5))\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{data->}cdata)\\ 
 
\textcolor{Red}{;do}(i,1,5)\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{data->}xdatap\#"i")\\ 
\textcolor{VioletRed}{write}('xdatap.txt',\$,xdatap\#"i"\%matrix)\\ 
\textcolor{Red}{;enddo}\\ 
 
 
\textcolor{VioletRed}{close}('xdatap.txt')\\ 
contd=0\\ 
keepo=1\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{data->}cdata,\textcolor{blue}{sum->})\\ 
 
nobscur=cdata\%nobsw\%sum;\\ 
 
\textcolor{Red}{;do}(i,1,5)\\ 
Pv"i"=\textcolor{VioletRed}{list}(xdataP\#"i"\%nobsw,@pv"i")\\ 
\textcolor{Red}{;enddo}\\ 
 
\textcolor{Red}{;do}(i,1,5)\\ 
\textcolor{Red}{;if}(i.eq.5)keepo=0\\ 
xdataP\#"i"=\textcolor{VioletRed}{data}(\textcolor{blue}{in->}'xdatap.txt',\textcolor{blue}{read->}(@Pv"i"),\textcolor{blue}{keepopen->}keepo,\textcolor{blue}{continue->}contd,\textcolor{blue}{nobs->}nobscur)\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{data->}xdataP\#"i",\textcolor{blue}{sum->})\\ 
nobscur=xdataP\#"i"\%nobsw\%sum;\\ 
contd=1\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{data->}xdataP\#"i")\\ 
\textcolor{Red}{;enddo}\\ 
 
\textcolor{VioletRed}{stat}(\textcolor{blue}{data->}cdata)\\ 
xdatanew=\textcolor{VioletRed}{joindata}(cdata,xdataP\#1...xdataP\#5)\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{data->}xdatanew)\\ 
 
{\color{ForestGreen}** Did the procedure loose any data}\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{data->}xdata)\\ 
 
\textcolor{VioletRed}{delete\_f}('xdatap.txt')\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
** To summarize 
\begin{itemize} 
\item First there was cdata and xdata linked to it. 
\item Then \textcolor{VioletRed}{splitdata}() was used to pull out different levels of the 
simulation tree into xdatap\#1...xdatap\#5 DATAs. 
\item Eeach data has \%nobsw variable, in addition to the original period variables, 
telling how many children each observation has. 
\item Also the variable cdata\%nobsw is updated. 
\item Then the \%matrix of each \textcolor{teal}{DATA} was written to 'xdatap.txt' 
from the first to last period. 
\item In practice it is beneficial to use binary files. 
Recall that format '\textcolor{teal}{b}' reads and writes in single precision. 
The matrices are in \textbf{Jlp22} in double precision but practically never 
double precision is needed. 
If insisting on double precision data storage, use format '\textcolor{teal}{B}'. 
\item  \textcolor{teal}{Data} is read in from the file period by period. Initially the sum of variable cdata\%nobsw is 
computed using \textcolor{VioletRed}{stat}(\textcolor{blue}{data->}cdata,\textcolor{blue}{sum->}). This sum tells the number of period 1 observations. 
\item After making a period \textcolor{teal}{DATA}, the number of observations in next period is computed similarly. 
It simplifies coding when the data for the last period has also \%nobsw variable which is zero. 
\item \textcolor{blue}{keepopen->} keeps the file open making it possible to continue reading from the same file, 
which is indicated with the \textcolor{blue}{continue->} option. 
It would be possible to use keepopen also for the last period and close the file after 
reading all periods. 
\item The above procedure can be used to convert tabular form schedules data into this 
disk saving and fast reading format. But in long run a simulator could generate directly 
data in this format which is simple to implement: just write different periods to different files 
or collect data into different period matrices and write the directly all data into one file. 
\end{itemize} 
\subsection{\textcolor{VioletRed}{getobs}() Obsevarion from  \textcolor{teal}{DATA}}\index{getobs()} 
\label{getobs} 
Getting an observation from a data set: // 
\textcolor{VioletRed}{getobs}(dataset,obs[,\textcolor{blue}{trans->}])// 
Get the values of all variables associated with observation obs in data object dataset. First all the 
variables stored in row obs in the data matrix are put into the corresponding real variables. If 
a transformation set is permanently associated with the data object, these transformations are 
executed. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent dataset \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{DATA}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  the \textcolor{teal}{DATA} 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{obs}  \tabto{3cm} 1 \tabto{5cm}   \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  row number in the data matrix of the dataset 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{trans} \tabto{3cm} -1|1  \tabto{5cm}   \textcolor{teal}{TRANS}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  these transformations are also executed. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\subsection{\textcolor{VioletRed}{nobs}() number of observations in \textcolor{teal}{DATA} or \textcolor{teal}{REGR}}\index{nobs()} 
\label{nobs} 
\textcolor{VioletRed}{nobs}(\textcolor{teal}{DATA}) returns the number of rows in the data matrix of \textcolor{teal}{DATA}// 
\textcolor{VioletRed}{nobs}(\textcolor{teal}{REGR}) returns the number of observations used to compute 
the regression with \textcolor{VioletRed}{regr}(). 
\subsection{\textcolor{VioletRed}{classvector}() Vectors from grouped \textcolor{teal}{DATA}}\index{classvector()} 
\label{classvector} 
Function classvector computes vectors from data which extract information from grouped 
data. These vectors can be used to generate new data object using \textcolor{VioletRed}{newdata}() function or 
new matrices from submatrices using \textcolor{VioletRed}{matrix}() function with \textcolor{blue}{matrix->} option or 
they can be used in transformation objects to compute class related things. 
There is no explicit output for the function, but several output vectors can 
be generated depending on the arguments and \textcolor{blue}{first->}, \textcolor{blue}{last->} and 
\textcolor{blue}{expand->} options. The function prints the names of the output vectors generated. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 0- \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The variables whose class information is computed. Arguments 
are not necessary if \textcolor{blue}{first->} and/or \textcolor{blue}{last->} are present. 
Let ¬ßArg be the generic name for arguments. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{class} \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  .oindent class \tabto{3cm} 1 \tabto{5cm}  REAL \tabto{7cm} 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{class} \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The variable indicating the class. The class variable which must be present in the data object or which is 
an output variable of the \textcolor{blue}{trans->} transformations. 
When the \textcolor{blue}{class->} variable, denoted as 
as ¬ßClass changes, 
the class changes. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{data} \tabto{3cm} 0|1 \tabto{5cm}  \textcolor{teal}{Data} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent \textcolor{teal}{Data} object used. Only one data object used; extra \textcolor{blue}{data->} objects just ignored. The default is the last 
data object generated. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{expand} \tabto{3cm} -1|0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent If \textcolor{blue}{expand->} is present then the lengths output vectors are equal 
to the number of observations in the data object and the values of the class variables 
are repeated as many times as there are observations in each class. If 
\textcolor{blue}{expand->} is not present, the lengths of the output vectors are. 
equal to the number of classes. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{first} \tabto{3cm} 0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The the number of first observation in class is stored in vector 
¬ßClass\%\%first if \textcolor{blue}{expand->} is present and ¬ßClass\%first if \textcolor{blue}{expand->} is not present. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{last} \tabto{3cm} 0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The the number of lastt observation in class is stored in vector 
¬ßClass\%\%last if \textcolor{blue}{expand->} is present and ¬ßClass\%lastobject if \textcolor{blue}{expand->} is not present. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{obsw} \tabto{3cm} 0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent If there axpnad-> option then vector Class\%\%obsw 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{ext} \tabto{3cm} -1|1 \tabto{5cm}  Char \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The extension to the names of vectors generated for arguments. Let 
Ext be denote the extension. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{mean} \tabto{3cm} -1|0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The class means are stored in the vectors \newline 
¬ßArg\#Class\%\%mean with \textcolor{blue}{expand->} and without \textcolor{blue}{ext->}\newline 
¬ßArg\#Class\%\%meanExt with \textcolor{blue}{expand->} and with \textcolor{blue}{ext->} are \newline 
¬ßArg\#Class\%mean without \textcolor{blue}{expand->} and without \textcolor{blue}{ext->} \newline 
¬ßArg\#Class\%meanExt without \textcolor{blue}{expand->} and with \textcolor{blue}{ext->} 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{sd} \tabto{3cm} -1|0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Class standard deviations are computed to sd vectors 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{var} \tabto{3cm} -1|0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Class variances are computed to var vectors 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{min} \tabto{3cm} -1|0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Class minimums are computed to min vectors 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{max} \tabto{3cm} -1|0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Class maximums are computed to max vectors. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
Numbers of observations in each class can be obtained by \\ 
Class\%nobs=Class\%\%last-Class\%\%first+1 when \textcolor{blue}{expand->} is present, and \\ 
Class\%nobs=Class\%\%last-Class\%\%first+1 
\end{note} 
\singlespacing 
\begin{example}[classdata]Hierarchical data\\ 
\label{classdata} 
\noindent nstand=10\\ 
xm=\textcolor{VioletRed}{matrix}(nstand)\\ 
xm=\textcolor{VioletRed}{rann}(3)\\ 
ym=0.7*xm+0.1*xm\\ 
xm;\\ 
ym;\\ 
standdata=\textcolor{VioletRed}{newdata}(xm,ym,\textcolor{blue}{read->}(X,Y))\\ 
\textcolor{VioletRed}{stat}()\\ 
ntree=6\\ 
xt=\textcolor{VioletRed}{matrix}(ntree*nstand)\\ 
yt=\textcolor{VioletRed}{matrix}(ntree*nstand)\\ 
standv=\textcolor{VioletRed}{matrix}(ntree*nstand)\\ 
ex=\textcolor{VioletRed}{matrix}(ntree*nstand)\\ 
ey=\textcolor{VioletRed}{matrix}(ntree*nstand)\\ 
\textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
jj=0\\ 
\textcolor{VioletRed}{do}(i,1,nstand)\\ 
\textcolor{VioletRed}{do}(j,1,ntree)\\ 
 
jj=jj+1\\ 
standv(jj)=i\\ 
ex(jj)=\textcolor{VioletRed}{rann}()\\ 
ey(jj)=0.3*ex(jj)+0.3*\textcolor{VioletRed}{rann}()\\ 
xt(jj)=xm(i)+ex(jj)\\ 
yt(jj)=ym(i)+0.3*ex(jj)+0.3*\textcolor{VioletRed}{rann}()\\ 
\textcolor{VioletRed}{enddo}\\ 
\textcolor{VioletRed}{enddo}\\ 
/                           \\ 
\textcolor{VioletRed}{call}(\textcolor{teal}{transa})\\ 
treedata=\textcolor{VioletRed}{newdata}(standv,xt,yt,\textcolor{blue}{read->}(stand,\textcolor{teal}{x},\textcolor{teal}{y}))\\ 
\textcolor{VioletRed}{stat}()\\ 
 
{\color{ForestGreen}!! Making class level data object from treedata}\\ 
\textcolor{VioletRed}{classvector}(\textcolor{teal}{x},\textcolor{teal}{y},\textcolor{blue}{class->}stand,\textcolor{blue}{data->}treedata,\textcolor{blue}{mean->},\textcolor{blue}{min->})\\ 
standdata2=\textcolor{VioletRed}{newdata}(x[stand]\%mean,y[stand]\%mean,x[stand]\%min,y[stand]\%min,\\ 
\textcolor{blue}{read->}(\textcolor{teal}{x},\textcolor{teal}{y},xmin,ymin))\\ 
\textcolor{VioletRed}{stat}()\\ 
\textcolor{VioletRed}{classvector}(\textcolor{teal}{x},\textcolor{teal}{y},\textcolor{blue}{class->}stand,\textcolor{blue}{data->}treedata,\textcolor{blue}{mean->},\textcolor{blue}{expand->})\\ 
ex2=treedata(\textcolor{teal}{x})-\textcolor{teal}{x}\\ 
 
 
 
 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
 
\subsection{\textcolor{VioletRed}{values}() Different values of variables in \textcolor{teal}{DATA}}\index{values()} 
\label{values} 
Extracting values of class variables: \textcolor{VioletRed}{values}( ). 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm} 1 \tabto{5cm}  VECTOR \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  the vector getting differen values 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{arg} \tabto{3cm} 1 \tabto{5cm}  REALV \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  variables whose values obtained 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{data} \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{DATA} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The data set. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
The values found will be sorted in an increasing order. 
\end{note} 
\begin{note} 
After getting the values into a vector, 
the number of different values can be obtained 
using \textcolor{VioletRed}{nrows}() function. 
\end{note} 
 
\begin{note} 
\textcolor{VioletRed}{values}() function can be utilized e.g. in generating domains for all different 
owners or regions found in data. 
\end{note} 
\subsection{\textcolor{VioletRed}{transdata}() Own computations for \textcolor{teal}{DATA}}\index{transdata()} 
\label{transdata} 
\textcolor{VioletRed}{transdata}() is useful when all necassy computions are put into a \textcolor{teal}{TRANS} 
, and a \textcolor{teal}{DATA} is gone through obsevation by observation. 
This is useful e.g. when simulating harvesting schdules using a simulator which is defined 
as an ordinary \textcolor{teal}{TRANS}. The whole function is written below to indicate 
how users' own functions dealing with \textcolor{teal}{DATA} could be developped. 
@@data 
\hrule 
\vspace{0.2cm} 
 
\color{Green} 
\begin{verbatim} 
subroutine transdata(iob,io) 
call j_getdataobject(iob,io) 
if(j_err)return 
call j_clearoption(iob,io)  ! subroutine 
 
do iobs=j_dfrom,j_duntil 
call j_getobs(iobs) 
if(j_err)return 
end do !do iobs=j_dfrom,j_duntil 
 
if(j_depilog.gt.0)call dotrans(j_depilog,1) 
 
return 
\end{verbatim} 
\color{Black} 
\section{Statistical functions} 
\label{statistics} 
There are several statistical functions which can be used to compute basic statistics 
linear and and nonlinear regression, class means, standard deviations and standard errors 
in one or two dimensional tables using data sets. There are also functions 
which can be used to compute statistics from matrices, but these are described 
in Section  \ref{matrix} 
\subsection{\textcolor{VioletRed}{stat}() Basic statistics in \textcolor{teal}{DATA}}\index{stat()} 
\label{stat} 
Computes and prints basic statistics from data objects. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm} 0-1 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  kokopo 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args  \tabto{3cm}  0-99 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent variables for which the statistics are computed, 
the default is all variables in the data (all variables in the data matrix plus the output variables of the associated transformation object) and all output 
 
@@data 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{data}  \tabto{3cm}  -1,99  \tabto{5cm}   \textcolor{teal}{Data}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent 	data objects , see section Common options for default! weight 	gives the weight of each observations if weighted means and variances ar 
transformation or it can be a variable in the data object 
@@seecom 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{min}  \tabto{3cm}  -1,99 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent 	defines to which variables the minima are stored. 
If the value is character constant or character variable, 
then the name is formed by concatenating the character with the name of the argument 
variable. E.g. \textcolor{VioletRed}{stat}(\textcolor{teal}{x1},\textcolor{teal}{x2},\textcolor{blue}{min->}'\%pien') stores minimums into variables 
\textcolor{teal}{x1}\%pien and \textcolor{teal}{x2}\%pien. The default value for min  is '\%min'. 
If the values of the \textcolor{blue}{min->} option are variables, 
then the minima are stored into these variables. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{max}  \tabto{3cm} -1,99 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  maxima are stored, works as \textcolor{blue}{min->} 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{mean}  \tabto{3cm} -1,99 \tabto{5cm}  \textcolor{teal}{REAL}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  means are stored 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{var}  \tabto{3cm} -1,99 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  variances are stored 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{sd}  \tabto{3cm} -1,99 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  standard deviations are stored 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{sum}  \tabto{3cm} -1,99 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent 	sums are stored, (note that sums are not printed automatically) 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{nobs}  \tabto{3cm} -1 | 1 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent 	gives variable which will get the number of accepted observations, default is variable 'Nnobs'. If all observations are rejected due to fi 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{trans}  \tabto{3cm} -1 | 1 \tabto{5cm}  \textcolor{teal}{TRANS} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent 	transformation object which is executed for each observation. If there is a transformation object associated with the data object, those 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{filter}  \tabto{3cm} -1 | 1 \tabto{5cm}  Code \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  logical or arithmetic statement (nonzero value indicating True) describing which observations will be accepted. \textcolor{blue}{trans->} transformations 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{reject}  \tabto{3cm} -1 | 1 \tabto{5cm}  Code \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent \noindent reject  \tabto{3cm} -1 | 1 \tabto{5cm}  Code \tabto{7cm} 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent transafter  \tabto{3cm} -1 | 1 \tabto{5cm}   \textcolor{teal}{TRANS} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  transformation object which is executed for each observation which has passed the filter and is not rejected by the \textcolor{blue}{reject->}-optio 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
1: \textcolor{VioletRed}{stat}() function prints min, max, means, sd and sd of the mean computed 
as sd/\textcolor{VioletRed}{sqrt}(number of observations) 
\end{note} 
\begin{note} 
2: If the value of a variable is greater than or equal to 1.7e19, 
then that observation is rejected when computing statistics for that variable. 
\end{note} 
\singlespacing 
\begin{example}[statex]stat() computes minimums, maximums, means and std deviatons\\ 
\label{statex} 
\noindent data1=\textcolor{VioletRed}{data}(\textcolor{blue}{in->},\textcolor{blue}{read->}(\textcolor{teal}{x1},\textcolor{teal}{x2},\textcolor{teal}{x3}))\\ 
1,2,3\\ 
4,6,8\\ 
3,8,20\\ 
6,8,9\\ 
/    \\ 
\textcolor{VioletRed}{stat}()\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{data->}data1,\textcolor{blue}{sum->}\textcolor{teal}{x2},\textcolor{blue}{mean->},\textcolor{blue}{filter->}(\textcolor{teal}{x3}.le.18.5))\\ 
li=;list(\textcolor{teal}{x2}\%?);\\ 
@li;\\ 
\textcolor{VioletRed}{stat}(\textcolor{teal}{x1},\textcolor{blue}{data->}data1,\textcolor{blue}{weight->}\textcolor{teal}{x2})\\ 
\textcolor{VioletRed}{stat}(\textcolor{teal}{x1},\textcolor{blue}{weight->}(\textcolor{teal}{x2}**1.2))\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{cov}()  Covariance \textcolor{teal}{MATRIX}}\index{cov()} 
\label{cov} 
\textcolor{VioletRed}{cov}() computes the covariance matrix of variables in \textcolor{teal}{DATA}. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent output \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{MATRIX} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  symmetric aoutput matrix. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{arg} \tabto{3cm}  1-N \tabto{5cm}  \textcolor{teal}{LIST} or REALV \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  variables for which covarianes are computed, listing 
individually or given as a \textcolor{teal}{LIST}. 
@@data 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{weight} \tabto{3cm} -1|1 \tabto{5cm}  CODE \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Codeoption for weight of each observation. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
the output is not automaticall printed, but it can be printed using ';' 
at the end of line. 
\end{note} 
\begin{note} 
The covariance matrix can changed into correaltion matrix with \textcolor{VioletRed}{corrmatrix}() 
function. 
\end{note} 
\begin{note} 
If variable \textcolor{teal}{w} in the data is used as the weigth, this can be expressed as 
\textcolor{blue}{weight->}w 
\end{note} 
\singlespacing 
\begin{example}[covex]Example of covariance\\ 
\label{covex} 
\noindent X1=\textcolor{VioletRed}{matrix}(200)\\ 
X1=\textcolor{VioletRed}{rann}()\\ 
\textcolor{Red}{;do}(i,2,6)\\ 
ad=\textcolor{VioletRed}{matrix}(200)\\ 
ad=\textcolor{VioletRed}{rann}()\\ 
X"i"=X"i-1"+0.6*ad\\ 
\textcolor{Red}{;enddo}\\ 
\textcolor{teal}{Continue}=1\,\,\,{\color{ForestGreen}!error}\\ 
dat=\textcolor{VioletRed}{newdata}(X1...X6,\textcolor{blue}{read->}(\textcolor{teal}{x1}...x5))\\ 
\textcolor{teal}{Continue}=0\\ 
dat=\textcolor{VioletRed}{newdata}(X1...X6,\textcolor{blue}{read->}(\textcolor{teal}{x1}...x6))\\ 
co=\textcolor{VioletRed}{cov}(\textcolor{teal}{x1}...x5);\\ 
co=\textcolor{VioletRed}{cov}(dat\%keep);\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{corr}() Correlation \textcolor{teal}{MATRIX}}\index{corr()} 
\label{corr} 
\textcolor{VioletRed}{corr}(1) works similarly as \textcolor{VioletRed}{cov}() 
\subsection{\textcolor{VioletRed}{regr}() Linear regression}\index{regr()} 
\label{regr} 
Ordinary or stepwise linear regrwession can be computed using \textcolor{VioletRed}{regr}(). 
 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent output \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{REGR} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  sRegression object.. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{arg} \tabto{3cm}  1-N \tabto{5cm}  \textcolor{teal}{LIST} or REALV \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textcolor{teal}{y}-variable and \textcolor{teal}{x}-variables variables listing them 
individually or given as a \textcolor{teal}{LIST}. 
@@data 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{noint} \tabto{3cm} -1|0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textcolor{blue}{noint->} implies that the model does not include intercept 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{step} \tabto{3cm} -1|1  \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  t-value limit for stepwise regression. Regression variables are droped one-by-one 
until the absolute value of t-value is at least as large as the limit given. 
intercept is not considered. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{var} \tabto{3cm} -1|0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  if \textcolor{blue}{var->} is present \textcolor{VioletRed}{regr}() generated matrix ]output\%var[ for 
the variance-covariance matrix of the coeffcient estimates. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{corr} \tabto{3cm} -1|0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  if vcorr-> is present \textcolor{VioletRed}{regr}() generated matrix ]output\%corr[ for 
the correlation matrix of the coeffcient estimates. Standard deviations 
are put to the diagonal. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{variance} \tabto{3cm} -1|1 \tabto{5cm}  CODE \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The variance of the residual error is proportional to the function 
given in this codeoption. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
If the \textcolor{teal}{DATA} contains variables Regr and \textcolor{teal}{Resid}, then the values of 
the regression function and residuals are put into these columns. Space for these e 
coluns cab reserved with \textcolor{blue}{extra->} option in \textcolor{VioletRed}{data}() or in \textcolor{VioletRed}{newdata}() 
\end{note} 
\begin{note} 
If \textcolor{teal}{re} is the output of the \textcolor{VioletRed}{regr}() then function re() can be used to compute 
the value of the regression function. re() can contain from zero arguments up to the 
total number of arguments as arguments. The rest of arguments get 
the value they happen to have at the moment when the function is called. 
\end{note} 
Information from the \textcolor{teal}{REGR} object can be obtained with the following functions. 
let \textcolor{teal}{re} be the name of the \textcolor{teal}{REGR} object. 
\begin{itemize} 
\item   \textcolor{VioletRed}{coef}(\textcolor{teal}{re},xvar) = coefficient of variable xvar 
\item   \textcolor{VioletRed}{coef}(\textcolor{teal}{re},xvar,\textcolor{blue}{any->}) = returns zero if the variable is dropped from 
the equation in the stepwise procedure of 
due to linear dependencies. 
\item  \textcolor{VioletRed}{coef}(\textcolor{teal}{re},1) or \textcolor{VioletRed}{coef}(]re(,\$1) returns the intercept 
\item  \textcolor{VioletRed}{se}(\textcolor{teal}{re},xvar) standard error of a coeffcient 
\item  \textcolor{VioletRed}{mse}(\textcolor{teal}{re}) MSE of the regression 
\item  \textcolor{VioletRed}{rmse}(\textcolor{teal}{re}) RMSE of the regression 
\item 	\textcolor{VioletRed}{r2}(\textcolor{teal}{re}) adjusted R2. If the intercept is not present this can be negative. 
\item 	\textcolor{VioletRed}{nobs}(\textcolor{teal}{re}) number of observations used 
\item 	\textcolor{VioletRed}{len}(\textcolor{teal}{re}) number of independent variables (including intercept) used 
\end{itemize} 
\subsection{\textcolor{VioletRed}{nonlin}() Nonlinear regression}\index{nonlin()} 
\label{nonlin} 
To be raported later, see old manual 
\subsection{\textcolor{VioletRed}{varcomp}() Variance and covariance components}\index{varcomp()} 
\label{varcomp} 
TO BE RAPORTED LATER, see old manual 
\subsection{\textcolor{VioletRed}{classify}() Group means, variances and standard deviations}\index{classify()} 
\label{classify} 
Classifies data with respect to one or two variables, get class 
frequencies, 
means and standard deviations of 
argument variables. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm}  1 \tabto{5cm}  Matrix \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent \noindent Output \tabto{3cm}  1 \tabto{5cm}  Matrix \tabto{7cm} 
A matrix containing class information (details given below) 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 1- \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent \noindent Args \tabto{3cm} 1- \tabto{5cm}  REAL \tabto{7cm} 
Variables for which class means are computed. 
 
@@data 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{teal}{x}  \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The first variable defining classes. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{minobs} \tabto{3cm} -1|1 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  minimum number of observation in a class, obtained by merging classes. Does 
not work if \textcolor{teal}{z}-> is given 
 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{xrange} \tabto{3cm}  -1|0|2 \tabto{5cm}  Real \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Defines the range of \textcolor{teal}{x} variable. If \textcolor{blue}{xrange->} is given without 
arguments and \textbf{Jlp22} variables \textcolor{teal}{x}\%min and \textcolor{teal}{x}\%max exist, they are used, and 
if they do not exist an error occurs. Note that these variables can be 
generate with \textcolor{VioletRed}{stat}(\textcolor{blue}{min->},\textcolor{blue}{max->}). Either xtrange-> or \textcolor{blue}{any->} must be presente. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{any} \tabto{3cm} -1|0 \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent Indicates that each value of the \textcolor{teal}{x}-variables foms a separate class. 
either \textcolor{blue}{xrange->} or nay-> must be present. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{tailtofirst} \tabto{3cm} -1|0 \tabto{5cm}   \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  If the \textcolor{teal}{x}-variable is less than the lower xrange, the observation is put to the first class 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{tailtolast} \tabto{3cm} -1|0 \tabto{5cm}   \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  If the \textcolor{teal}{x}-variable is greater than the upper xrange, the observation is put to the first class 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{classes} \tabto{3cm} -1|1 \tabto{5cm}  Real \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Number of classes, If \textcolor{blue}{dx->} is not given, the default is that range is 
divided into 7 classes. 
\textcolor{blue}{minobs->} minimum number of observations in one class. Classes are merged so that this can 
be obtained. Does not work if \textcolor{teal}{z}-> is present. 
	! 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{teal}{z} \tabto{3cm} -1|1 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The second variable (\textcolor{teal}{z} variable) defining classes in two dimensional classification. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{zrange}  \tabto{3cm} -1|0|2 \tabto{5cm}  Real \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Defines the range and class width for a continuous \textcolor{teal}{z} 
variable. If \textbf{Jlp22} variables \textcolor{teal}{x}\%min and \textcolor{teal}{x}\%max exist, 
provided by \textcolor{VioletRed}{stat}(\textcolor{blue}{min->},\textcolor{blue}{max->}), they are used. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{dz}  \tabto{3cm} -1|1 \tabto{5cm}  Real \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Defines the class width for a continuous \textcolor{teal}{z} variable. 
mean if \textcolor{teal}{z} variable is given, class means are stored in a matrix given in the \textcolor{blue}{mean->} 
option 
classes number of classes, has effect if dx is not defined in xrangedx->. The default is 
\textcolor{blue}{classes->}7. If \textcolor{teal}{z} is given then, there can be a second argument, which gives the 
number of classes for \textcolor{teal}{z}, the default being 7. 
@@trans 
@@filter 
@@reject 
 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{print} \tabto{3cm} -1|1 \tabto{5cm}  Real \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  By setting \textcolor{blue}{print->}0, the classification matrix is not printed. 
The matrix can be utilized directly in \textcolor{VioletRed}{drawclass}() function. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
If \textcolor{teal}{z} variable is not given then first column in printed output and the first row in the output 
matrix (if given) contains class means of the \textcolor{teal}{x} variable. In the output matrix the last element is 
zero. Second column an TARKASTA VOISIKO VAIHTAArow shows number of observations in 
class, and the last element is the total number of observations. Third row shows the class means 
of the argument variable. The fourth row in the output matrix shows the class standard 
deviations, and the last element is the overall standard deviation 
\end{note} 
\begin{note} 
Variable \textcolor{teal}{Accepted} gets the number of accepted obsevations. 
\end{note} 
\subsection{\textcolor{VioletRed}{class}() Class of a given value}\index{class()} 
\label{class} 
Function \textcolor{VioletRed}{class}() computes the class of given value when classifying values 
similarly as done in \textcolor{VioletRed}{classify}(). 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The class number. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 1 \tabto{5cm}  Real \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The value whose class is determined. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{xrange} \tabto{3cm} 2 \tabto{5cm}  Real \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The range of values. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{dx} \tabto{3cm} N|1 \tabto{5cm}  Real \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The class width. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{classes} \tabto{3cm} N|1 \tabto{5cm}  Real \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent The number of classes. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
Either \textcolor{blue}{dx->} or \textcolor{blue}{classes->} must be given. If both are given, \textcolor{blue}{dx->} dominates. 
\end{note} 
\begin{note} 
If \textcolor{VioletRed}{stat}() is used earlier for variables including Var1 and 
options \textcolor{blue}{min->} and \textcolor{blue}{max->} are present, then 
\textcolor{blue}{xrange->}(Var1\%min,Var1\%max) is assumed. 
\end{note} 
\section{Linear programming} 
\label{LP} 
This chapter decribes the key points  of the Jlp-algoritm and the available 
\textbf{Jlp22} functions. 
\subsection{JLP linear programming algorithm} 
\label{JLPalgo} 
This section will later describe more closely the theoretical aspects of the linear programming 
functions. Now only some key concepts are listed. Now the reader is referred to the old 
JLP manual \href{run:./jlp92.pdf}{jlp92.pdf}, the description of the factory optimization in 
\href{run:./lappilempinen.pdf}{lappilempinen.pdf}, and an application of the factory optimization in 
\href{run:./hyvonenetal2019.pdf}{hyvonenetal2019.pdf} 
 
The development of JLP algorithm 
! 
\begin{itemize} 
\item JLP 
 
\begin{itemize} 
\item The JLP algorithm was designed for forest management planning problems having the following structure. 
A simulator generates a large number of treatment schedules 
for each stand in a group of stands. 
\item In an optimization problem a linear combination of sums of 
variables (e.g. amount of harvested sawlogs during a period) produced in treatments is maximized or minimized subject to constraints which are also 
linear combinations of variables. 
 
\item The key point is 
the generalized upper bound (GUB) technique of Dantzik and Van Slyke (see \href{run:./gub.pdf}{gub.pdf}) 
which I reinvented. The key idea is to remove with algebraic tricks 
the area constraints. 
 
\item In a optimization problem with schedules generated for each stand, there must be a area 
constraint for each stand telling that shares of schedules add up to one in each stand. 
\item In the GUB technique, the area contraints can 
be dropped with slight overhead cost. In a typical problem,the data can consist of 10000 stands, and and 
optimization problem can consist of 10 contraints for the sums ofe variables. Using an ordinary LP software 
in one iterative optimization step, a matrix consisting of 100200100 elements is updated. 
In JLP the equivalent 
step is computed by updating a matrix consisting 100 elements. 
 
\item The heuristic algorithm of Hoganson and Rose (1984) and 
Hoganson and Kapple (1991) leads to similar computations where a schedule 
in  a stand is selected using shadow prices. Their shadow prices are updated heuritically but 
JLP algorith updates the prices using the linear programming theory. 
 
\item The key concept in GUB is the key variable, in our case the key schedule, which is 
any of the schedules which has nonzero weight. 
 
\item JLP algorithm is also using the ordinary upper bound technique. If there is both 
lower and upper bound in a contraint, the standard theory assumes that the lower bound and upper bound 
constraints are presented  as different constraints. In the ordinary upper bound technique there 
is only one constraint, and the algorithm keeps either of the bounds as the active bound. 
\item JLP used own matrix subroutines which computed all the time the explicit inverse 
of the basis matrix. 
\item When a constraint is not binding, in standard algorithms, a residual variable tells 
the difference between the contraint row and the active bound. JLP reduced the dimension of the basis matrix, 
which was a feasible solution because the explicit inverse of the basis was used. 
\item JLP  introduced domains, i.e.. subsets of stands into the problem 
defition. They decrease the memory needs and help to formulate more reasonable problems. 
Their utility to define spatial constraints is not fully utilized. 
\item JLP allowed to compute new variables from the simulated variables. 
I have suggested (in vain) since 1992 that Mela would compute only forest variables and economic variables 
would be feeded in JLP. This way it would not be necessary to resimulate when trying different prices. 
\item JLP offered the possibility to duplicate a schdedule. GAYA group has utilized this by duplicating a schdeule so tha that 
in one copy of a no-harvest schedule the final stae has postive net presetn value and anothe copy does not. 
\item JLP was written in Fortran77, which did not have 
dynamic allocation, pointers or own data types. 
\item In writing the JLP algorithm, oaly very small part of the working time went to get the algorithm work correctly 
mathematically. The most difficult thing was the fight against rounding errors, i.e. trying to infer whther a small 
number is zero or not, and whether a number is really larger than another number even if the computer values indicated that. 
\item JLP had a precompiler which could be used to handle compiler options and the sizes of vectors. 
Fortran77 did not have dynamic alloacation of vectors. 
\end{itemize} 
\item \textbf{J}, the successor for JLP 
\begin{itemize} 
\item Version 0.9.3 was published in 2004 
\item Initially the same JLP algorithm but \textbf{J} was using matrix routines of Fletcher which were changed into 
double precision. Flethcer's code was written in Fortran77. 
\item \textbf{J} was written in Fortran90 which has dynamic allocation of vectors, pointers etc. 
\item New tools 
for preprocessing of data and postprocessing of results, and these computations 
can be used  also without LP problems. 
\item Mela has not 
included \textbf{J} as 
as the optimizer, but it is possible to pull out simulated schedules from Mela and then 
define and solve linear programming problems using \textbf{J}. 
item  \textbf{J} version 2.0. published in 2013 made it possible optimize simultatenously 
forestry and transportations to factories 
and factory production. Theory is published in \href{run:./lappilempinen.pdf}{Lappi and Lempinen 2014} \hspace{0.2cm} Paper explaining the theory behing factory optimization. 
\item The generalized upper bound tehcnique is extended 
for constraints which tell that 
all harvested timber volume in a stand is transported somewhere. 
\item The key idea is to have in each stand and for all harvested log types and for all periods a key factory to which some timber is tranported 
provided that the cuttings produce that log type for that period. 
end{itemize} 
\item  DTRAN algoritm of Hoganson is an competitor of \textbf{Jlp22} because it can deal with 
factories also. 
! 
\end{itemize} 
\subsection{Problem definition object} 
\label{problemo} 
Problem definition object is a compound object produced by the \textcolor{VioletRed}{problem}() function, and it is 
described in Linear programming. 
\subsection{\textcolor{VioletRed}{problem}() PROB for \textcolor{VioletRed}{jlp}() and \textcolor{VioletRed}{jlpz}()}\index{problem()jlp()jlpz()} 
\label{problem} 
An LP-problem is defined in similar way as a TEXT object. 
The following rules apply for problem rows: 
\begin{itemize} 
\item On the left there is any number of terms separated with + or -. 
\item Each term is either a variable name or coefficient*variable. 
\item A coefficient can be 
\begin {itemize} 
\item a number 
\item Computation code inside parenthesis. These coefficients are computed within \textcolor{VioletRed}{problem}(). 
\item computation code within apostrophes. These coefficients are computed in \textcolor{VioletRed}{jlp}(), \textcolor{VioletRed}{jlpz}() or \textcolor{VioletRed}{jlpcoef}() functions. 
\item  A legal name for an object. 
\end{itemize} 
\item The variable must be a legal object name. 
The optimization variable can either be a \textcolor{teal}{z}-variable or \textcolor{teal}{x}-variable. 
A \textcolor{teal}{x}-variable is an variable in schedules data set. 
In \textcolor{VioletRed}{jlpz}() all variables are \textcolor{teal}{z} variables. Function \textcolor{VioletRed}{jlpz}() unpacks lists to \textcolor{teal}{z}-variables. 
\item The right side of the first row ends either by ==min or ==max. 
\item On the right side for other rows there is a number or code for computing a numeric value 
within parnthesis or within apostrophes or a variable name. Numbers within parenthesis are 
computed within \textcolor{VioletRed}{problem}() but numbers within apostrophes are computed in \textcolor{VioletRed}{jlp}(), \textcolor{VioletRed}{jlpz}() or \textcolor{VioletRed}{jlpcoef}() functions. 
Between the left side and the right side there is\\ 
\begin{itemize} 
\item  >Low <Up 
\item >Low 
\item <Up 
\item = Value 
\end{itemize} 
\end{itemize} 
 
Low, Up and Value can be\\ 
\begin{itemize} 
\item Numeric constant 
\item Text within apostrophes. This value is interpreted later in \textcolor{VioletRed}{jlp}() or \textcolor{VioletRed}{jlpz}() 
\item A \textcolor{teal}{REAL} variable. The value is looked later in \textcolor{VioletRed}{jlp}() or \textcolor{VioletRed}{jlpz}() 
\item A \textcolor{teal}{REAL} variable preceded by '-' or '+'. The value is obtained in \textcolor{VioletRed}{jlp}() or \textcolor{VioletRed}{jlpz}() 
\item Text with or without surrounding parenthesis. This value is computed now. 
\end{itemize} 
 
 
Sign < means less or equal, and > means greater or equal. Pure less or greater would be meaningless in this context.\\ 
If there two different identical rows 
the other having '<' and the other '>', an error occurs, because the solution is obtained faster that way. 
If all rows have both lower limit and upper limit, the solution is obtained in half time 
when merging the lines. 
 
In problems with \textcolor{teal}{x}-data, there can be domain rows, which tell for what subset 
of the treament units the following constraints apply. 
Domains are defined using c-variables, i.e. variables in the unit data, 
or in nonhierarchical, flat data set, the value of the c-variable is obtained 
from the first observation where the variable given in \textcolor{blue}{unit->} gets a different 
value than in the previous observation. The variables in the flat data file 
having the same value for all observations in the same unit are called also c-variables. 
Later there will be variables related to factory problems. 
A domain definition ends with ':'. In a domain row there can be any number of domain definitions. 
There are three diffent kinds of domain definitions\\ 
All indicates all units. This domain is assumed to all rows before the first domain row.\\ 
c-variable, a nonzero value tells that the unit belongs to the domain.\\ 
A piece of code which tells how the  indicator is computed from the c-variables. A nonzero value indicates 
that the unit belongs to the domain. Recall tha logical operations produce 1 for True and 0 for false. 
The code is parsed at this point, so syntax errors are detected at this point, 
but other errors (e.g. division by zero) are detected in \textcolor{VioletRed}{jlp}(). 
 
 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output  \tabto{3cm} 1  \tabto{5cm}   PROB  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  the PROB object created 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{print}  \tabto{3cm} 0|1  \tabto{5cm}   \textcolor{teal}{REAL}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  If \textcolor{blue}{print->} gives a value, then values >2 tell that the problem is printed (default) 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
Examples are give in connection of \textcolor{VioletRed}{jlpz}() and \textcolor{VioletRed}{jlp}(). 
\end{note} 
\begin{note} 
the cofficients in a PROB can be interpreted also 
using \textcolor{VioletRed}{jlpcoef}() function, which is used also by \textcolor{VioletRed}{jlp}() and \textcolor{VioletRed}{jlpz}() functions. 
\end{note} 
\begin{note} 
Note 
Problems without \textcolor{teal}{x}-variables can be solved also without \textcolor{VioletRed}{problem}() function by 
feeding in the necessary matrices. 
\end{note} 
 
\subsection{\textcolor{VioletRed}{jlp}() for schedules \textcolor{teal}{DATA}}\index{jlp()} 
\label{jlp} 
\textcolor{VioletRed}{jlp}() solves linear programming problems. The function now assumes that there is 
schedules data. Without schedules \textcolor{VioletRed}{jlpz}() must be used. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output  \tabto{3cm} 1  \tabto{5cm}     \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Output tells how objects created by \textcolor{VioletRed}{jlp}() are named. There is no JLP object type, 
but the output indicates that e.g. the following objects are created. Many other objects are created 
but they are currently used for debuggging purposes and they will be described later. They can be 
used also to teach how the algorithm proceeds. 
\begin{itemize} 
\item Output\%weights The weights of the schedules, see teh example below. 
\item  Output\%objective= value of the objective function 
\item  	Output\%rows= the vector the valuef of the constraint rows. 
\item   Output\%shprice = vector of shadow prices of the rows 
\item  Output\%varx= \textcolor{teal}{LIST} of xvariables in the schedules data 
Output\%varxproblem= \textcolor{teal}{LIST} of \textcolor{teal}{x}-variables in the PROB 
\item  Output\%xsum= Vector of sums of variables in Output\%varxproblem 
\item  Output\%xprice Shadow prices of the variables in Output\%varxproblem 
\item   Output\%xsumint The sums of \textcolor{teal}{x}-variables in the integer approximation, generated if \textcolor{blue}{integer->} is present 
\end{itemize} 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{problem} \tabto{3cm} 1 \tabto{5cm}  PROB  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent Problem object produced with \textcolor{VioletRed}{problem}() 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{data} \tabto{3cm} 1 \tabto{5cm}  \textcolor{teal}{DATA} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Schedules data (Sic!) linked to it with unitdata if ubit-> is not given 
\textcolor{blue}{unit->} gives the  unit variable which changes when unit changes. 
	! 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{teal}{z} \tabto{3cm} -1|0  \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent This option must be present when there are \textcolor{teal}{z}-variables in the problem, but the \textcolor{teal}{z}-variables 
need not to be listed. The reason for this option is that often the purpose 
is to define the problem using only \textcolor{teal}{x}-variables, but due to typing errors all variables 
are not among \textcolor{teal}{x}-variables. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{showdomain} \tabto{3cm} -1-99 \tabto{5cm}  \textcolor{teal}{CHAR} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent the sums of the \textcolor{teal}{x}-variables are computed also for these domains. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{print} \tabto{3cm} -1:1 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textcolor{blue}{print->} set printing level to 2, \textcolor{blue}{print->}value set the printling level to value, where zero indicates no 
printing. Default level is 1. 
 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{debug} \tabto{3cm} -1|0|1 \tabto{5cm}  REAl \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textcolor{blue}{debug->} sets debugging on at start \textcolor{blue}{debug->}value sets debugging on when pivot=value, 
After the debugging pivot, \textbf{Jlp22} generates \textcolor{VioletRed}{pause}() and during the pause the user can do any computations. Before 
the pause some additional matrices are generated in addition to matrices which are used 
the computations. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{stop} \tabto{3cm} -1|1 \tabto{5cm}  CODE \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  codeoption telling when iterations over units stop. The variables 
\textcolor{teal}{Round} (current number of rounds over units), Change\% (change of objective during the last 10 
rounds), \textcolor{teal}{Imp} (number of entering schedules outside the active set when updating the active set), 
Active\% ( \%-size of the active set) and all global variables in JLP22. 
default is \textcolor{blue}{stop->}(Change\%.lt.0.01.and.\textcolor{teal}{Round}.ge.10). 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent fast\% \tabto{3cm} -1|1 \tabto{5cm}  CODE  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  codeoption computing Fast\%. All schedules whose price is larger than Fast\% 
of the current key schedule. Same variables can be used as for \textcolor{blue}{stop->} and also current Fast\%. 
A possible rule is fast\%->(\textcolor{VioletRed}{min}(Fast\%+5-(\textcolor{teal}{Imp}.gt.0)*10,98))). The default is Fast\%=85. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{maxrounds}\% \tabto{3cm} -1|1 \tabto{5cm}  \textcolor{teal}{REAL}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  maximum number of rounds over all units. Default \textcolor{blue}{maxrounds->}3000 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{report} \tabto{3cm} -1|1 \tabto{5cm}   \textcolor{teal}{CHAR}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  the results are written to the file spesified. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent echo|-1|0 \tabto{3cm}   \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent When results are printed to a file, \textcolor{blue}{echo->} implies that they are written alo to the terminal. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{refac} \tabto{3cm} -1|1| \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textcolor{blue}{refac->}value tells that the factors of the basis matrix are recomputed after value pivot operations. 
The default is \textcolor{blue}{refac->}1000. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{tole} \tabto{3cm} -1|1 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textcolor{blue}{tole->}value tells that the default tolerances are multiplied with the value. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
The \textcolor{blue}{data->} must now always refer to schdedules data (for several reasons) 
\end{note} 
\begin{note} 
In small problems dCPU, i.e. increase of used CPU time is not very accurate. 
\end{note} 
\begin{note} 
\textcolor{VioletRed}{jlp}() stores the sums of \textcolor{teal}{x}-variables into output\% -variables. If there are domains 
or showdomains, the variable names get postfix [domaindefinition], show examples 
below 
\end{note} 
\singlespacing 
\begin{example}[jlpex]jlp() solves linear programming problem\\ 
\label{jlpex} 
\noindent cdata=\textcolor{VioletRed}{data}(\textcolor{blue}{in->}'cdat.txt',\textcolor{blue}{read->}(cdata\%nobsw,site))\\ 
\textcolor{VioletRed}{stat}()\\ 
xdata=\textcolor{VioletRed}{data}(\textcolor{blue}{in->}'xdat.txt',\textcolor{blue}{read->}(npv\#0,npv\#5,income1...income5),\textcolor{blue}{up->}cdata)\\ 
\textcolor{VioletRed}{stat}()\\ 
 
 
\textcolor{teal}{proba}=\textcolor{VioletRed}{problem}();\\ 
{\color{ForestGreen}** In this problem the 4\% net present value at the beginning is maximixe}\\ 
{\color{ForestGreen}** subject to the constraints telling that net incomes are nondecreasing}\\ 
npv\#0==max\\ 
\textcolor{Red}{;do}(i,2,5)\\ 
income"i"-income"i-1"=0\\ 
\textcolor{Red}{;enddo}\\ 
npv\#5-npv\#0>0\\ 
/            \\ 
plist=;list(\textcolor{teal}{proba}\%?);\\ 
@plist;\\ 
 
\textcolor{teal}{jlpa}=\textcolor{VioletRed}{jlp}(\textcolor{blue}{problem->}\textcolor{teal}{proba},\textcolor{blue}{data->}xdata,\textcolor{blue}{showdomain->}('site.le.3','site.gt.3'))\\ 
{\color{ForestGreen}** sums of x-variables are stored into the same variables with jlpa\%prefix}\\ 
\textcolor{teal}{jlpa}\%income5;\\ 
\textcolor{teal}{jlpa}\%income5[site.le.3];\\ 
{\color{ForestGreen}** Note income variables are in theory equal but as their}\\ 
{\color{ForestGreen}** values are computed numerically, they differ.}\\ 
jlist=;list(\textcolor{teal}{jlpa}\%?);\\ 
{\color{ForestGreen}**  these could be printed with @jlist;}\\ 
 
{\color{ForestGreen}** jlpa\%weights gets the weights of schdedules}\\ 
{\color{ForestGreen}** combain the weights with the data}\\ 
xdataw=\textcolor{VioletRed}{newdata}(xdata,\textcolor{teal}{jlpa}\%weights,\textcolor{blue}{read->}w)\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{sum->})\\ 
{\color{ForestGreen}**sum of weights is equal to the number of stands}\\ 
w\%sum;\\ 
{\color{ForestGreen}** weighted statistics}\\ 
{\color{ForestGreen}** thesw agree with the jlp solution}\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{weight->}w,\textcolor{blue}{sum->})\\ 
\textcolor{Red}{;do}(i,1,\textcolor{VioletRed}{len}(xdataw\%keep))\\ 
@xdataw\%keep(i)\%sum;\\ 
\textcolor{Red}{;enddo}\\ 
{\color{ForestGreen}***Problem with domains}\\ 
\textcolor{teal}{probb}=\textcolor{VioletRed}{problem}();\\ 
npv\#0==max\\ 
{\color{ForestGreen}**Domain definitions:}\\ 
{\color{ForestGreen}**there can be several domain definitions on a row}\\ 
{\color{ForestGreen}** one domain definition is:}\\ 
{\color{ForestGreen}**    a logical statement in terms of stand variable}\\ 
{\color{ForestGreen}**    a stand variable whose nonzero value implies that the domain applies}\\ 
{\color{ForestGreen}**    All  indicates all stands.}\\ 
{\color{ForestGreen}** before first domain definition row the default Domain is All}\\ 
site.le.3:\,site.gt.3:\\ 
\textcolor{Red}{;do}(i,2,5)\\ 
income"i"-income"i-1"=0\\ 
\textcolor{Red}{;enddo}\\ 
npv\#5-npv\#0>0\\ 
/            \\ 
plistb=;list(\textcolor{teal}{probb}\%?);\\ 
{\color{ForestGreen}*** these  could be printed with @plistb;}\\ 
\textcolor{teal}{jlpb}=\textcolor{VioletRed}{jlp}(\textcolor{blue}{problem->}\textcolor{teal}{probb},\textcolor{blue}{data->}xdata,\textcolor{blue}{showdomain->}'3.lt.site')\\ 
\textcolor{teal}{jlpb}\%income5;\\ 
\textcolor{teal}{jlpb}\%income5[site.gt.3];\\ 
\textcolor{teal}{jlpb}\%income5[3.lt.site];\\ 
\textcolor{teal}{Continue}=1\\ 
{\color{ForestGreen}** Now problem without constraints}\\ 
probc=\textcolor{VioletRed}{problem}();\\ 
npv\#0==max\\ 
/         \\ 
jlpc=\textcolor{VioletRed}{jlp}(\textcolor{blue}{problem->}probc,\textcolor{blue}{data->}xdata,\textcolor{blue}{showdomain->}'3.lt.site')\\ 
\textcolor{teal}{Continue}=0\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{jlpz}() for an ordinary Lp-problem.}\index{jlpz()} 
\label{jlpz} 
The problem defined in the \textcolor{VioletRed}{problem}() function can be given in \textcolor{blue}{problem->} or by giving values 
for \textcolor{blue}{max->} or \textcolor{blue}{min->}, and zmatriz->, \textcolor{blue}{rhs->} and \textcolor{blue}{rhs2->} options. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output  \tabto{3cm} 1  \tabto{5cm}     \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Theres is no jlpz -object, but the output is used to name 
several objects created with the function. The list of created objects can be seen 
with \\ 
outlist=;list(Output\%?);\\ 
The objects can then be be seen with \\ 
@outlist;\\ 
The objects created can be used in debugging the algorithm and also in teaching how the alogorithm 
proceeds. This will demonstrated later. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{problem} \tabto{3cm}  -1|1 \tabto{5cm}  PROB \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent Problem defined in \textcolor{VioletRed}{problem}(). If \textcolor{blue}{problem->} is not present 
the following 3 options must be present and either \textcolor{blue}{min->} or \textcolor{blue}{max->}. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{zmatrix}  \tabto{3cm} -1|1 \tabto{5cm}  \textcolor{teal}{MATRIX} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Constraint matrix. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{rhs}  \tabto{3cm} -1|1 \tabto{5cm}  \textcolor{teal}{MATRIX} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Lower bounds as row or column vector having as many elements as there are 
rows in the matrix given in \textcolor{blue}{zmatrix->}. Use value -1.e20 to indicate that there is no lower bound. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{rhs2}  \tabto{3cm} -1|1 \tabto{5cm}  \textcolor{teal}{MATRIX} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Upper bounds as row or column vector having as many elements as there are 
rows  in the matrix given in \textcolor{blue}{zmatrix->}. Use value 1.e20 to indicate that there is no upper bound. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{max} \tabto{3cm} -1|1 \tabto{5cm}  \textcolor{teal}{MATRIX} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The objective vector for a maximization problem. It must have as many elements as the 
constraint matrix has columns. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{min} \tabto{3cm} -1|1 \tabto{5cm}  \textcolor{teal}{MATRIX} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The objective vector for a minimization problem. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{dpivot} \tabto{3cm} -1|1 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The objective function etc are printed after  dpivot pivots. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{debug} \tabto{3cm} -1|0|1 \tabto{5cm}  \textcolor{teal}{REAL} \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  NOT UP TO DATE Gives the value of Pivot at which a pause is generated. During the pause all essential 
matrices can be studied. Pure \textcolor{blue}{debug->} is the same as \textcolor{blue}{debug->}0, which implies that pause is generated before 
pivoting. If variable \textcolor{teal}{Debug} is given a new value, the the next pause is generated when Pivot.eq.\textcolor{teal}{Debug}. The default is that 
the next pause is generated after the next pivot. The \textcolor{VioletRed}{pause}() function can now use also \\ 
lis=;list(Output\%?); \\ 
even if ;list is input programming function which are not otherwise allowed during \textcolor{VioletRed}{pause}(). 
	! 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
The ordinary Lp-algorithm can be taught using matrices generated in pause to show how the algorithm proceeds. 
\end{note} 
\singlespacing 
\begin{example}[jlpzex]Problem with only \textcolor{teal}{z}-variables.\\ 
\label{jlpzex} 
\noindent \textcolor{teal}{probza}=\textcolor{VioletRed}{problem}()\\ 
2*\textcolor{teal}{x1}+\textcolor{teal}{x2}+3*\textcolor{teal}{x3}-2*x4+10*x5==min\\ 
\textcolor{teal}{x1}+\textcolor{teal}{x3}-x4+2*x5=5\\ 
\textcolor{teal}{x2}+2*\textcolor{teal}{x3}+2*x4+x5=9\\ 
\textcolor{teal}{x1}<7\\ 
\textcolor{teal}{x2}<10\\ 
\textcolor{teal}{x3}<1\\ 
x4<5\\ 
x5<3\\ 
/   \\ 
probzalist=;list(\textcolor{teal}{probza}\%?);\,{\color{ForestGreen}!subobjects created}\\ 
@probzalist;\,{\color{ForestGreen}!printing the subobjects}\\ 
 
\textcolor{teal}{jlpza}=\textcolor{VioletRed}{jlpz}(\textcolor{blue}{problem->}\textcolor{teal}{probza},\textcolor{blue}{dpivot->}1)\\ 
jlpzalist=;list(\textcolor{teal}{jlpza}\%?);\\ 
@jlpzalist;\\ 
{\color{ForestGreen}** The same problem is defined using different tools available.}\\ 
	!                                                                                  \\ 
probzb=\textcolor{VioletRed}{problem}()\\ 
2*\textcolor{teal}{x1}+\textcolor{teal}{x2}+x34c*x34+10*x5==min\\ 
\textcolor{teal}{x1}+\textcolor{teal}{x3}-x4+(2+0)*x5=5\\ 
\textcolor{teal}{x2}+2*\textcolor{teal}{x3}+2*x4+x5=9\\ 
\textcolor{teal}{x1}<7\\ 
\textcolor{teal}{x2}<i10\\ 
\textcolor{teal}{x3}<'1+zero'\\ 
x4<5\\ 
x5<3\\ 
/   \\ 
x34=\textcolor{VioletRed}{list}(\textcolor{teal}{x3},x4)\\ 
x34c=\textcolor{VioletRed}{matrix}(2,\textcolor{blue}{values->}(3,-2))\\ 
i10=10\\ 
zero=0\\ 
jlpzb=\textcolor{VioletRed}{jlpz}(\textcolor{blue}{problem->}probzb,\textcolor{blue}{dpivot->}1)\\ 
{\color{ForestGreen}**Now different problem is obtained}\\ 
x34c=\textcolor{VioletRed}{matrix}(2,\textcolor{blue}{values->}(3,-3))\\ 
zero=1\\ 
jlpzb=\textcolor{VioletRed}{jlpz}(\textcolor{blue}{problem->}probzb,\textcolor{blue}{dpivot->}1)\\ 
**                                                                                              \\ 
{\color{ForestGreen}**The matrices needed to use jlpz without problem-> can be obtained from a problem as follows}\\ 
\textcolor{teal}{jlpcoefa}=\textcolor{VioletRed}{jlpcoef}(\textcolor{teal}{probza})\\ 
jlpcoefalist=;list(\textcolor{teal}{jlpcoefa}\%?);\\ 
\textcolor{teal}{jlpza}=\textcolor{VioletRed}{jlpz}(\textcolor{blue}{zmatrix->}\textcolor{teal}{jlpcoefa}\%matrix,\textcolor{blue}{rhs->}\textcolor{teal}{jlpcoefa}\%rhs,\textcolor{blue}{rhs2->}\textcolor{teal}{jlpcoefa}\%rhs2,\textcolor{blue}{min->}\textcolor{teal}{jlpcoefa}\%objective)\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{ \textcolor{VioletRed}{jlpcoef}() PROB into numeric form}\index{jlpcoef()} 
\label{jlpcoef} 
This function is used at the beginning of \textcolor{VioletRed}{jlp}() and \textcolor{VioletRed}{jlpz}(). 
\begin{note} 
see \textcolor{VioletRed}{jlpz}() for how \textcolor{VioletRed}{jlpcoef}() can be used to demonstate problem defintion using matrices only. 
\end{note} 
\section{Plotting figures} 
\label{Plotting} 
The graphiscs of the current version of \textbf{Jlp22} is produced with Gnuplot, see 
\url{http://www.overleaf.com} 
\textbf{Jlp22} offers an alternative interface 
to Gnuplot, and it is quite easy to add more ploting routines later. 
\subsection{\textcolor{VioletRed}{show}(), \textcolor{blue}{show->}  and \textcolor{blue}{continue->}}\index{show()} 
\label{show} 
By default, plotting functions plots (shows) FIGs immediately. When the final figure 
consists of several subfigures, it is convenient to prevent plotting using \textcolor{blue}{show->}0. 
In developing scripts, it is convenient to switch with \textcolor{blue}{show->}. This can be done by giving 
option in form \textcolor{blue}{show->}showfig, then the ploting can be controlled with \textcolor{teal}{REAL} showfig. 
 
Withing \textcolor{VioletRed}{show}() it is possible to define or redefine \textcolor{blue}{xlabel->}, \textcolor{blue}{ylabel->},\textcolor{blue}{title->}, 
\textcolor{blue}{xrange->} and \textcolor{blue}{yrange->} 
 
By default \textbf{Jlp22} generates \textcolor{VioletRed}{pause}() after showing a \textcolor{teal}{FIG}. During \textcolor{VioletRed}{pause}(), the user can give 
any commands. If the user types 'e', then \textbf{Jlp22} generates a error condition causing return to 
to \textcolor{Red}{sit>}. 
 
 
It is possible to collect a \textcolor{teal}{FIG} first (e.g. using loops), and 
show then the \textcolor{teal}{FIG} using \textcolor{VioletRed}{show}() function. The argument of \textcolor{VioletRed}{show}() can be 
either a \textcolor{teal}{FIG} or the name of the .jfig file withing apostrohes. 
Thus it is possible 
to edit the file using Gnuplot capabilities. 
 
\singlespacing 
\begin{example}[showex]Example of \textcolor{VioletRed}{show}()\\ 
\label{showex} 
\noindent fi=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}\textcolor{VioletRed}{sqrt2}(\textcolor{teal}{x}),\textcolor{teal}{x}->\textcolor{teal}{x},\textcolor{blue}{xrange->}(-50,50),\textcolor{blue}{continue->}fcont)\\ 
\textcolor{VioletRed}{show}(fi,\textcolor{blue}{xrange->}(-60,60),\textcolor{blue}{xlabel->}'NEWX]Times\,Roman,16[',\textcolor{blue}{ylabel->}'NEWY]Courier,10[',\textcolor{blue}{continue->}fcont)\\ 
\textcolor{VioletRed}{show}(fi,\textcolor{blue}{axes->}10,\textcolor{blue}{continue->}fcont)\\ 
\textcolor{VioletRed}{show}(fi,\textcolor{blue}{axes->}01,\textcolor{blue}{continue->}fcont)\\ 
\textcolor{VioletRed}{show}(fi,\textcolor{blue}{axes->}00,\textcolor{blue}{continue->}fcont)\\ 
\textcolor{teal}{Window}='400,800'\\ 
\textcolor{VioletRed}{show}(fi,\textcolor{blue}{continue->}fcont)\\ 
\textcolor{teal}{Window}='700,700'\\ 
fi=\textcolor{VioletRed}{drawline}(1,10,3,1,\textcolor{blue}{color->}\textcolor{teal}{Red},\textcolor{blue}{continue->}fcont)\\ 
\textcolor{VioletRed}{show}(fi,\textcolor{blue}{xrange->}(1.1,11),\textcolor{blue}{continue->}fcont)\,{\color{ForestGreen}!the line is not visible}\\ 
dat=\textcolor{VioletRed}{data}(\textcolor{blue}{read->}(\textcolor{teal}{x},\textcolor{teal}{y}),\textcolor{blue}{in->})\\ 
1,4\\ 
2,6\\ 
3,2\\ 
5,1\\ 
/  \\ 
\textcolor{VioletRed}{stat}()\\ 
fi=\textcolor{VioletRed}{plotyx}(\textcolor{teal}{y},\textcolor{teal}{x},\textcolor{blue}{continue->}fcont)\,\,{\color{ForestGreen}! Gnuplot hides points at border}\\ 
\textcolor{VioletRed}{show}(fi,\textcolor{blue}{xrange->}(0,6),\textcolor{blue}{yrange->}(0,7),\textcolor{blue}{continue->}fcont)\\ 
 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
 
\subsection{Font in \textcolor{blue}{title->}, \textcolor{blue}{xlabel->}, \textcolor{blue}{ylabel->}, \textcolor{blue}{label->}} 
\label{font} 
It is possible to change the the font by appending the the font defintion 
between ][ at the end of the label, e.g., \\ 
\textcolor{blue}{xlabel->}'My-xlabel]Times-Roman,15['\\ 
where 15 is the size of the font. Available fonts vary from system to system. Web provides further inforamtion, see e.g 
\url{https://gnuplot.sourceforge.net/docs_4.2/node356.html}\\ 
According to this page, the following fonts may be available 
Helvetica 
Helvetica Bold 
Helvetica Oblique 
Helvetica Bold Oblique	 \\ 
Times Roman 
Times Bold 
Times Italic 
Times Bold Italic	 \\ 
Courier 
Courier Bold 
Courier Oblique 
Courier Bold Oblique	 \\ 
Symbol	 \\ 
Hershey/Cartographic\_Roman 
Hershey/Cartographic\_Greek 
Hershey/Simplex\_Roman 
Hershey/Simplex\_Greek 
Hershey/Simplex\_Script	\\ 
Hershey/Complex\_Roman 
Hershey/Complex\_Greek 
Hershey/Complex\_Script 
Hershey/Complex\_Italic 
Hershey/Complex\_Cyrillic 
Hershey/Duplex\_Roman 
Hershey/Triplex\_Roman 
Hershey/Triplex\_Italic	\\ 
Hershey/Gothic\_German 
Hershey/Gothic\_English 
Hershey/Gothic\_Italian 
Hershey/Symbol\_Set\_1 
Hershey/Symbol\_Set\_2 
Hershey/Symbol\_Math	 \\ 
ZapfDingbats. 
space within font name can be replaced with '-', e.g. Times-Roman. 
\subsection{\textcolor{blue}{color->}\textcolor{teal}{Black}, \textcolor{teal}{Red}, \textcolor{teal}{Green}, \textcolor{teal}{Blue}, \textcolor{teal}{Cyan} , \textcolor{teal}{Violet}, \textcolor{teal}{Yellow}, \textcolor{teal}{Orange}} 
\label{color} 
Gnuplot allows arbitrary color definitions. Currently the above colors can be used. 
General color definitions are implemented  when requested. 
\subsection{\textcolor{teal}{Terminal}} 
\label{terminal} 
It is possible to change the terminal type used by Gnuplot by giving 
the name of the terminal to the predefine \textcolor{teal}{CHAR} variable \textcolor{teal}{Terminal}. 
The default is \newline \textcolor{teal}{Terminal}='qt'. 
\subsection{\textcolor{teal}{Window} size and shape} 
\label{window} 
It is possible to change the window size and shape of Gnuplot by 
using the predefined \textcolor{teal}{CHAR} variable \textcolor{teal}{Window}. 
The default is \newline 
\textcolor{teal}{Window}='700,700' 
\subsection{Legends} 
\label{legend} 
\item The default legends by Gnuplot do not look nice, and they are not implemented. 
The user can write own legends using \textcolor{blue}{label->} option in \textcolor{VioletRed}{drawline}(). 
\subsection{\textcolor{VioletRed}{plotyx}() Scatterplot}\index{plotyx()} 
\label{plotyx} 
\textcolor{VioletRed}{plotyx}() makes scatterplot. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output  \tabto{3cm}  1 \tabto{5cm}   FIGURE  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The FIGURE object created or updated. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args  \tabto{3cm}  1 | 2  \tabto{5cm}   \textcolor{teal}{REAL}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textcolor{teal}{y} and \textcolor{teal}{x}-variable, if \textcolor{blue}{func->} is not present. 
In case \textcolor{teal}{y}-variable is given with \textcolor{blue}{func->}only,  \textcolor{teal}{x}-variable is given as argument. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{data}  \tabto{3cm}  N | 1  \tabto{5cm}   \textcolor{teal}{DATA}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textcolor{teal}{Data} object used, default the last data object created or the dta given 
with data=\textcolor{VioletRed}{list}(). 
@@figu 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{mark}  \tabto{3cm}  N | 1  \tabto{5cm}   \textcolor{teal}{REAL} | \textcolor{teal}{CHAR}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The mark used in the plot. Numeric values refer to 
mark types of Gnuplot. The mark can be given also as \textcolor{teal}{CHAR} varible or constant. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{func} \tabto{3cm}  N | 1  \tabto{5cm}   Code  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent   Code option telling how the \textcolor{teal}{y}-variable is computed. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\begin{note} 
By default \textcolor{VioletRed}{plotyx}() uses the names of the \textcolor{teal}{x}-variable and \textcolor{teal}{y}-variable 
inte xlabe and ylabel. If the names contain e.g. underscore \_, this would make 
the next character as under script. To plot the underscore character, 
use \textcolor{blue}{xlabel->} 	and \textcolor{blue}{ylabel->}, and replace \_ with \\\_. 
\end{note} 
\singlespacing 
\begin{example}[plotyxex]plotyx()\\ 
\label{plotyxex} 
\noindent xmat=\textcolor{VioletRed}{matrix}(\textcolor{blue}{do->}(0,10,0.001))\\ 
\textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
\textcolor{teal}{y}=2+3*\textcolor{teal}{x}+0.4*\textcolor{teal}{x}*\textcolor{teal}{x}+4*\textcolor{VioletRed}{rann}()\\ 
/                                                                                                                      \\ 
datyx=\textcolor{VioletRed}{newdata}(xmat,\textcolor{blue}{read->}\textcolor{teal}{x},\textcolor{blue}{maketrans->}\textcolor{teal}{transa},\textcolor{blue}{extra->}(\textcolor{teal}{Regf},\textcolor{teal}{Resid}))\\ 
fi=\textcolor{VioletRed}{plotyx}(\textcolor{teal}{y},\textcolor{teal}{x},\textcolor{blue}{continue->}fcont)\\ 
fi=\textcolor{VioletRed}{plotyx}(\textcolor{teal}{x},\textcolor{blue}{func->}\textcolor{teal}{transa}(\textcolor{teal}{y}),\textcolor{blue}{mark->}3,\textcolor{blue}{color->}Orange,\textcolor{blue}{continue->}fcont)\\ 
reg=\textcolor{VioletRed}{regr}(\textcolor{teal}{y},\textcolor{teal}{x})\\ 
figyx=\textcolor{VioletRed}{plotyx}(\textcolor{teal}{y},\textcolor{teal}{x},\textcolor{blue}{show->}0)\\ 
fi=\textcolor{VioletRed}{plotyx}(\textcolor{teal}{Regf},\textcolor{teal}{x},\textcolor{blue}{append->},\textcolor{blue}{continue->}fcont)\\ 
fir=\textcolor{VioletRed}{plotyx}(\textcolor{teal}{Resid},\textcolor{teal}{x},\textcolor{blue}{continue->}fcont)\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\begin{note} 
With data with integer values, the default ranges of Gnuplot may be hide point at 
borderlines. 
\end{note} 
\begin{note} 
\textcolor{teal}{fi}=\textcolor{VioletRed}{plotyx}() produces or updates file \textcolor{teal}{fi}.jfig] which contains 
Gnuplot commands and file \textcolor{teal}{fi}.jfi0 containg data. 
\end{note} 
\subsection{\textcolor{VioletRed}{draw}() Draws a function}\index{draw()} 
\label{draw} 
\textcolor{VioletRed}{draw}() draws a function. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output  \tabto{3cm}  1 \tabto{5cm}   FIGURE  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The FIGURE object created or updated. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{func} \tabto{3cm}  N | 1  \tabto{5cm}   Code  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent   Code option telling how the \textcolor{teal}{y}-variable is computed. 
@@draw 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{mark}  \tabto{3cm}  N | 1  \tabto{5cm}   \textcolor{teal}{REAL} | \textcolor{teal}{CHAR}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The mark used in the plot. 
Numeric values refer to. 
mark types of Gnuplot. The mark can be given also as \textcolor{teal}{CHAR} varible or constant. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{width}  \tabto{3cm}  0 | 1  \tabto{5cm}   \textcolor{teal}{REAL}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  the width of the line 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\singlespacing 
\begin{example}[drawex]Example of \textcolor{VioletRed}{draw}()\\ 
\label{drawex} 
\noindent fi=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}\textcolor{VioletRed}{sin}(\textcolor{teal}{x}),\textcolor{teal}{x}->\textcolor{teal}{x},\textcolor{blue}{xrange->}(0,2*\textcolor{teal}{Pi}),\textcolor{blue}{color->}\textcolor{teal}{Blue},\textcolor{blue}{continue->}fcont)\\ 
fi=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}\textcolor{VioletRed}{cos}(\textcolor{teal}{x}),\textcolor{teal}{x}->\textcolor{teal}{x},\textcolor{blue}{xrange->}(0,2*\textcolor{teal}{Pi}),\textcolor{blue}{color->}\textcolor{teal}{Red},\textcolor{blue}{append->},\textcolor{blue}{continue->}fcont)\\ 
\textcolor{Red}{;if}(\textcolor{VioletRed}{type}(figyx).ne.FIGURE)plotyxex\\ 
\textcolor{VioletRed}{show}(figyx,\textcolor{blue}{continue->}fcont)\\ 
reg0=\textcolor{VioletRed}{regr}(\textcolor{teal}{y},\textcolor{teal}{x})\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{data->}datyx,\textcolor{blue}{min->},\textcolor{blue}{max->})\\ 
figyx=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}reg0(),\textcolor{teal}{x}->\textcolor{teal}{x},\textcolor{blue}{xrange->},\textcolor{blue}{color->}\textcolor{teal}{Violet},\textcolor{blue}{append->},\textcolor{blue}{continue->}fcont)\\ 
\textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
\textcolor{teal}{x2}=\textcolor{teal}{x}*\textcolor{teal}{x}\\ 
/                                                           \\ 
reg2=\textcolor{VioletRed}{regr}(\textcolor{teal}{y},\textcolor{teal}{x},\textcolor{teal}{x2},\textcolor{blue}{data->}datyx,\textcolor{blue}{trans->}\textcolor{teal}{transa})\\ 
\textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
\textcolor{teal}{x2}=\textcolor{teal}{x}*\textcolor{teal}{x}\\ 
fu=reg2()\\ 
/        \\ 
\textcolor{teal}{Continue}=1\,\,{\color{ForestGreen}!Error}\\ 
figyx=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}\textcolor{teal}{transa}(fu),\textcolor{blue}{xrange->},\textcolor{blue}{color->}Orange,\textcolor{blue}{append->},\textcolor{blue}{continue->}fcont)\\ 
continue=0\\ 
figyx=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}\textcolor{teal}{transa}(fu),\textcolor{teal}{x}-\textcolor{teal}{x},\textcolor{blue}{xrange->},\textcolor{blue}{color->}Orange,\textcolor{blue}{append->},\textcolor{blue}{continue->}fcont)\\ 
\textcolor{teal}{Continue}=1\,\,{\color{ForestGreen}!Errors}\\ 
fi=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}\textcolor{VioletRed}{sin}(\textcolor{teal}{x}),\textcolor{teal}{x}->\textcolor{teal}{x})\\ 
fi=\textcolor{VioletRed}{draw}(\textcolor{blue}{xrange->}(1,100),\textcolor{blue}{func->}Sin(\textcolor{teal}{x}),\textcolor{teal}{x}->\textcolor{teal}{x})\\ 
\textcolor{teal}{Continue}=0\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\begin{note} 
\textcolor{teal}{fi}=\textcolor{VioletRed}{draw}() produces or updates file \textcolor{teal}{fi}.jfig] which contains 
Gnuplot commands and file \textcolor{teal}{fi}.jfi0 containg data. 
\end{note} 
\subsection{\textcolor{VioletRed}{drawclass}() Draws results of \textcolor{VioletRed}{classify}()}\index{drawclass()classify()} 
\label{drawclass} 
\textcolor{VioletRed}{drawclass}() can plot class means and/or lines connecting class means, with 
or without standard errors of class means, within class standard deviations, 
within class variances, frequency histograms, which can be scaled so that 
density funtions can be drawn in the same figure. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output  \tabto{3cm} 1  \tabto{5cm}   FIGURE  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  FIGURE object updated or generated. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{teal}{Arg}  \tabto{3cm}  1 \tabto{5cm}   \textcolor{teal}{MATRIX}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  A \textcolor{teal}{MATRIX} generated with \textcolor{VioletRed}{classify}(). 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{se}  \tabto{3cm}  N | 0  \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent Presence of option tells to include that error bars showing standard errors 
of class means computed as \textcolor{VioletRed}{sqrt}(sample\_within-class\_variance)/number\_of\_obs) 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{sd}  \tabto{3cm}  N | 0  \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Within-class standard deviations are drawn, if there is no \textcolor{blue}{mean->} 
option. If there is also \textcolor{blue}{mean->} option then sd-error line are drawn 
around mean similarly as with \textcolor{blue}{se->} standard error lines are drawn. Both se error bars and sd errors bars 
can be obtained by first making figure with sd error bars with some color 
and then calling \textcolor{VioletRed}{drawclass}() with different color, possibly with larger 
\textcolor{blue}{width->}, and with \textcolor{blue}{append->}, see the example below. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{mean}  \tabto{3cm}  N | 0  \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Class measn are drawn. Has effect only together with \textcolor{blue}{sd->}. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{var}  \tabto{3cm}  N | 0  \tabto{5cm}     \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent Within-class sample variances are drawn. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{histogram}  \tabto{3cm}   N | 0  \tabto{5cm}     \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent Within-class sample variances are drawn. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{freq}  \tabto{3cm}  N | 0  \tabto{5cm}     \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Absolute  frequences are drawn in histogram. Default 
percentage if \textcolor{blue}{area->} is not present 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{area}  \tabto{3cm}  N |0  \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent the histogram is scaled so that that it can be overlayed to density function 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{cumulative}  \tabto{3cm} N|0  \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  cumulativer histogram is drawn. If \textcolor{blue}{freq->} is presented then absolute 
cumulative frequences are drawn, otherwise cumulative percentages are draw, except if also \textcolor{blue}{area->} 
is presenet then then cumulative realtive freaquences are drawn. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\singlespacing 
\begin{example}[drawclassex]Examples of \textcolor{VioletRed}{drawclass}()\\ 
\label{drawclassex} 
\noindent X=\textcolor{VioletRed}{matrix}(\textcolor{blue}{do->}(1,100,0.1))\\ 
e=\textcolor{VioletRed}{matrix}(\textcolor{VioletRed}{nrows}(X))\\ 
e=\textcolor{VioletRed}{rann}()\\ 
X2=0.01*X*.X\,{\color{ForestGreen}!elementwise product}\\ 
Y=2*X+0.01*X2+(1+0.3*X)*.e\,\,{\color{ForestGreen}!nonequal error variance,quadratic function}\\ 
dat=\textcolor{VioletRed}{newdata}(X,Y,X2,\textcolor{blue}{read->}(\textcolor{teal}{x},\textcolor{teal}{y},\textcolor{teal}{x2}),\textcolor{blue}{extra->}(\textcolor{teal}{Regf},\textcolor{teal}{Resid}))\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{min->},\textcolor{blue}{max->})\\ 
reg=\textcolor{VioletRed}{regr}(\textcolor{teal}{y},\textcolor{teal}{x})\,{\color{ForestGreen}! Regf and resid are put into the data}\\ 
fi=\textcolor{VioletRed}{plotyx}(\textcolor{teal}{y},\textcolor{teal}{x},\textcolor{blue}{continue->}fcont)\\ 
fi=\textcolor{VioletRed}{drawline}(\textcolor{teal}{x}\%min,\textcolor{teal}{x}\%max,reg(\textcolor{teal}{x}\%min),reg(\textcolor{teal}{x}\%max),\textcolor{blue}{width->}3,\textcolor{blue}{color->}\textcolor{teal}{Cyan},\textcolor{blue}{append->},\textcolor{blue}{continue->}fcont)\\ 
cl=\textcolor{VioletRed}{classify}(\textcolor{teal}{Resid},\textcolor{teal}{x}->\textcolor{teal}{x},\textcolor{blue}{xrange->},\textcolor{blue}{classes->}5)\\ 
fi=\textcolor{VioletRed}{drawclass}(cl,\textcolor{blue}{color->}\textcolor{teal}{Blue},\textcolor{blue}{continue->}fcont)\\ 
fi=\textcolor{VioletRed}{drawclass}(cl,\textcolor{blue}{mean->},\textcolor{blue}{sd->},\textcolor{blue}{continue->}fcont,\textcolor{blue}{color->}\textcolor{teal}{Red})\\ 
fi2=\textcolor{VioletRed}{drawclass}(cl,\textcolor{blue}{se->},\textcolor{blue}{continue->}fcont)\\ 
fi=\textcolor{VioletRed}{drawclass}(cl,\textcolor{blue}{se->},\textcolor{blue}{continue->}fcont,\textcolor{blue}{color->}\textcolor{teal}{Black},\textcolor{blue}{width->}2,\textcolor{blue}{append->})\\ 
fi=\textcolor{VioletRed}{drawclass}(cl,\textcolor{blue}{sd->},\textcolor{blue}{continue->}fcont)\\ 
fi=\textcolor{VioletRed}{drawclass}(cl,\textcolor{blue}{var->},\textcolor{blue}{continue->}fcont)\\ 
{\color{ForestGreen}** x-values were equally distributed due to data construction}\\ 
fi=\textcolor{VioletRed}{drawclass}(cl,\textcolor{blue}{histogram->},\textcolor{blue}{area->},\textcolor{blue}{continue->}fcont)\\ 
fi=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}\textcolor{VioletRed}{pdf}(0,\textcolor{VioletRed}{rmse}(reg)),\textcolor{teal}{x}->\textcolor{teal}{x},\textcolor{blue}{xrange->},\textcolor{blue}{append->},\textcolor{blue}{continue->}fcont)\,{\color{ForestGreen}! xrange comes from stat()}\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\begin{note} 
In previous versions of \textbf{Jlp22} if \textcolor{blue}{se->} and \textcolor{blue}{sd->} were both present, the error 
both bars were plotted. This possibility will be included later. 
\end{note} 
\subsection{\textcolor{VioletRed}{drawline}() Draws a polygon through points.}\index{drawline()} 
\label{drawline} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output  \tabto{3cm}  1 \tabto{5cm}   FIGURE  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The FIGURE object created or updated. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm} 1-  \tabto{5cm}  \textcolor{teal}{REAL} | \textcolor{teal}{MATRIX}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The points which are connected: 
\begin{itemize} 
\item  \textcolor{teal}{x1},...,xn,\textcolor{teal}{y1},...,yn The \textcolor{teal}{x}-coordinates and \textcolor{teal}{y}-coordinates, 
\$n \geq 1\$ 
\item   If there is only one argument which is a 
matrix object having two rows, then the first row is assumed to give the \textcolor{teal}{x} values 
and the second row the \textcolor{teal}{y} values. 
\item   If there are two matrix (vector) arguments, then 
the first matrix gives the \textcolor{teal}{x}-values and the second matrix gives the \textcolor{teal}{y}-values. 
It does not matter if arguments are row or column vectors. 
\end{itemize} 
@@figure 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{label}  \tabto{3cm}  N | 1  \tabto{5cm}   \textcolor{teal}{CHAR}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Label written to the end of line. If arguments define only one point, 
then with \textcolor{blue}{label->} option one can write text to any point. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{mark}  \tabto{3cm}  N | 1  \tabto{5cm}   \textcolor{teal}{REAL} | \textcolor{teal}{CHAR}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The mark used in the plot. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{break}  \tabto{3cm}  N | 0  \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The line is broken when a \textcolor{teal}{x}-value is smaller than the previous one. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{set}  \tabto{3cm}  N|1  \tabto{5cm}   \textcolor{teal}{REAL}<6  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Set to which lines are put. If the option is not present, 
then a separate Gnuplot plot command with possible color and width information 
is generated for each \textcolor{VioletRed}{drawline}() and data points are stored 
in file \textcolor{teal}{fi}.jfi0, i.e. the same file used by \textcolor{VioletRed}{plotyx}(). 
If set is given e.g as \textcolor{blue}{set->}3, then it is possible to plot a large number of lines 
with the same width and color. The data points are stored into file \textcolor{teal}{fi}.jfi3. This is 
useful e.g. when drawing figures showing transportation of timber to factories 
for huge number of sample plots. 
Numeric values refer to Gnuplot mar types. 
The mark can be given also as \textcolor{teal}{CHAR} varible or constant. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{width}  \tabto{3cm}  0 | 1  \tabto{5cm}   \textcolor{teal}{REAL}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  the width of the line. Default: \textcolor{blue}{width->}1 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{label} \tabto{3cm}  N |1  \tabto{5cm}  \textcolor{teal}{CHAR}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  Text plotted to the end of line. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\singlespacing 
\begin{example}[drawlineex]Example of \textcolor{VioletRed}{drawline}()\\ 
\label{drawlineex} 
\noindent ;drawlineex:\\ 
fi=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}\textcolor{VioletRed}{sin}(\textcolor{teal}{x}),\textcolor{teal}{x}->\textcolor{teal}{x},\textcolor{blue}{xrange->}(0,2*\textcolor{teal}{Pi}),\textcolor{blue}{color->}\textcolor{teal}{Blue},\textcolor{blue}{continue->}fcont)\\ 
fi=\textcolor{VioletRed}{drawline}(\textcolor{teal}{Pi},\textcolor{VioletRed}{sin}(\textcolor{teal}{Pi})+0.1,\textcolor{blue}{label->}'\textcolor{VioletRed}{sin}()',\textcolor{blue}{append->},\textcolor{blue}{continue->}fcont)\\ 
xval=\textcolor{VioletRed}{matrix}(\textcolor{blue}{do->}(1,10));\\ 
mat=\textcolor{VioletRed}{matrix}(\textcolor{blue}{values->}(xval,xval+1,xval,xval+2,xval,xval+3))\\ 
fi=\textcolor{VioletRed}{drawline}(mat,\textcolor{blue}{color->}\textcolor{teal}{Red},\textcolor{blue}{continue->}fcont)\\ 
fi=\textcolor{VioletRed}{drawline}(mat,\textcolor{blue}{color->}Orange,\textcolor{blue}{break->},\textcolor{blue}{continue->}fcont)\\ 
xm=\textcolor{VioletRed}{matrix}(\textcolor{blue}{do->}(0,100,1))\\ 
e=\textcolor{VioletRed}{matrix}(101)\\ 
e=\textcolor{VioletRed}{rann}(0,3)\\ 
ym=2*\textcolor{teal}{x}+0.3*xm*.xm+0.4+e\\ 
dat=\textcolor{VioletRed}{newdata}(xm,ym,\textcolor{blue}{read->}(\textcolor{teal}{x},\textcolor{teal}{y}),\textcolor{blue}{extra->}(\textcolor{teal}{Regf},\textcolor{teal}{Resid}))\\ 
reg=\textcolor{VioletRed}{regr}(\textcolor{teal}{y},\textcolor{teal}{x})\\ 
figyx=\textcolor{VioletRed}{plotyx}(\textcolor{teal}{y},\textcolor{teal}{x},\textcolor{blue}{continue->}fcont)\\ 
figr=\textcolor{VioletRed}{plotyx}(\textcolor{teal}{Resid},\textcolor{teal}{x},\textcolor{blue}{continue->}fcont)\\ 
reg0=\textcolor{VioletRed}{regr}(\textcolor{teal}{y},\textcolor{teal}{x})\\ 
\textcolor{VioletRed}{stat}(\textcolor{blue}{min->},\textcolor{blue}{max->})\\ 
figyx=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}reg0(),\textcolor{teal}{x}->\textcolor{teal}{x},\textcolor{blue}{xrange->},\textcolor{blue}{color->}\textcolor{teal}{Violet},\textcolor{blue}{append->},\textcolor{blue}{continue->}fcont)\\ 
 
\textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
\textcolor{teal}{x2}=\textcolor{teal}{x}*\textcolor{teal}{x}\\ 
\textcolor{VioletRed}{if}(\textcolor{VioletRed}{type}(reg2).eq.\textcolor{teal}{REGR})fu=reg2()\\ 
/                                                                                              \\ 
reg2=\textcolor{VioletRed}{regr}(\textcolor{teal}{y},\textcolor{teal}{x},\textcolor{teal}{x2},\textcolor{blue}{trans->}\textcolor{teal}{transa})\\ 
figyx=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}\textcolor{teal}{transa}(fu),\textcolor{teal}{x}->\textcolor{teal}{x},\textcolor{blue}{xrange->},\textcolor{blue}{color->}Orange,\textcolor{blue}{append->},\textcolor{blue}{continue->}fcont)\\ 
\textcolor{teal}{Continue}=1\,\,{\color{ForestGreen}!Errors}\\ 
fi=\textcolor{VioletRed}{draw}(\textcolor{blue}{func->}\textcolor{VioletRed}{sin}(\textcolor{teal}{x}),\textcolor{teal}{x}->\textcolor{teal}{x})\\ 
fi=\textcolor{VioletRed}{draw}(\textcolor{blue}{xrange->}(1,100),\textcolor{blue}{func->}Sin(\textcolor{teal}{x}),\textcolor{teal}{x}->\textcolor{teal}{x})\\ 
\textcolor{teal}{Continue}=0\\ 
\textcolor{Red}{;if}(wait)\textcolor{Red}{;pause}\\ 
\textcolor{Red}{;return}\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\begin{note} 
if a line is not visible, this may be caused by the fact that 
the starting or ending point is outside the range specified by \textcolor{blue}{xrange->} or \textcolor{blue}{yrange->}. 
\end{note} 
\subsection{\textcolor{VioletRed}{plot3d}() 3d-figure.}\index{plot3d()} 
\label{plot3d} 
Plot 3d-figure with indicater contours  with colours. 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Output  \tabto{3cm}  1   \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  \textcolor{teal}{fi}=\textcolor{VioletRed}{plot3d}() generates Gnuplot file \textcolor{teal}{fi}.jfig. 
No figure object is produced. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent Args \tabto{3cm}  1  \tabto{5cm}   \textcolor{teal}{MATRIX}  \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent  The argument is a matrix having 3 columns for \textcolor{teal}{x},\textcolor{teal}{y} and \textcolor{teal}{z}. 
\end{changemargin} 
\vspace{0.3cm} 
\hrule 
\vspace{0.3cm} 
\noindent \textcolor{blue}{sorted}  \tabto{3cm}  N | 1  \tabto{5cm}    \tabto{7cm} 
\begin{changemargin}{3cm}{0cm} 
\noindent \textcolor{VioletRed}{plot3d}() uses the Gnuplot function splot, which requires that the data 
is sorted withe respect to the \textcolor{teal}{x}-variable. \textcolor{blue}{sorted->} indicates that the argument matrix is sorted 
either natrurally or with \textcolor{VioletRed}{sort}() function. If \textcolor{blue}{sort->} is not presented, plot3 
sorts the data. 
\end {changemargin} 
\hrule 
\vspace{0.2cm} 
\singlespacing 
\begin{example}[plot3dex]plot3d() example see p.  328 in Mehtatalo & Lappi 2020\\ 
\label{plot3dex} 
\noindent mat=\textcolor{VioletRed}{matrix}(1000000,3)\\ 
mat2=\textcolor{VioletRed}{matrix}(1000000,3)\\ 
\textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\,{\color{ForestGreen}!second order response surface}\\ 
\textcolor{teal}{x}=0\\ 
\textcolor{teal}{x2}=0\\ 
xy=0\\ 
irow=1\\ 
\textcolor{VioletRed}{do}(ix,1,1000)\\ 
\textcolor{teal}{y}=0\\ 
\textcolor{teal}{y2}=0\\ 
xy=0\\ 
\textcolor{VioletRed}{do}(iy,1,1000)\\ 
mat(irow,1)=\textcolor{teal}{x}\\ 
mat(irow,2)=\textcolor{teal}{y}\\ 
mat(irow,3)=12+8*\textcolor{teal}{x}-7*\textcolor{teal}{x2}+124*\textcolor{teal}{y}+8*xy-13*\textcolor{teal}{y2}\\ 
mat2(irow,1)=\textcolor{teal}{x}\\ 
mat2(irow,2)=\textcolor{teal}{y}\\ 
mat2(irow,3)=50+160*\textcolor{teal}{x}-5*\textcolor{teal}{x2}-40*\textcolor{teal}{y}-20*xy+10*\textcolor{teal}{y2}\\ 
irow=irow+1\\ 
\textcolor{teal}{y}=\textcolor{teal}{y}+0.01\\ 
\textcolor{teal}{y2}=\textcolor{teal}{y}*\textcolor{teal}{y}\\ 
xy=\textcolor{teal}{x}*\textcolor{teal}{y}\\ 
\textcolor{VioletRed}{enddo}\\ 
\textcolor{teal}{x}=\textcolor{teal}{x}+0.01\\ 
\textcolor{teal}{x2}=\textcolor{teal}{x}*\textcolor{teal}{x}\\ 
\textcolor{VioletRed}{enddo}\\ 
/                           \\ 
{\color{ForestGreen}*** This example takes some time}\\ 
\textcolor{VioletRed}{call}(\textcolor{teal}{transa})\\ 
fi=\textcolor{VioletRed}{plot3d}(mat,\textcolor{blue}{sorted->},\textcolor{blue}{continue->}fcont)\\ 
{\color{ForestGreen}** This is commneted because it takes some time}\\ 
{\color{ForestGreen}** fi=plot3d(mat2,sorted->,continue->fcont)}\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
 
\section{Splines, stem splines,  and volume functions} 
\label{spline} 
There are several spline functions. 
\subsection{\textcolor{VioletRed}{tautspline}() Creates a more regular TAUTSPLINE}\index{tautspline()} 
\label{tautspline} 
\textcolor{VioletRed}{tautspline}(\textcolor{teal}{x1},‚Ä¶,xn,\textcolor{teal}{y1},‚Ä¶,yn[,\textcolor{blue}{par->}][,\textcolor{blue}{sort->}][,\textcolor{blue}{print->}])// 
Output:// 
An interpolating cubic spline, which is more robust than an ordinary cubic spline. To prevent 
oscillation (which can happen with splines) the function adds automatically additional knots 
where needed.// 
Arguments:// 
\textcolor{teal}{x1},‚Ä¶,xn the \textcolor{teal}{x} values// 
d1,‚Ä¶,dn the \textcolor{teal}{y} values.// 
There must be at least 3 knot point, i.e. 6 arguments.// 
Options:// 
par Parameter determining the smoothness of the curve. The default is zero, 
which produces ordinary cubic spline. A typical value may 2.5. Larger values mean 
that the spline is more closely linear between knot points.// 
sort the default is that the x‚Äôs are increasing, if not then \textcolor{blue}{sort->} option must be given// 
print if \textcolor{blue}{print->} option is given, the knot points are printed (after possible sorting). 
The resulting spline can be utilized using \textcolor{VioletRed}{value}() function. 
The taut spline algorithm is published by de Boor (1978) on pages 310-314. The source code 
was loaded from Netlib. 
\subsection{\textcolor{VioletRed}{stemspline}() Creates STEMSPLINE}\index{stemspline()} 
\label{stemspline} 
To be reported later, soon if needed. 
\subsection{\textcolor{VioletRed}{stempolar}() Puts a stem into polar coordinates}\index{stempolar()} 
\label{stempolar} 
To be reported later 
\subsection{stemcurve() Defines stem curve interpolated linearly between points} 
\label{stemcurve} 
To be reported later, soon if needed. 
\subsection{\textcolor{VioletRed}{laasvol}() Volume equations of Laasasenaho}\index{laasvol()} 
\label{laasvol} 
To be reported later. 
\subsection{\textcolor{VioletRed}{laaspoly}() Polynomial stem curves of Laasasenaho}\index{laaspoly()} 
\label{laaspoly} 
To be reported later. 
\section{Bit functions} 
\label{bit} 
bit functions help to store large amount of binary variables in small space. 
These functions are used in domain calculations 
\subsection{Bitmatrix} 
\label{bitmatrixo} 
A \textcolor{teal}{BITMATRIX} is an object which can store in small memory space large matrices 
used to indicate logical values. A \textcolor{teal}{BITMATRIX} object is produced by \textcolor{VioletRed}{bitmatrix}() 
function or by \textcolor{VioletRed}{closures}() function from an existing bitmatrix. Bitmatrix values 
can be read from the input stream or file or set by \textcolor{VioletRed}{setvalue}() function. The 
values of bitmatrix elements can be accessed with \textcolor{VioletRed}{value}() function. 
\begin{note} 
Also ordinary real variable can be used to store bits. See bit functions. 
\end{note} 
\subsection{\textcolor{VioletRed}{setbits}() Sets bits}\index{setbits()} 
\label{setbits} 
To be reported alter 
\subsection{\textcolor{VioletRed}{clearbits}() Clears bits}\index{clearbits()} 
\label{clearbits} 
To be reported later 
\subsection{\textcolor{VioletRed}{getbit}() : Gets bit}\index{getbit()} 
\label{getbit} 
To be reported later, see old manual 
\subsection{\textcolor{VioletRed}{bitmatrix}() Creates \textcolor{teal}{BITMATRIX}}\index{bitmatrix()} 
\label{bitmatrix} 
To be reported later,  see old manual 
\subsection{\textcolor{VioletRed}{setvalue}() Set value for a \textcolor{teal}{BITMATRIX}}\index{setvalue()} 
\label{setvalue} 
To be reported later,  see old manual 
\subsection{\textcolor{VioletRed}{closures}() Convex closure}\index{closures()} 
\label{closures} 
To be desrribed later,  see old manual 
\section{Misc. functions} 
\label{misc} 
There are some functions which do not belong to previous classes. 
\subsection{\textcolor{VioletRed}{properties}() Properties of subjects}\index{properties()} 
\label{properties} 
This function has been used to define properties of factories. 
It will replaced with othe means in later versions. 
\subsection{\textcolor{VioletRed}{cpu}() Cpu time}\index{cpu()} 
\label{cpu} 
\singlespacing 
\begin{example}[cpuex]Example of cpu-timing\\ 
\label{cpuex} 
\noindent cpu0=\textcolor{VioletRed}{cpu}()\\ 
a=\textcolor{VioletRed}{matrix}(100000)\\ 
a=\textcolor{VioletRed}{ran}()\,{\color{ForestGreen}!uniform}\\ 
\textcolor{VioletRed}{mean}(a),\textcolor{VioletRed}{sd}(a),\textcolor{VioletRed}{min}(a),\textcolor{VioletRed}{max}(a);\\ 
cpu1=\textcolor{VioletRed}{cpu}()\\ 
elapsed=cpu1-cpu0;\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{\textcolor{VioletRed}{secnds}() Clock time}\index{secnds()} 
\label{secnds} 
\singlespacing 
\begin{example}[secondsex]Example of elapsed time\\ 
\label{secondsex} 
\noindent cpu0=\textcolor{VioletRed}{cpu}()\\ 
sec0=\textcolor{VioletRed}{secnds}()\\ 
a=\textcolor{VioletRed}{matrix}(100000)\\ 
a=\textcolor{VioletRed}{ran}()\,{\color{ForestGreen}!uniform}\\ 
\textcolor{VioletRed}{mean}(a),\textcolor{VioletRed}{sd}(a),\textcolor{VioletRed}{min}(a),\textcolor{VioletRed}{max}(a);\\ 
cpu1=\textcolor{VioletRed}{cpu}()\\ 
sec1=\textcolor{VioletRed}{secnds}()\\ 
elapsed=cpu1-cpu0;\\ 
selapsed=sec1-sec0;\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{info() print some information of current parameters.} 
\label{info} 
\begin{note} 
Late addtiona information sis printed. 
\end{note} 
\section{Error handling} 
\label{error} 
There can happen basically three kinds of errors: 
\subsection{Error types} 
\label{errortype} 
\begin{itemize} 
\item The user makes an error an \textbf{Jlp22} detects the error, writes the proper error message 
and returns the control to the \textcolor{Red}{sit>} prompt in the console, if variable \textcolor{teal}{Continue} has value zero. If \textcolor{teal}{Continue} has a nonzero value 
\textbf{Jlp22} continues one level above the console. 
 
The user makes an error, but \textbf{Jlp22} does not recognize this. As \textbf{Jlp22} should recognize all errors the 
user can make, this case is thus also a programming deficiency. 
In this case \textbf{Jlp22} 
behaves similarly as in the following case. 
 
\item The error is a programming error in \textbf{Jlp22}. Then two cases can happen: 
\begin{itemize} 
\item \textbf{Jlp22} does not recognize that something is in error, and the system crashes. The debug 
version writes then more information than the release version. It is important that \textbf{Jlp22} is 
used in the commend prompt, so that it does not just disappear. 
\item \textbf{Jlp22} recognizes in lower level subroutines that something is wrong, but the 
lower level subroutine does not know waht is the reason. Thwe \textbf{Jlp22} prints an error message 
starting with *j*. Even if the user recognizes that she was guilty, thes cases should be reported 
so that detection of user errors can be improved. 
\end{itemize} 
\end{itemize} 
\subsection{Handling of errors} 
\label{errorhand} 
There are two control layers, input programming and execution of one-line commands. Both can utilize 
the code obtained with parser, but input programming is utilizing the parser only a little. 
\textbf{Jlp22} function can use \textcolor{teal}{TRANS} objects containing packed parsed code in many different ways. 
There can be nesting both in input programming and executing \textcolor{teal}{TRANS} objects. The \textcolor{Red}{;incl} files 
can be nested up to 5 levels. Functions can be recursive in many different ways. A function can call itself 
through many routes. 
 
In case of error should be able to tell for all nested \textcolor{Red}{;incl} files what line is 
processed, and errors within \textcolor{teal}{TRANS} objects should be able to tell through the calling sequence 
which line is under execution. 
Let us test this in the following example. 
 
\singlespacing 
\begin{example}[errorex]rex\\ 
\label{errorex} 
\noindent round=5\\ 
\textcolor{VioletRed}{write}('inca.txt',\$,'**we\,are\,in\,inca.txt')\\ 
\textcolor{VioletRed}{write}('inca.txt',\$,'round;')\\ 
\textcolor{VioletRed}{write}('inca.txt',\$,'\textcolor{Red}{;incl}(incb.txt)')\\ 
\textcolor{VioletRed}{close}('inca.txt')\\ 
\textcolor{VioletRed}{print\_f}('inca.txt')\\ 
\textcolor{VioletRed}{write}('incb.txt',\$,'**we\,are\,in\,incb.txt')\\ 
\textcolor{VioletRed}{write}('incb.txt',\$,'round;')\\ 
\textcolor{VioletRed}{write}('incb.txt',\$,'round=round-1;')\\ 
\textcolor{VioletRed}{write}('incb.txt',\$,'\textcolor{VioletRed}{call}(\textcolor{teal}{transa})')\\ 
\textcolor{VioletRed}{write}('incb.txt',\$,'\textcolor{Red}{;incl}(inca.txt)')\\ 
\textcolor{VioletRed}{close}('incb.txt')\\ 
\textcolor{VioletRed}{print\_f}('incb.txt')\\ 
\textcolor{teal}{transa}=\textcolor{VioletRed}{trans}()\\ 
c=4/round;\\ 
/         \\ 
{\color{ForestGreen}** let us see what happens}\\ 
\textcolor{teal}{Continue}=1\\ 
\textcolor{Red}{;incl}(inca.txt)\\ 
{\color{ForestGreen}** maximum ;incl nesting was obtained}\\ 
 
round=2\\ 
{\color{ForestGreen}** what happens now?}\\ 
\textcolor{Red}{;incl}(inca.txt)\\ 
\textcolor{teal}{Continue}=0\\ 
\textcolor{VioletRed}{delete\_f}('inca.txt','incb.txt')\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\section{Co-operation between \textbf{Jlp22} and R} 
\label{JR} 
Is is possible to run R scripst from \textbf{Jlp22} and \textbf{Jlp22} scripts from R. 
\subsection{ \textcolor{VioletRed}{R}() Executes an R-script}\index{R()} 
\label{R} 
An R script can be executed with \textcolor{VioletRed}{R}(script) where script is \textcolor{teal}{CHAR} object 
defining the script text file. The function is calling // 
call execute\_command\_line('Rscript.lnk '//j\_filename(1:le), wait=.false.)// 
Thus a shortcut for the Rscript program needs to be available. 
\singlespacing 
\begin{example}[Rex]Example of Rscript\\ 
\label{Rex} 
\noindent rscript=\textcolor{VioletRed}{text}()\\ 
\#\,A\,simple\,R-script\,that\,generates\,a\,small\,data\,to\,file\,mydat.txt\\ 
wd<-"C:/jlp22/jmanual"\\ 
\textcolor{teal}{x}<-runif(10,0,10)\\ 
\textcolor{teal}{y}<-cbind(1,\textcolor{teal}{x})\%*\%c(1,2)+rnorm(10)\\ 
mydat<-data.frame(\textcolor{teal}{y},\textcolor{teal}{x})\\ 
write.\textcolor{VioletRed}{table}(mydat,file=paste(wd,"/mydat.txt",sep=""))\\ 
//                                                                          \\ 
\textcolor{VioletRed}{write}('miniscript.r',rscript)\\ 
\textcolor{VioletRed}{close}('miniscript.r')\\ 
\textcolor{VioletRed}{R}('miniscript.r')\\ 
\textcolor{VioletRed}{print}('mydat.txt')\\ 
\textcolor{VioletRed}{delete\_f}('mydat.txt','miniscript.r')\\ 
\end{example} 
\vspace{-7mm} \rule{5cm}{0.1pt} 
\onehalfspacing 
\subsection{Calling \textbf{Jlp22}-scripts from R} 
\label{Rcalls} 
File JR\_0.0.tar.gz in the folder J\_R contains R tarball for taking \textbf{Jlp22}  subroutines into R. 
With R command JR(‚Äùtestr.inc‚Äù) the example jp problem can be solved from R. 
Later lauri Mehtat\"alo will develop this co-operation further so that R can directly access also 
matrices in the \textbf{Jlp22} memory. 
For further information contact lauri.mehtatalo@luke.fi 
THIS DOES NOT WORK NOW We will reconsider it soon with Lauri 
\section{Future development} 
\label{future} 
The previous version contained possibilities to include factories into the optimization. 
Factory optimization is not available in the current version, because I'm now 
building a completely new version. I have already cleaned the data structures 
of linear programming 
and put the algorithm into reasonable subroutines. This makes it possible to 
follow and optimized the 
the flow of control. This made it already possible to put ordinary linear programming 
into a separate \textcolor{VioletRed}{jlpz}() function. 
 
I think that the current version of \textbf{Jlp22} provides many possibilities for future developments. 
For instance: 
\begin{itemize} 
\itemThe current version does not have any special functions 
for making simulators. The new \textcolor{VioletRed}{goto}() commands, possibility to work with submatrices, 
and the new \textcolor{VioletRed}{transdata}() function provide much more efficient ways to develop simulators. 
Examples will be provided shortly. 
\item Using the possibility to compute derivatives using the analytic derivates makes it quite straightforward 
to make it possible to have a nonlinear objective function and nonlinear constraints. These things 
are under design. 
\item It would be quite easy to include tools for piecewise linear constraints 
and objectives. 
\item It would be quite easy to develop \textbf{Jlp22} so that integer solution is produced with respect to the 
schedule weight. 
\item It would be interesting to see how \textbf{Jlp22} can put to work with Heureka. 
\item The possibility to run R scripts from \textbf{Jlp22} and \textbf{Jlp22} scripts from R provide new possibilities. 
\item \textbf{Jlp22} can now be used as an interface to Gnuplot. 
Google search show how many possibilities Gnuplot provides. 
It is quite straightforward to implement these graphs if it is not currently possible. 
\item The possibility to generate random numbers from any discrete or continuous distribution provide new 
possibilities to study the effects of random errors in the optimization. 
\item The new tools for analyzing grouped data are useful when studying the grouped data. it would 
be straightforward to implement mixed model methods based on expected means squares. 
\end{itemize} 
\begin{thebibliography}{9} 
 
\bibitem{dan} 
Dantzig, G.\textcolor{teal}{B}. and VanSlyke, R.M.  (1967) 
\emph{Generalized upper bounding techniques} 
\textbf{J} Compt Sys Sci 1(10),213-226 
 
\bibitem{flet}Fletcher,R.  1996. Dense factors of Sparse matrices. Dundee 
Numerical Analysis Report NA/170. 
 
 
\bibitem{howard} 
Hoganson, H.M. and Rose, D.W.  (1984), 
\emph{A simulation approach for optimal timber management scheduling} 
Forest Science, 30:220-238 
 
\bibitem{dtran}Hoganson, H.M. and Kapple,  D.C. (1991), 
\emph{DTRAN version 1.0. A multi-market timber supply model. Users‚Äô guide} 
Minneapolis: University of Minnesota Department of Forest 
Resources Staff Series Paper 82, 
 
\bibitem{pekka} 
Hyv\"onen, Pekka, Lempinen, Reetta, 
Lappi, Juha, Laitila, Juha  and Packalen, Tuula (2019) 
\emph{Joining up optimisation of wood supply chains with forest}, 
Forestry an international journal of forestry, 
93(1):163--177, 
DOI = https://doi.org/10.1093/forestry/cpz058 
 
\bibitem{JLP} Lappi, Juha (1992) \emph{JLP -- a linear programming package for 
management planning} Finnish Forest Research Institute 
Research papers; 414, 134 p. 
 
 
 
\bibitem{LL} 
Lappi, Juha and Lempinen, Reetta (2014) 
\emph{A linear programming algorithm and software 
for forest-level planning problems 
including factories} 
Scandinavian Journal of Forest Research,29 Supplement 178--184", 
DOI =  http://dx.doi.org/10.1080/02827581.2014.886714 
 
\bibitem{gnu} 
Thomas Williams, Thomas and Kelley, Colin (2022), 
\emph{Gnuplot 5.5}, 
url = http://gnuplot.info/docs\_5.5/ 
 
 
 
 
 
 
\end{thebibliography} 
